<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta name="generator" content="Source Insight Version 4.00.0084 Built on 2017-02-26">
<meta charset='UTF-8' />
<style type='text/css'><!--
TD {background-color: #C0C0C0; font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 70%; }
.blurb {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 70%; }
.filename {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 120%; font-weight: bold; }
.dirname {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 100%; font-weight: bold; margin-top: 2.5em;}
--></style>
<title>src\timezone\zic.c</title>
<LINK REL=StyleSheet HREF="../../C_Cpp_Source_File.css" TYPE='text/css' MEDIA=screen>
</head>
<body bgcolor=#ffffff>
<table bgcolor='#c0c0c0' width='100%'>
<tr><td><p class='filename'><b>src\timezone\zic.c</b></p></td>
<td align='right'>
Wed Jun 14 08:26:15 2017
</td></tr>
<tr><td><a href='../../Contents.html'>Contents</a></td></tr>
</table>
<pre>
</span><span class='Comment_Multi_Line'>/* 
 * This file is in the public domain, so clarified as of 
 * 2006-07-17 by Arthur David Olson. 
 * 
 * IDENTIFICATION 
 *    src/timezone/zic.c 
 */ 
</span> 
<span class='Keyword'>#include </span><span class='String'>"postgres_fe.h"</span> 
 
<span class='Keyword'>#include </span><span class='String'>&LT;fcntl.h&GT;</span> 
<span class='Keyword'>#include </span><span class='String'>&LT;sys/stat.h&GT;</span> 
<span class='Keyword'>#include </span><span class='String'>&LT;time.h&GT;</span> 
<span class='Keyword'>#include </span><span class='String'>&LT;unistd.h&GT;</span> 
 
<span class='Keyword'>#include </span><span class='String'>"pg_getopt.h"</span> 
 
<span class='Keyword'>#include </span><span class='String'>"private.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"tzfile.h"</span> 
 
<a name="LN20"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>ZIC_VERSION_PRE_2013</span> <span class='String'>'2'</span> 
<a name="LN21"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>ZIC_VERSION</span> <span class='String'>'3'</span> 
 
<a name="LN23"></a><span class='Control'>typedef</span> <a href="../include/c.h.html#LN294"><span class='Ref_to_Typedef'>int64</span></a> <span class='Declare_Typedef'>zic_t</span><span class='Delimiter'>; 
</span><a name="LN24"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>ZIC_MIN</span> <a href="../include/c.h.html#LN341"><span class='Ref_to_Const'>PG_INT64_MIN</span></a> 
<a name="LN25"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>ZIC_MAX</span> <a href="../include/c.h.html#LN342"><span class='Ref_to_Const'>PG_INT64_MAX</span></a> 
 
<span class='Directive'>#ifndef</span> <a href="zic.c.html#LN28"><span class='Ref_to_Const'>ZIC_MAX_ABBR_LEN_WO_WARN</span></a> 
<a name="LN28"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>ZIC_MAX_ABBR_LEN_WO_WARN</span>      <span class='Number'>6</span> 
<span class='Directive'>#endif</span>   <span class='Comment_Single_Line'>/* !defined ZIC_MAX_ABBR_LEN_WO_WARN */ 
</span> 
<span class='Directive'>#ifndef</span> <a href="../include/c.h.html#LN61"><span class='Ref_to_Const'>WIN32</span></a> 
<span class='Directive'>#ifdef</span> <a href="../include/port/win32.h.html#LN424"><span class='Ref_to_Const'>S_IRUSR</span></a> 
<a name="LN33"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>MKDIR_UMASK</span> <span class='Parentheses'>(</span><a href="../include/port/win32.h.html#LN424"><span class='Ref_to_Const'>S_IRUSR</span></a><span class='Operator'>|</span><a href="../include/port/win32.h.html#LN425"><span class='Ref_to_Const'>S_IWUSR</span></a><span class='Operator'>|</span><a href="../include/port/win32.h.html#LN426"><span class='Ref_to_Const'>S_IXUSR</span></a><span class='Operator'>|</span><a href="../include/port/win32.h.html#LN447"><span class='Ref_to_Const'>S_IRGRP</span></a><span class='Operator'>|</span><a href="../include/port/win32.h.html#LN449"><span class='Ref_to_Const'>S_IXGRP</span></a><span class='Operator'>|</span><a href="../include/port/win32.h.html#LN451"><span class='Ref_to_Const'>S_IROTH</span></a><span class='Operator'>|</span><a href="../include/port/win32.h.html#LN453"><span class='Ref_to_Const'>S_IXOTH</span></a><span class='Parentheses'>) 
</span><span class='Directive'>#else</span> 
<a name="LN35"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>MKDIR_UMASK</span> <span class='Number'>0755</span> 
<span class='Directive'>#endif</span> 
<span class='Directive'>#endif</span> 
<span class='Directive'>#ifndef</span> AT_SYMLINK_FOLLOW 
<a name="LN39"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>linkat</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>fromdir</span><span class='Delimiter'>, </span><span class='Declare_Parameter'>from</span><span class='Delimiter'>, </span><span class='Declare_Parameter'>todir</span><span class='Delimiter'>, </span><span class='Declare_Parameter'>to</span><span class='Delimiter'>, </span><span class='Declare_Parameter'>flag</span><span class='Parentheses'>) </span><span class='Operator'>\ 
</span>    <span class='Parentheses'>(</span><a href="zic.c.html#LN1035"><span class='Ref_to_Func'>itssymlink</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN39"><span class='Ref_to_Parameter'>from</span></a><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='Parentheses'>(</span>errno <span class='Operator'>= </span><a href="private.h.html#LN34"><span class='Ref_to_Const'>ENOTSUP</span></a><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Parentheses'>) </span><span class='Operator'>: </span><a href="zic.c.html#LN109"><span class='Ref_to_Proto'>link</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN39"><span class='Ref_to_Parameter'>from</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN39"><span class='Ref_to_Parameter'>to</span></a><span class='Parentheses'>))</span> 
<span class='Directive'>#endif</span> 
 
<span class='Comment_Multi_Line'>/* The maximum ptrdiff_t value, for pre-C99 platforms.  */ 
</span><span class='Directive'>#ifndef</span> <a href="zic.c.html#LN45"><span class='Ref_to_Global_Var'>PTRDIFF_MAX</span></a> 
<a name="LN45"></a><span class='Keyword'>static </span>ptrdiff_t <span class='Keyword'>const </span><span class='Declare_Var'>PTRDIFF_MAX</span> <span class='Operator'>= </span><a href="private.h.html#LN78"><span class='Ref_to_Macro'>MAXVAL</span></a><span class='Parentheses'>(</span>ptrdiff_t<span class='Delimiter'>, </span><a href="private.h.html#LN69"><span class='Ref_to_Macro'>TYPE_BIT</span></a><span class='Parentheses'>(</span>ptrdiff_t<span class='Parentheses'>))</span><span class='Delimiter'>; 
</span><span class='Directive'>#endif</span> 
 
<span class='Comment_Multi_Line'>/* The type and printf format for line numbers.  */ 
</span><a name="LN49"></a><span class='Control'>typedef</span> <span class='Keyword'>int </span><span class='Declare_Typedef'>lineno_t</span><span class='Delimiter'>; 
</span><a name="LN50"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>PRIdLINENO</span> <span class='String'>"d"</span> 
 
<a name="LN52"></a><span class='Control'>struct</span> <span class='Declare_Struct'>rule</span> 
<span class='Delimiter'>{ 
</span><a name="LN54"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Member'>r_filename</span><span class='Delimiter'>; 
</span><a name="LN55"></a>    <a href="zic.c.html#LN49"><span class='Ref_to_Typedef'>lineno_t</span></a>    <span class='Declare_Member'>r_linenum</span><span class='Delimiter'>; 
</span><a name="LN56"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Member'>r_name</span><span class='Delimiter'>; 
</span> 
<a name="LN58"></a>    <a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a>       <span class='Declare_Member'>r_loyear</span><span class='Delimiter'>;</span>       <span class='Comment_Single_Line'>/* for example, 1986 */ 
</span><a name="LN59"></a>    <a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a>       <span class='Declare_Member'>r_hiyear</span><span class='Delimiter'>;</span>       <span class='Comment_Single_Line'>/* for example, 1986 */ 
</span><a name="LN60"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Member'>r_yrtype</span><span class='Delimiter'>; 
</span><a name="LN61"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Member'>r_lowasnum</span><span class='Delimiter'>; 
</span><a name="LN62"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Member'>r_hiwasnum</span><span class='Delimiter'>; 
</span> 
<a name="LN64"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>r_month</span><span class='Delimiter'>;</span>        <span class='Comment_Single_Line'>/* 0..11 */ 
</span> 
<a name="LN66"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>r_dycode</span><span class='Delimiter'>;</span>       <span class='Comment_Single_Line'>/* see below */ 
</span><a name="LN67"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>r_dayofmonth</span><span class='Delimiter'>; 
</span><a name="LN68"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>r_wday</span><span class='Delimiter'>; 
</span> 
<a name="LN70"></a>    <a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a>       <span class='Declare_Member'>r_tod</span><span class='Delimiter'>;</span>          <span class='Comment_Single_Line'>/* time from midnight */ 
</span><a name="LN71"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Member'>r_todisstd</span><span class='Delimiter'>;</span>     <span class='Comment_Multi_Line'>/* above is standard time if 1 or wall clock 
                                 * time if 0 */ 
</span><a name="LN73"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Member'>r_todisgmt</span><span class='Delimiter'>;</span>     <span class='Comment_Single_Line'>/* above is GMT if 1 or local time if 0 */ 
</span><a name="LN74"></a>    <a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a>       <span class='Declare_Member'>r_stdoff</span><span class='Delimiter'>;</span>       <span class='Comment_Single_Line'>/* offset from standard time */ 
</span><a name="LN75"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Member'>r_abbrvar</span><span class='Delimiter'>;</span>      <span class='Comment_Single_Line'>/* variable part of abbreviation */ 
</span> 
<a name="LN77"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Member'>r_todo</span><span class='Delimiter'>;</span>         <span class='Comment_Single_Line'>/* a rule to do (used in outzone) */ 
</span><a name="LN78"></a>    <a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a>       <span class='Declare_Member'>r_temp</span><span class='Delimiter'>;</span>         <span class='Comment_Single_Line'>/* used in outzone */ 
</span><span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end rule &raquo; </span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* 
 *  r_dycode        r_dayofmonth    r_wday 
 */ 
</span> 
<a name="LN85"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>DC_DOM</span>      <span class='Number'>0</span>   <span class='Comment_Multi_Line'>/* 1..31 */</span>     <span class='Comment_Single_Line'>/* unused */ 
</span><a name="LN86"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>DC_DOWGEQ</span>   <span class='Number'>1</span>   <span class='Comment_Multi_Line'>/* 1..31 */</span>     <span class='Comment_Single_Line'>/* 0..6 (Sun..Sat) */ 
</span><a name="LN87"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>DC_DOWLEQ</span>   <span class='Number'>2</span>   <span class='Comment_Multi_Line'>/* 1..31 */</span>     <span class='Comment_Single_Line'>/* 0..6 (Sun..Sat) */ 
</span> 
<a name="LN89"></a><span class='Control'>struct</span> <span class='Declare_Struct'>zone</span> 
<span class='Delimiter'>{ 
</span><a name="LN91"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Member'>z_filename</span><span class='Delimiter'>; 
</span><a name="LN92"></a>    <a href="zic.c.html#LN49"><span class='Ref_to_Typedef'>lineno_t</span></a>    <span class='Declare_Member'>z_linenum</span><span class='Delimiter'>; 
</span> 
<a name="LN94"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Member'>z_name</span><span class='Delimiter'>; 
</span><a name="LN95"></a>    <a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a>       <span class='Declare_Member'>z_gmtoff</span><span class='Delimiter'>; 
</span><a name="LN96"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Member'>z_rule</span><span class='Delimiter'>; 
</span><a name="LN97"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Member'>z_format</span><span class='Delimiter'>; 
</span><a name="LN98"></a>    <span class='Keyword'>char</span>        <span class='Declare_Member'>z_format_specifier</span><span class='Delimiter'>; 
</span> 
<a name="LN100"></a>    <a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a>       <span class='Declare_Member'>z_stdoff</span><span class='Delimiter'>; 
</span> 
<a name="LN102"></a>    <span class='Control'>struct</span> <a href="localtime.c.html#LN81"><span class='Ref_to_Struct'>rule</span></a> <span class='Operator'>*</span><span class='Declare_Member'>z_rules</span><span class='Delimiter'>; 
</span><a name="LN103"></a>    ptrdiff_t   <span class='Declare_Member'>z_nrules</span><span class='Delimiter'>; 
</span> 
<a name="LN105"></a>    <span class='Control'>struct</span> <a href="localtime.c.html#LN81"><span class='Ref_to_Struct'>rule</span></a> <span class='Declare_Member'>z_untilrule</span><span class='Delimiter'>; 
</span><a name="LN106"></a>    <a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a>       <span class='Declare_Member'>z_untiltime</span><span class='Delimiter'>; 
}; 
</span> 
<a name="LN109"></a><span class='Keyword'>extern int</span>  <span class='Declare_Prototype'>link</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>fromname</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>toname</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<a name="LN111"></a><span class='Keyword'>static void </span><span class='Declare_Function'>memory_exhausted</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>msg</span><span class='Parentheses'>) </span><a href="../backend/replication/logical/tablesync.c.html#LN118"><span class='Ref_to_Func'>pg_attribute_noreturn</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><span class='Keyword'>static void </span><a href="zic.c.html#LN465"><span class='Ref_to_Func'>verror</span></a><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><a href="../interfaces/ecpg/test/expected/preproc-type.c.html#LN45"><span class='Ref_to_Typedef'>string</span></a><span class='Delimiter'>, </span>va_list <a href="../pl/plperl/ppport.h.html#LN4358"><span class='Ref_to_Global_Var'>args</span></a><span class='Parentheses'>) </span><a href="../port/win32security.c.html#LN25"><span class='Ref_to_Func'>pg_attribute_printf</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Keyword'>static void </span><a href="../interfaces/ecpg/test/expected/sql-dyntest.c.html#LN145"><span class='Ref_to_Func'>error</span></a><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><a href="../interfaces/ecpg/test/expected/preproc-type.c.html#LN45"><span class='Ref_to_Typedef'>string</span></a><span class='Delimiter'>,</span><span class='Operator'>...</span><span class='Parentheses'>) </span><a href="../port/win32security.c.html#LN25"><span class='Ref_to_Func'>pg_attribute_printf</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Keyword'>static void </span><a href="zic.c.html#LN492"><span class='Ref_to_Func'>warning</span></a><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><a href="../interfaces/ecpg/test/expected/preproc-type.c.html#LN45"><span class='Ref_to_Typedef'>string</span></a><span class='Delimiter'>,</span><span class='Operator'>...</span><span class='Parentheses'>) </span><a href="../port/win32security.c.html#LN25"><span class='Ref_to_Func'>pg_attribute_printf</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Keyword'>static void </span><a href="../bin/psql/help.h.html#LN10"><span class='Ref_to_Proto'>usage</span></a><span class='Parentheses'>(</span>FILE <span class='Operator'>*</span>stream<span class='Delimiter'>, </span><span class='Keyword'>int </span><a href="../bin/pg_ctl/pg_ctl.c.html#LN100"><span class='Ref_to_Global_Var'>status</span></a><span class='Parentheses'>) </span><a href="../backend/replication/logical/tablesync.c.html#LN118"><span class='Ref_to_Func'>pg_attribute_noreturn</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><span class='Keyword'>static void </span><a href="zic.c.html#LN3021"><span class='Ref_to_Func'>addtt</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a> starttime<span class='Delimiter'>, </span><span class='Keyword'>int </span>type<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Keyword'>static int</span>  <a href="zic.c.html#LN3046"><span class='Ref_to_Func'>addtype</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a><span class='Delimiter'>, </span><span class='Keyword'>char const </span><span class='Operator'>*</span><span class='Delimiter'>, </span><span class='Keyword'>bool</span><span class='Delimiter'>, </span><span class='Keyword'>bool</span><span class='Delimiter'>, </span><span class='Keyword'>bool</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Keyword'>static void </span><a href="zic.c.html#LN3093"><span class='Ref_to_Func'>leapadd</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a><span class='Delimiter'>, </span><span class='Keyword'>bool</span><span class='Delimiter'>, </span><span class='Keyword'>int</span><span class='Delimiter'>, </span><span class='Keyword'>int</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Keyword'>static void </span><a href="zic.c.html#LN3129"><span class='Ref_to_Func'>adjleap</span></a><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Keyword'>static void </span><a href="zic.c.html#LN1062"><span class='Ref_to_Func'>associate</span></a><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Keyword'>static void </span><a href="zic.c.html#LN866"><span class='Ref_to_Func'>dolink</span></a><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Delimiter'>, </span><span class='Keyword'>bool</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Keyword'>static char </span><span class='Operator'>**</span><a href="zic.c.html#LN3395"><span class='Ref_to_Func'>getfields</span></a><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><a href="../bin/pg_test_fsync/pg_test_fsync.c.html#LN66"><span class='Ref_to_Global_Var'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Keyword'>static </span><a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a> <a href="zic.c.html#LN1251"><span class='Ref_to_Func'>gethms</span></a><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><a href="../interfaces/ecpg/test/expected/preproc-type.c.html#LN45"><span class='Ref_to_Typedef'>string</span></a><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span>errstring<span class='Delimiter'>, 
</span>       <span class='Keyword'>bool</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Keyword'>static void </span><a href="zic.c.html#LN1148"><span class='Ref_to_Func'>infile</span></a><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><a href="../bin/pg_test_fsync/pg_test_fsync.c.html#LN67"><span class='Ref_to_Global_Var'>filename</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Keyword'>static void </span><a href="zic.c.html#LN1480"><span class='Ref_to_Func'>inleap</span></a><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>**</span>fields<span class='Delimiter'>, </span><span class='Keyword'>int </span>nfields<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Keyword'>static void </span><a href="zic.c.html#LN1610"><span class='Ref_to_Func'>inlink</span></a><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>**</span>fields<span class='Delimiter'>, </span><span class='Keyword'>int </span>nfields<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Keyword'>static void </span><a href="zic.c.html#LN1304"><span class='Ref_to_Func'>inrule</span></a><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>**</span>fields<span class='Delimiter'>, </span><span class='Keyword'>int </span>nfields<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Keyword'>static bool </span><a href="zic.c.html#LN1370"><span class='Ref_to_Func'>inzcont</span></a><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>**</span>fields<span class='Delimiter'>, </span><span class='Keyword'>int </span>nfields<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Keyword'>static bool </span><a href="zic.c.html#LN1332"><span class='Ref_to_Func'>inzone</span></a><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>**</span>fields<span class='Delimiter'>, </span><span class='Keyword'>int </span>nfields<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Keyword'>static bool </span><a href="zic.c.html#LN1381"><span class='Ref_to_Func'>inzsub</span></a><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>**</span><span class='Delimiter'>, </span><span class='Keyword'>int</span><span class='Delimiter'>, </span><span class='Keyword'>bool</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Keyword'>static bool </span><a href="zic.c.html#LN1010"><span class='Ref_to_Func'>itsdir</span></a><span class='Parentheses'>(</span><span class='Keyword'>char const </span><span class='Operator'>*</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Keyword'>static bool </span><a href="zic.c.html#LN1035"><span class='Ref_to_Func'>itssymlink</span></a><span class='Parentheses'>(</span><span class='Keyword'>char const </span><span class='Operator'>*</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Keyword'>static bool </span><a href="zic.c.html#LN3212"><span class='Ref_to_Func'>is_alpha</span></a><span class='Parentheses'>(</span><span class='Keyword'>char </span>a<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Keyword'>static char </span><a href="zic.c.html#LN3277"><span class='Ref_to_Func'>lowerit</span></a><span class='Parentheses'>(</span><span class='Keyword'>char</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Keyword'>static void </span><a href="zic.c.html#LN3615"><span class='Ref_to_Func'>mkdirs</span></a><span class='Parentheses'>(</span><span class='Keyword'>char const </span><span class='Operator'>*</span><span class='Delimiter'>, </span><span class='Keyword'>bool</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Keyword'>static void </span><a href="zic.c.html#LN3577"><span class='Ref_to_Func'>newabbr</span></a><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span>abbr<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Keyword'>static </span><a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a> <a href="zic.c.html#LN3442"><span class='Ref_to_Func'>oadd</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a> t1<span class='Delimiter'>, </span><a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a> t2<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Keyword'>static void </span><a href="zic.c.html#LN2645"><span class='Ref_to_Func'>outzone</span></a><span class='Parentheses'>(</span><span class='Keyword'>const </span><span class='Control'>struct</span> <a href="zic.c.html#LN89"><span class='Ref_to_Struct'>zone</span></a> <span class='Operator'>* </span>zp<span class='Delimiter'>, </span>ptrdiff_t ntzones<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Keyword'>static </span><a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a> <a href="zic.c.html#LN3479"><span class='Ref_to_Func'>rpytime</span></a><span class='Parentheses'>(</span><span class='Keyword'>const </span><span class='Control'>struct</span> <a href="localtime.c.html#LN81"><span class='Ref_to_Struct'>rule</span></a> <span class='Operator'>* </span>rp<span class='Delimiter'>, </span><a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a> wantedy<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Keyword'>static void </span><a href="zic.c.html#LN1635"><span class='Ref_to_Func'>rulesub</span></a><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="localtime.c.html#LN81"><span class='Ref_to_Struct'>rule</span></a> <span class='Operator'>* </span>rp<span class='Delimiter'>, 
</span>        <span class='Keyword'>const char </span><span class='Operator'>*</span>loyearp<span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span>hiyearp<span class='Delimiter'>, 
</span>        <span class='Keyword'>const char </span><span class='Operator'>*</span>typep<span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span>monthp<span class='Delimiter'>, 
</span>        <span class='Keyword'>const char </span><span class='Operator'>*</span>dayp<span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span>timep<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Keyword'>static </span><a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a> <a href="zic.c.html#LN3450"><span class='Ref_to_Func'>tadd</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a> t1<span class='Delimiter'>, </span><a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a> t2<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Keyword'>static bool </span><a href="zic.c.html#LN3159"><span class='Ref_to_Func'>yearistype</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a> year<span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span>type<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* Bound on length of what %z can expand to.  */ 
</span><span class='Control'>enum</span> 
<span class='Delimiter'>{ 
</span>PERCENT_Z_LEN_BOUND <span class='Operator'>= </span><span class='Keyword'>sizeof </span><span class='String'>"+995959"</span> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end memory_exhausted &raquo; </span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* If true, work around a bug in Qt 5.6.1 and earlier, which mishandles 
   tz binary files whose POSIX-TZ-style strings contain '&LT;'; see 
   QTBUG-53071 &LT;https://bugreports.qt.io/browse/QTBUG-53071&GT;.  This 
   workaround will no longer be needed when Qt 5.6.1 and earlier are 
   obsolete, say in the year 2021.  */ 
</span><span class='Control'>enum</span> 
<span class='Delimiter'>{ 
</span><a name="LN160"></a><span class='Declare_Enum_Const'>WORK_AROUND_QTBUG_53071</span> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>}; 
</span> 
<a name="LN162"></a><span class='Keyword'>static int</span>  <span class='Declare_Var'>charcnt</span><span class='Delimiter'>; 
</span><a name="LN163"></a><span class='Keyword'>static bool </span><span class='Declare_Var'>errors</span><span class='Delimiter'>; 
</span><a name="LN164"></a><span class='Keyword'>static bool </span><span class='Declare_Var'>warnings</span><span class='Delimiter'>; 
</span><a name="LN165"></a><span class='Keyword'>static const char </span><span class='Operator'>*</span><span class='Declare_Var'>filename</span><span class='Delimiter'>; 
</span><a name="LN166"></a><span class='Keyword'>static int</span>  <span class='Declare_Var'>leapcnt</span><span class='Delimiter'>; 
</span><a name="LN167"></a><span class='Keyword'>static bool </span><span class='Declare_Var'>leapseen</span><span class='Delimiter'>; 
</span><a name="LN168"></a><span class='Keyword'>static </span><a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a> <span class='Declare_Var'>leapminyear</span><span class='Delimiter'>; 
</span><a name="LN169"></a><span class='Keyword'>static </span><a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a> <span class='Declare_Var'>leapmaxyear</span><span class='Delimiter'>; 
</span><a name="LN170"></a><span class='Keyword'>static </span><a href="zic.c.html#LN49"><span class='Ref_to_Typedef'>lineno_t</span></a> <span class='Declare_Var'>linenum</span><span class='Delimiter'>; 
</span><a name="LN171"></a><span class='Keyword'>static int</span>  <span class='Declare_Var'>max_abbrvar_len</span> <span class='Operator'>= </span>PERCENT_Z_LEN_BOUND<span class='Delimiter'>; 
</span><a name="LN172"></a><span class='Keyword'>static int</span>  <span class='Declare_Var'>max_format_len</span><span class='Delimiter'>; 
</span><a name="LN173"></a><span class='Keyword'>static </span><a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a> <span class='Declare_Var'>max_year</span><span class='Delimiter'>; 
</span><a name="LN174"></a><span class='Keyword'>static </span><a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a> <span class='Declare_Var'>min_year</span><span class='Delimiter'>; 
</span><a name="LN175"></a><span class='Keyword'>static bool </span><span class='Declare_Var'>noise</span><span class='Delimiter'>; 
</span><a name="LN176"></a><span class='Keyword'>static bool </span><span class='Declare_Var'>print_abbrevs</span><span class='Delimiter'>; 
</span><a name="LN177"></a><span class='Keyword'>static </span><a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a> <span class='Declare_Var'>print_cutoff</span><span class='Delimiter'>; 
</span><a name="LN178"></a><span class='Keyword'>static const char </span><span class='Operator'>*</span><span class='Declare_Var'>rfilename</span><span class='Delimiter'>; 
</span><a name="LN179"></a><span class='Keyword'>static </span><a href="zic.c.html#LN49"><span class='Ref_to_Typedef'>lineno_t</span></a> <span class='Declare_Var'>rlinenum</span><span class='Delimiter'>; 
</span><a name="LN180"></a><span class='Keyword'>static const char </span><span class='Operator'>*</span><span class='Declare_Var'>progname</span><span class='Delimiter'>; 
</span><a name="LN181"></a><span class='Keyword'>static </span>ptrdiff_t <span class='Declare_Var'>timecnt</span><span class='Delimiter'>; 
</span><a name="LN182"></a><span class='Keyword'>static </span>ptrdiff_t <span class='Declare_Var'>timecnt_alloc</span><span class='Delimiter'>; 
</span><a name="LN183"></a><span class='Keyword'>static int</span>  <span class='Declare_Var'>typecnt</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Line codes. 
 */ 
</span> 
<a name="LN189"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>LC_RULE</span>     <span class='Number'>0</span> 
<a name="LN190"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>LC_ZONE</span>     <span class='Number'>1</span> 
<a name="LN191"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>LC_LINK</span>     <span class='Number'>2</span> 
<a name="LN192"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>LC_LEAP</span>     <span class='Number'>3</span> 
 
<span class='Comment_Multi_Line'>/* 
 * Which fields are which on a Zone line. 
 */ 
</span> 
<a name="LN198"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>ZF_NAME</span>     <span class='Number'>1</span> 
<a name="LN199"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>ZF_GMTOFF</span>   <span class='Number'>2</span> 
<a name="LN200"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>ZF_RULE</span>     <span class='Number'>3</span> 
<a name="LN201"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>ZF_FORMAT</span>   <span class='Number'>4</span> 
<a name="LN202"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>ZF_TILYEAR</span>  <span class='Number'>5</span> 
<a name="LN203"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>ZF_TILMONTH</span> <span class='Number'>6</span> 
<a name="LN204"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>ZF_TILDAY</span>   <span class='Number'>7</span> 
<a name="LN205"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>ZF_TILTIME</span>  <span class='Number'>8</span> 
<a name="LN206"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>ZONE_MINFIELDS</span>  <span class='Number'>5</span> 
<a name="LN207"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>ZONE_MAXFIELDS</span>  <span class='Number'>9</span> 
 
<span class='Comment_Multi_Line'>/* 
 * Which fields are which on a Zone continuation line. 
 */ 
</span> 
<a name="LN213"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>ZFC_GMTOFF</span>  <span class='Number'>0</span> 
<a name="LN214"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>ZFC_RULE</span>    <span class='Number'>1</span> 
<a name="LN215"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>ZFC_FORMAT</span>  <span class='Number'>2</span> 
<a name="LN216"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>ZFC_TILYEAR</span> <span class='Number'>3</span> 
<a name="LN217"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>ZFC_TILMONTH</span>    <span class='Number'>4</span> 
<a name="LN218"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>ZFC_TILDAY</span>  <span class='Number'>5</span> 
<a name="LN219"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>ZFC_TILTIME</span> <span class='Number'>6</span> 
<a name="LN220"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>ZONEC_MINFIELDS</span> <span class='Number'>3</span> 
<a name="LN221"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>ZONEC_MAXFIELDS</span> <span class='Number'>7</span> 
 
<span class='Comment_Multi_Line'>/* 
 * Which files are which on a Rule line. 
 */ 
</span> 
<a name="LN227"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>RF_NAME</span>     <span class='Number'>1</span> 
<a name="LN228"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>RF_LOYEAR</span>   <span class='Number'>2</span> 
<a name="LN229"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>RF_HIYEAR</span>   <span class='Number'>3</span> 
<a name="LN230"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>RF_COMMAND</span>  <span class='Number'>4</span> 
<a name="LN231"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>RF_MONTH</span>    <span class='Number'>5</span> 
<a name="LN232"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>RF_DAY</span>      <span class='Number'>6</span> 
<a name="LN233"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>RF_TOD</span>      <span class='Number'>7</span> 
<a name="LN234"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>RF_STDOFF</span>   <span class='Number'>8</span> 
<a name="LN235"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>RF_ABBRVAR</span>  <span class='Number'>9</span> 
<a name="LN236"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>RULE_FIELDS</span> <span class='Number'>10</span> 
 
<span class='Comment_Multi_Line'>/* 
 * Which fields are which on a Link line. 
 */ 
</span> 
<a name="LN242"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>LF_FROM</span>     <span class='Number'>1</span> 
<a name="LN243"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>LF_TO</span>       <span class='Number'>2</span> 
<a name="LN244"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>LINK_FIELDS</span> <span class='Number'>3</span> 
 
<span class='Comment_Multi_Line'>/* 
 * Which fields are which on a Leap line. 
 */ 
</span> 
<a name="LN250"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>LP_YEAR</span>     <span class='Number'>1</span> 
<a name="LN251"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>LP_MONTH</span>    <span class='Number'>2</span> 
<a name="LN252"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>LP_DAY</span>      <span class='Number'>3</span> 
<a name="LN253"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>LP_TIME</span>     <span class='Number'>4</span> 
<a name="LN254"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>LP_CORR</span>     <span class='Number'>5</span> 
<a name="LN255"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>LP_ROLL</span>     <span class='Number'>6</span> 
<a name="LN256"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>LEAP_FIELDS</span> <span class='Number'>7</span> 
 
<span class='Comment_Multi_Line'>/* 
 * Year synonyms. 
 */ 
</span> 
<a name="LN262"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>YR_MINIMUM</span>  <span class='Number'>0</span> 
<a name="LN263"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>YR_MAXIMUM</span>  <span class='Number'>1</span> 
<a name="LN264"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>YR_ONLY</span>     <span class='Number'>2</span> 
 
<a name="LN266"></a><span class='Keyword'>static </span><span class='Control'>struct</span> <a href="localtime.c.html#LN81"><span class='Ref_to_Struct'>rule</span></a> <span class='Operator'>*</span><span class='Declare_Var'>rules</span><span class='Delimiter'>; 
</span><a name="LN267"></a><span class='Keyword'>static </span>ptrdiff_t <span class='Declare_Var'>nrules</span><span class='Delimiter'>;</span>        <span class='Comment_Single_Line'>/* number of rules */ 
</span><a name="LN268"></a><span class='Keyword'>static </span>ptrdiff_t <span class='Declare_Var'>nrules_alloc</span><span class='Delimiter'>; 
</span> 
<a name="LN270"></a><span class='Keyword'>static </span><span class='Control'>struct</span> <a href="zic.c.html#LN89"><span class='Ref_to_Struct'>zone</span></a> <span class='Operator'>*</span><span class='Declare_Var'>zones</span><span class='Delimiter'>; 
</span><a name="LN271"></a><span class='Keyword'>static </span>ptrdiff_t <span class='Declare_Var'>nzones</span><span class='Delimiter'>;</span>        <span class='Comment_Single_Line'>/* number of zones */ 
</span><a name="LN272"></a><span class='Keyword'>static </span>ptrdiff_t <span class='Declare_Var'>nzones_alloc</span><span class='Delimiter'>; 
</span> 
<a name="LN274"></a><span class='Control'>struct</span> <span class='Declare_Struct'>link</span> 
<span class='Delimiter'>{ 
</span><a name="LN276"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Member'>l_filename</span><span class='Delimiter'>; 
</span><a name="LN277"></a>    <a href="zic.c.html#LN49"><span class='Ref_to_Typedef'>lineno_t</span></a>    <span class='Declare_Member'>l_linenum</span><span class='Delimiter'>; 
</span><a name="LN278"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Member'>l_from</span><span class='Delimiter'>; 
</span><a name="LN279"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Member'>l_to</span><span class='Delimiter'>; 
}; 
</span> 
<a name="LN282"></a><span class='Keyword'>static </span><span class='Control'>struct</span> <a href="zic.c.html#LN109"><span class='Ref_to_Proto'>link</span></a> <span class='Operator'>*</span><span class='Declare_Var'>links</span><span class='Delimiter'>; 
</span><a name="LN283"></a><span class='Keyword'>static </span>ptrdiff_t <span class='Declare_Var'>nlinks</span><span class='Delimiter'>; 
</span><a name="LN284"></a><span class='Keyword'>static </span>ptrdiff_t <span class='Declare_Var'>nlinks_alloc</span><span class='Delimiter'>; 
</span> 
<a name="LN286"></a><span class='Control'>struct</span> <span class='Declare_Struct'>lookup</span> 
<span class='Delimiter'>{ 
</span><a name="LN288"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Member'>l_word</span><span class='Delimiter'>; 
</span><a name="LN289"></a>    <span class='Keyword'>const int</span>   <span class='Declare_Member'>l_value</span><span class='Delimiter'>; 
}; 
</span> 
<a name="LN292"></a><span class='Keyword'>static </span><span class='Control'>struct</span> <a href="zic.c.html#LN286"><span class='Ref_to_Struct'>lookup</span></a> <span class='Keyword'>const </span><span class='Operator'>*</span><span class='Declare_Prototype'>byword</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>string</span><span class='Delimiter'>, 
</span><a name="LN293"></a>       <span class='Keyword'>const </span><span class='Control'>struct</span> <a href="zic.c.html#LN286"><span class='Ref_to_Struct'>lookup</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>lp</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<a name="LN295"></a><span class='Keyword'>static </span><span class='Control'>struct</span> <a href="zic.c.html#LN286"><span class='Ref_to_Struct'>lookup</span></a> <span class='Keyword'>const </span><span class='Declare_Var'>line_codes</span><span class='Delimiter'>[] </span><span class='Operator'>= </span><span class='Delimiter'>{ 
</span>    <span class='Delimiter'>{</span><span class='String'>"Rule"</span><span class='Delimiter'>, </span><a href="zic.c.html#LN189"><span class='Ref_to_Const'>LC_RULE</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"Zone"</span><span class='Delimiter'>, </span><a href="zic.c.html#LN190"><span class='Ref_to_Const'>LC_ZONE</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"Link"</span><span class='Delimiter'>, </span><a href="zic.c.html#LN191"><span class='Ref_to_Const'>LC_LINK</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"Leap"</span><span class='Delimiter'>, </span><a href="zic.c.html#LN192"><span class='Ref_to_Const'>LC_LEAP</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>} 
}; 
</span> 
<a name="LN303"></a><span class='Keyword'>static </span><span class='Control'>struct</span> <a href="zic.c.html#LN286"><span class='Ref_to_Struct'>lookup</span></a> <span class='Keyword'>const </span><span class='Declare_Var'>mon_names</span><span class='Delimiter'>[] </span><span class='Operator'>= </span><span class='Delimiter'>{ 
</span>    <span class='Delimiter'>{</span><span class='String'>"January"</span><span class='Delimiter'>, </span><a href="private.h.html#LN124"><span class='Ref_to_Const'>TM_JANUARY</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"February"</span><span class='Delimiter'>, </span><a href="private.h.html#LN125"><span class='Ref_to_Const'>TM_FEBRUARY</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"March"</span><span class='Delimiter'>, </span><a href="private.h.html#LN126"><span class='Ref_to_Const'>TM_MARCH</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"April"</span><span class='Delimiter'>, </span><a href="private.h.html#LN127"><span class='Ref_to_Const'>TM_APRIL</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"May"</span><span class='Delimiter'>, </span><a href="private.h.html#LN128"><span class='Ref_to_Const'>TM_MAY</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"June"</span><span class='Delimiter'>, </span><a href="private.h.html#LN129"><span class='Ref_to_Const'>TM_JUNE</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"July"</span><span class='Delimiter'>, </span><a href="private.h.html#LN130"><span class='Ref_to_Const'>TM_JULY</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"August"</span><span class='Delimiter'>, </span><a href="private.h.html#LN131"><span class='Ref_to_Const'>TM_AUGUST</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"September"</span><span class='Delimiter'>, </span><a href="private.h.html#LN132"><span class='Ref_to_Const'>TM_SEPTEMBER</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"October"</span><span class='Delimiter'>, </span><a href="private.h.html#LN133"><span class='Ref_to_Const'>TM_OCTOBER</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"November"</span><span class='Delimiter'>, </span><a href="private.h.html#LN134"><span class='Ref_to_Const'>TM_NOVEMBER</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"December"</span><span class='Delimiter'>, </span><a href="private.h.html#LN135"><span class='Ref_to_Const'>TM_DECEMBER</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>} 
}; 
</span> 
<a name="LN319"></a><span class='Keyword'>static </span><span class='Control'>struct</span> <a href="zic.c.html#LN286"><span class='Ref_to_Struct'>lookup</span></a> <span class='Keyword'>const </span><span class='Declare_Var'>wday_names</span><span class='Delimiter'>[] </span><span class='Operator'>= </span><span class='Delimiter'>{ 
</span>    <span class='Delimiter'>{</span><span class='String'>"Sunday"</span><span class='Delimiter'>, </span><a href="private.h.html#LN116"><span class='Ref_to_Const'>TM_SUNDAY</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"Monday"</span><span class='Delimiter'>, </span><a href="private.h.html#LN117"><span class='Ref_to_Const'>TM_MONDAY</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"Tuesday"</span><span class='Delimiter'>, </span><a href="private.h.html#LN118"><span class='Ref_to_Const'>TM_TUESDAY</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"Wednesday"</span><span class='Delimiter'>, </span><a href="private.h.html#LN119"><span class='Ref_to_Const'>TM_WEDNESDAY</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"Thursday"</span><span class='Delimiter'>, </span><a href="private.h.html#LN120"><span class='Ref_to_Const'>TM_THURSDAY</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"Friday"</span><span class='Delimiter'>, </span><a href="private.h.html#LN121"><span class='Ref_to_Const'>TM_FRIDAY</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"Saturday"</span><span class='Delimiter'>, </span><a href="private.h.html#LN122"><span class='Ref_to_Const'>TM_SATURDAY</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>} 
}; 
</span> 
<a name="LN330"></a><span class='Keyword'>static </span><span class='Control'>struct</span> <a href="zic.c.html#LN286"><span class='Ref_to_Struct'>lookup</span></a> <span class='Keyword'>const </span><span class='Declare_Var'>lasts</span><span class='Delimiter'>[] </span><span class='Operator'>= </span><span class='Delimiter'>{ 
</span>    <span class='Delimiter'>{</span><span class='String'>"last-Sunday"</span><span class='Delimiter'>, </span><a href="private.h.html#LN116"><span class='Ref_to_Const'>TM_SUNDAY</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"last-Monday"</span><span class='Delimiter'>, </span><a href="private.h.html#LN117"><span class='Ref_to_Const'>TM_MONDAY</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"last-Tuesday"</span><span class='Delimiter'>, </span><a href="private.h.html#LN118"><span class='Ref_to_Const'>TM_TUESDAY</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"last-Wednesday"</span><span class='Delimiter'>, </span><a href="private.h.html#LN119"><span class='Ref_to_Const'>TM_WEDNESDAY</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"last-Thursday"</span><span class='Delimiter'>, </span><a href="private.h.html#LN120"><span class='Ref_to_Const'>TM_THURSDAY</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"last-Friday"</span><span class='Delimiter'>, </span><a href="private.h.html#LN121"><span class='Ref_to_Const'>TM_FRIDAY</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"last-Saturday"</span><span class='Delimiter'>, </span><a href="private.h.html#LN122"><span class='Ref_to_Const'>TM_SATURDAY</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>} 
}; 
</span> 
<a name="LN341"></a><span class='Keyword'>static </span><span class='Control'>struct</span> <a href="zic.c.html#LN286"><span class='Ref_to_Struct'>lookup</span></a> <span class='Keyword'>const </span><span class='Declare_Var'>begin_years</span><span class='Delimiter'>[] </span><span class='Operator'>= </span><span class='Delimiter'>{ 
</span>    <span class='Delimiter'>{</span><span class='String'>"minimum"</span><span class='Delimiter'>, </span><a href="zic.c.html#LN262"><span class='Ref_to_Const'>YR_MINIMUM</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"maximum"</span><span class='Delimiter'>, </span><a href="zic.c.html#LN263"><span class='Ref_to_Const'>YR_MAXIMUM</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>} 
}; 
</span> 
<a name="LN347"></a><span class='Keyword'>static </span><span class='Control'>struct</span> <a href="zic.c.html#LN286"><span class='Ref_to_Struct'>lookup</span></a> <span class='Keyword'>const </span><span class='Declare_Var'>end_years</span><span class='Delimiter'>[] </span><span class='Operator'>= </span><span class='Delimiter'>{ 
</span>    <span class='Delimiter'>{</span><span class='String'>"minimum"</span><span class='Delimiter'>, </span><a href="zic.c.html#LN262"><span class='Ref_to_Const'>YR_MINIMUM</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"maximum"</span><span class='Delimiter'>, </span><a href="zic.c.html#LN263"><span class='Ref_to_Const'>YR_MAXIMUM</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"only"</span><span class='Delimiter'>, </span><a href="zic.c.html#LN264"><span class='Ref_to_Const'>YR_ONLY</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>} 
}; 
</span> 
<a name="LN354"></a><span class='Keyword'>static </span><span class='Control'>struct</span> <a href="zic.c.html#LN286"><span class='Ref_to_Struct'>lookup</span></a> <span class='Keyword'>const </span><span class='Declare_Var'>leap_types</span><span class='Delimiter'>[] </span><span class='Operator'>= </span><span class='Delimiter'>{ 
</span>    <span class='Delimiter'>{</span><span class='String'>"Rolling"</span><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"Stationary"</span><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>} 
}; 
</span> 
<a name="LN360"></a><span class='Keyword'>static const int </span><span class='Declare_Var'>len_months</span><span class='Delimiter'>[</span><span class='Number'>2</span><span class='Delimiter'>][</span><a href="private.h.html#LN114"><span class='Ref_to_Const'>MONSPERYEAR</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='Delimiter'>{ 
</span>    <span class='Delimiter'>{</span><span class='Number'>31</span><span class='Delimiter'>, </span><span class='Number'>28</span><span class='Delimiter'>, </span><span class='Number'>31</span><span class='Delimiter'>, </span><span class='Number'>30</span><span class='Delimiter'>, </span><span class='Number'>31</span><span class='Delimiter'>, </span><span class='Number'>30</span><span class='Delimiter'>, </span><span class='Number'>31</span><span class='Delimiter'>, </span><span class='Number'>31</span><span class='Delimiter'>, </span><span class='Number'>30</span><span class='Delimiter'>, </span><span class='Number'>31</span><span class='Delimiter'>, </span><span class='Number'>30</span><span class='Delimiter'>, </span><span class='Number'>31</span><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='Number'>31</span><span class='Delimiter'>, </span><span class='Number'>29</span><span class='Delimiter'>, </span><span class='Number'>31</span><span class='Delimiter'>, </span><span class='Number'>30</span><span class='Delimiter'>, </span><span class='Number'>31</span><span class='Delimiter'>, </span><span class='Number'>30</span><span class='Delimiter'>, </span><span class='Number'>31</span><span class='Delimiter'>, </span><span class='Number'>31</span><span class='Delimiter'>, </span><span class='Number'>30</span><span class='Delimiter'>, </span><span class='Number'>31</span><span class='Delimiter'>, </span><span class='Number'>30</span><span class='Delimiter'>, </span><span class='Number'>31</span><span class='Delimiter'>} 
}; 
</span> 
<a name="LN365"></a><span class='Keyword'>static const int </span><span class='Declare_Var'>len_years</span><span class='Delimiter'>[</span><span class='Number'>2</span><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='Delimiter'>{ 
</span>    <a href="private.h.html#LN110"><span class='Ref_to_Const'>DAYSPERNYEAR</span></a><span class='Delimiter'>, </span><a href="private.h.html#LN111"><span class='Ref_to_Const'>DAYSPERLYEAR</span></a> 
<span class='Delimiter'>}; 
</span> 
<a name="LN369"></a><span class='Keyword'>static </span><span class='Control'>struct</span> <span class='Declare_Struct'>attype</span> 
<span class='Delimiter'>{ 
</span><a name="LN371"></a>    <a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a>       <span class='Declare_Member'>at</span><span class='Delimiter'>; 
</span><a name="LN372"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Member'>dontmerge</span><span class='Delimiter'>; 
</span><a name="LN373"></a>    <span class='Keyword'>unsigned char </span><span class='Declare_Member'>type</span><span class='Delimiter'>; 
</span><a name="LN374"></a>}   <span class='Operator'>*</span><span class='Declare_Var'>attypes</span><span class='Delimiter'>; 
</span><a name="LN375"></a><span class='Keyword'>static </span><a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a> <span class='Declare_Var'>gmtoffs</span><span class='Delimiter'>[</span><a href="tzfile.h.html#LN95"><span class='Ref_to_Const'>TZ_MAX_TYPES</span></a><span class='Delimiter'>]; 
</span><a name="LN376"></a><span class='Keyword'>static char </span><span class='Declare_Var'>isdsts</span><span class='Delimiter'>[</span><a href="tzfile.h.html#LN95"><span class='Ref_to_Const'>TZ_MAX_TYPES</span></a><span class='Delimiter'>]; 
</span><a name="LN377"></a><span class='Keyword'>static unsigned char </span><span class='Declare_Var'>abbrinds</span><span class='Delimiter'>[</span><a href="tzfile.h.html#LN95"><span class='Ref_to_Const'>TZ_MAX_TYPES</span></a><span class='Delimiter'>]; 
</span><a name="LN378"></a><span class='Keyword'>static bool </span><span class='Declare_Var'>ttisstds</span><span class='Delimiter'>[</span><a href="tzfile.h.html#LN95"><span class='Ref_to_Const'>TZ_MAX_TYPES</span></a><span class='Delimiter'>]; 
</span><a name="LN379"></a><span class='Keyword'>static bool </span><span class='Declare_Var'>ttisgmts</span><span class='Delimiter'>[</span><a href="tzfile.h.html#LN95"><span class='Ref_to_Const'>TZ_MAX_TYPES</span></a><span class='Delimiter'>]; 
</span><a name="LN380"></a><span class='Keyword'>static char </span><span class='Declare_Var'>chars</span><span class='Delimiter'>[</span><a href="tzfile.h.html#LN97"><span class='Ref_to_Const'>TZ_MAX_CHARS</span></a><span class='Delimiter'>]; 
</span><a name="LN381"></a><span class='Keyword'>static </span><a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a> <span class='Declare_Var'>trans</span><span class='Delimiter'>[</span><a href="tzfile.h.html#LN100"><span class='Ref_to_Const'>TZ_MAX_LEAPS</span></a><span class='Delimiter'>]; 
</span><a name="LN382"></a><span class='Keyword'>static </span><a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a> <span class='Declare_Var'>corr</span><span class='Delimiter'>[</span><a href="tzfile.h.html#LN100"><span class='Ref_to_Const'>TZ_MAX_LEAPS</span></a><span class='Delimiter'>]; 
</span><a name="LN383"></a><span class='Keyword'>static char </span><span class='Declare_Var'>roll</span><span class='Delimiter'>[</span><a href="tzfile.h.html#LN100"><span class='Ref_to_Const'>TZ_MAX_LEAPS</span></a><span class='Delimiter'>]; 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Memory allocation. 
 */ 
</span> 
<span class='Keyword'>static void 
</span><a name="LN390"></a><span class='Declare_Function'>memory_exhausted</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>msg</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <a href="../../contrib/seg/segscan.l.html#LN10"><span class='Ref_to_Macro'>fprintf</span></a><span class='Parentheses'>(</span>stderr<span class='Delimiter'>, </span>_<span class='Parentheses'>(</span><span class='String'>"%s: Memory exhausted: %s\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="../bin/pg_test_timing/pg_test_timing.c.html#LN11"><span class='Ref_to_Global_Var'>progname</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN390"><span class='Ref_to_Parameter'>msg</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../test/isolation/specscanner.l.html#LN91"><span class='Ref_to_Proto'>exit</span></a><span class='Parentheses'>(</span><a href="../bin/psql/settings.h.html#LN150"><span class='Ref_to_Const'>EXIT_FAILURE</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Keyword'>static </span>size_t 
<a name="LN397"></a><span class='Declare_Function'>size_product</span><span class='Parentheses'>(</span>size_t <span class='Declare_Parameter'>nitems</span><span class='Delimiter'>, </span>size_t <span class='Declare_Parameter'>itemsize</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="private.h.html#LN51"><span class='Ref_to_Const'>SIZE_MAX</span></a> <span class='Operator'>/ </span><a href="zic.c.html#LN397"><span class='Ref_to_Parameter'>itemsize</span></a> <span class='Operator'>&LT; </span><a href="zic.c.html#LN397"><span class='Ref_to_Parameter'>nitems</span></a><span class='Parentheses'>) 
</span>        <a href="zic.c.html#LN111"><span class='Ref_to_Func'>memory_exhausted</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"size overflow"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="zic.c.html#LN397"><span class='Ref_to_Parameter'>nitems</span></a> <span class='Operator'>* </span><a href="zic.c.html#LN397"><span class='Ref_to_Parameter'>itemsize</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Keyword'>static void </span><span class='Operator'>* 
</span><a name="LN405"></a><span class='Declare_Function'>memcheck</span><span class='Parentheses'>(</span><span class='Keyword'>void </span><span class='Operator'>*</span><span class='Declare_Parameter'>ptr</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN405"><span class='Ref_to_Parameter'>ptr</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <a href="zic.c.html#LN111"><span class='Ref_to_Func'>memory_exhausted</span></a><span class='Parentheses'>(</span><a href="../port/strerror.c.html#LN17"><span class='Ref_to_Func'>strerror</span></a><span class='Parentheses'>(</span>errno<span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="zic.c.html#LN405"><span class='Ref_to_Parameter'>ptr</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Keyword'>static void </span><span class='Operator'>* 
</span><a name="LN413"></a><span class='Declare_Function'>emalloc</span><span class='Parentheses'>(</span>size_t <span class='Declare_Parameter'>size</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>return</span> <a href="zic.c.html#LN404"><span class='Ref_to_Func'>memcheck</span></a><span class='Parentheses'>(</span><a href="../include/snowball/header.h.html#LN49"><span class='Ref_to_Macro'>malloc</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN413"><span class='Ref_to_Parameter'>size</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<span class='Keyword'>static void </span><span class='Operator'>* 
</span><a name="LN419"></a><span class='Declare_Function'>erealloc</span><span class='Parentheses'>(</span><span class='Keyword'>void </span><span class='Operator'>*</span><span class='Declare_Parameter'>ptr</span><span class='Delimiter'>, </span>size_t <span class='Declare_Parameter'>size</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>return</span> <a href="zic.c.html#LN404"><span class='Ref_to_Func'>memcheck</span></a><span class='Parentheses'>(</span><a href="../include/snowball/header.h.html#LN59"><span class='Ref_to_Macro'>realloc</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN419"><span class='Ref_to_Parameter'>ptr</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN419"><span class='Ref_to_Parameter'>size</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<span class='Keyword'>static char </span><span class='Operator'>* 
</span><a name="LN425"></a><span class='Declare_Function'>ecpyalloc</span><span class='Parentheses'>(</span><span class='Keyword'>char const </span><span class='Operator'>* </span><span class='Declare_Parameter'>str</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>return</span> <a href="zic.c.html#LN404"><span class='Ref_to_Func'>memcheck</span></a><span class='Parentheses'>(</span>strdup<span class='Parentheses'>(</span><a href="zic.c.html#LN425"><span class='Ref_to_Parameter'>str</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<span class='Keyword'>static void </span><span class='Operator'>* 
</span><a name="LN431"></a><span class='Declare_Function'>growalloc</span><span class='Parentheses'>(</span><span class='Keyword'>void </span><span class='Operator'>*</span><span class='Declare_Parameter'>ptr</span><span class='Delimiter'>, </span>size_t <span class='Declare_Parameter'>itemsize</span><span class='Delimiter'>, </span>ptrdiff_t <span class='Declare_Parameter'>nitems</span><span class='Delimiter'>, </span>ptrdiff_t <span class='Operator'>*</span><span class='Declare_Parameter'>nitems_alloc</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN431"><span class='Ref_to_Parameter'>nitems</span></a> <span class='Operator'>&LT; *</span><a href="zic.c.html#LN431"><span class='Ref_to_Parameter'>nitems_alloc</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <a href="zic.c.html#LN431"><span class='Ref_to_Parameter'>ptr</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span><a name="LN437"></a>        ptrdiff_t   <span class='Declare_Local'>amax</span> <span class='Operator'>= </span><a href="zic.c.html#LN45"><span class='Ref_to_Global_Var'>PTRDIFF_MAX</span></a> <span class='Operator'>- </span><a href="zic.c.html#LN160"><span class='Ref_to_EnumConst'>WORK_AROUND_QTBUG_53071</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="zic.c.html#LN437"><span class='Ref_To_Local'>amax</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Parentheses'>) </span><span class='Operator'>/ </span><span class='Number'>3</span> <span class='Operator'>* </span><span class='Number'>2</span> <span class='Operator'>&LT; *</span><a href="zic.c.html#LN431"><span class='Ref_to_Parameter'>nitems_alloc</span></a><span class='Parentheses'>)</span> 
            <a href="zic.c.html#LN111"><span class='Ref_to_Func'>memory_exhausted</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"integer overflow"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Operator'>*</span><a href="zic.c.html#LN431"><span class='Ref_to_Parameter'>nitems_alloc</span></a> <span class='Operator'>+= </span><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="zic.c.html#LN431"><span class='Ref_to_Parameter'>nitems_alloc</span></a> <span class='Operator'>&GT;&GT; </span><span class='Number'>1</span><span class='Parentheses'>) </span><span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <a href="zic.c.html#LN418"><span class='Ref_to_Func'>erealloc</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN431"><span class='Ref_to_Parameter'>ptr</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN396"><span class='Ref_to_Func'>size_product</span></a><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="zic.c.html#LN431"><span class='Ref_to_Parameter'>nitems_alloc</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN431"><span class='Ref_to_Parameter'>itemsize</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Error handling. 
 */ 
</span> 
<span class='Keyword'>static void 
</span><a name="LN451"></a><span class='Declare_Function'>eats</span><span class='Parentheses'>(</span><span class='Keyword'>char const </span><span class='Operator'>* </span><span class='Declare_Parameter'>name</span><span class='Delimiter'>, </span><a href="zic.c.html#LN49"><span class='Ref_to_Typedef'>lineno_t</span></a> <span class='Declare_Parameter'>num</span><span class='Delimiter'>, </span><span class='Keyword'>char const </span><span class='Operator'>* </span><span class='Declare_Parameter'>rname</span><span class='Delimiter'>, </span><a href="zic.c.html#LN49"><span class='Ref_to_Typedef'>lineno_t</span></a> <span class='Declare_Parameter'>rnum</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <a href="../bin/pg_test_fsync/pg_test_fsync.c.html#LN67"><span class='Ref_to_Global_Var'>filename</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN451"><span class='Ref_to_Parameter'>name</span></a><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN170"><span class='Ref_to_Global_Var'>linenum</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN451"><span class='Ref_to_Parameter'>num</span></a><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN178"><span class='Ref_to_Global_Var'>rfilename</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN451"><span class='Ref_to_Parameter'>rname</span></a><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN179"><span class='Ref_to_Global_Var'>rlinenum</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN451"><span class='Ref_to_Parameter'>rnum</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Keyword'>static void 
</span><a name="LN460"></a><span class='Declare_Function'>eat</span><span class='Parentheses'>(</span><span class='Keyword'>char const </span><span class='Operator'>* </span><span class='Declare_Parameter'>name</span><span class='Delimiter'>, </span><a href="zic.c.html#LN49"><span class='Ref_to_Typedef'>lineno_t</span></a> <span class='Declare_Parameter'>num</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <a href="zic.c.html#LN450"><span class='Ref_to_Func'>eats</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN460"><span class='Ref_to_Parameter'>name</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN460"><span class='Ref_to_Parameter'>num</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Keyword'>static void 
</span><a name="LN466"></a><span class='Declare_Function'>verror</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>string</span><span class='Delimiter'>, </span>va_list <span class='Declare_Parameter'>args</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Comment_Multi_Line'>/* 
     * Match the format of "cc" to allow sh users to  zic ... 2&GT;&1 | error -t 
     * "*" -v on BSD systems. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../bin/pg_test_fsync/pg_test_fsync.c.html#LN67"><span class='Ref_to_Global_Var'>filename</span></a><span class='Parentheses'>) 
</span>        <a href="../../contrib/seg/segscan.l.html#LN10"><span class='Ref_to_Macro'>fprintf</span></a><span class='Parentheses'>(</span>stderr<span class='Delimiter'>, </span>_<span class='Parentheses'>(</span><span class='String'>"\"%s\", line %"</span> <a href="zic.c.html#LN50"><span class='Ref_to_Const'>PRIdLINENO</span></a> <span class='String'>": "</span><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="../bin/pg_test_fsync/pg_test_fsync.c.html#LN67"><span class='Ref_to_Global_Var'>filename</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN170"><span class='Ref_to_Global_Var'>linenum</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../include/port.h.html#LN171"><span class='Ref_to_Macro'>vfprintf</span></a><span class='Parentheses'>(</span>stderr<span class='Delimiter'>, </span><a href="zic.c.html#LN466"><span class='Ref_to_Parameter'>string</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN466"><span class='Ref_to_Parameter'>args</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN178"><span class='Ref_to_Global_Var'>rfilename</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <a href="../../contrib/seg/segscan.l.html#LN10"><span class='Ref_to_Macro'>fprintf</span></a><span class='Parentheses'>(</span>stderr<span class='Delimiter'>, </span>_<span class='Parentheses'>(</span><span class='String'>" (rule from \"%s\", line %"</span> <a href="zic.c.html#LN50"><span class='Ref_to_Const'>PRIdLINENO</span></a> <span class='String'>")"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                <a href="zic.c.html#LN178"><span class='Ref_to_Global_Var'>rfilename</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN179"><span class='Ref_to_Global_Var'>rlinenum</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../contrib/seg/segscan.l.html#LN10"><span class='Ref_to_Macro'>fprintf</span></a><span class='Parentheses'>(</span>stderr<span class='Delimiter'>, </span><span class='String'>"\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Keyword'>static void 
</span><a name="LN482"></a><span class='Declare_Function'>error</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>string</span><span class='Delimiter'>,</span><span class='Operator'>...</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN484"></a>    va_list     <span class='Declare_Local'>args</span><span class='Delimiter'>; 
</span> 
    <a href="../pl/plperl/ppport.h.html#LN5587"><span class='Ref_to_Proto'>va_start</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN484"><span class='Ref_To_Local'>args</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN482"><span class='Ref_to_Parameter'>string</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN465"><span class='Ref_to_Func'>verror</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN482"><span class='Ref_to_Parameter'>string</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN484"><span class='Ref_To_Local'>args</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../pl/plperl/ppport.h.html#LN5589"><span class='Ref_to_Proto'>va_end</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN484"><span class='Ref_To_Local'>args</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN163"><span class='Ref_to_Global_Var'>errors</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
} 
</span> 
<span class='Keyword'>static void 
</span><a name="LN493"></a><span class='Declare_Function'>warning</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>string</span><span class='Delimiter'>,</span><span class='Operator'>...</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN495"></a>    va_list     <span class='Declare_Local'>args</span><span class='Delimiter'>; 
</span> 
    <a href="../../contrib/seg/segscan.l.html#LN10"><span class='Ref_to_Macro'>fprintf</span></a><span class='Parentheses'>(</span>stderr<span class='Delimiter'>, </span>_<span class='Parentheses'>(</span><span class='String'>"warning: "</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../pl/plperl/ppport.h.html#LN5587"><span class='Ref_to_Proto'>va_start</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN495"><span class='Ref_To_Local'>args</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN493"><span class='Ref_to_Parameter'>string</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN465"><span class='Ref_to_Func'>verror</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN493"><span class='Ref_to_Parameter'>string</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN495"><span class='Ref_To_Local'>args</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../pl/plperl/ppport.h.html#LN5589"><span class='Ref_to_Proto'>va_end</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN495"><span class='Ref_To_Local'>args</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN164"><span class='Ref_to_Global_Var'>warnings</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
} 
</span> 
<span class='Keyword'>static void 
</span><a name="LN505"></a><span class='Declare_Function'>close_file</span><span class='Parentheses'>(</span>FILE <span class='Operator'>*</span><span class='Declare_Parameter'>stream</span><span class='Delimiter'>, </span><span class='Keyword'>char const </span><span class='Operator'>* </span><span class='Declare_Parameter'>dir</span><span class='Delimiter'>, </span><span class='Keyword'>char const </span><span class='Operator'>* </span><span class='Declare_Parameter'>name</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN507"></a>    <span class='Keyword'>char const </span><span class='Operator'>*</span><span class='Declare_Local'>e</span> <span class='Operator'>= </span><span class='Parentheses'>(</span>ferror<span class='Parentheses'>(</span><a href="zic.c.html#LN505"><span class='Ref_to_Parameter'>stream</span></a><span class='Parentheses'>) </span><span class='Operator'>? </span>_<span class='Parentheses'>(</span><span class='String'>"I/O error"</span><span class='Parentheses'>) 
</span>                     <span class='Operator'>: </span>fclose<span class='Parentheses'>(</span><a href="zic.c.html#LN505"><span class='Ref_to_Parameter'>stream</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span> <span class='Operator'>? </span><a href="../port/strerror.c.html#LN17"><span class='Ref_to_Func'>strerror</span></a><span class='Parentheses'>(</span>errno<span class='Parentheses'>) </span><span class='Operator'>: </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN507"><span class='Ref_To_Local'>e</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../contrib/seg/segscan.l.html#LN10"><span class='Ref_to_Macro'>fprintf</span></a><span class='Parentheses'>(</span>stderr<span class='Delimiter'>, </span><span class='String'>"%s: %s%s%s%s%s\n"</span><span class='Delimiter'>, </span><a href="../bin/pg_test_timing/pg_test_timing.c.html#LN11"><span class='Ref_to_Global_Var'>progname</span></a><span class='Delimiter'>, 
</span>                <a href="zic.c.html#LN505"><span class='Ref_to_Parameter'>dir</span></a> <span class='Operator'>? </span><a href="zic.c.html#LN505"><span class='Ref_to_Parameter'>dir</span></a> <span class='Operator'>: </span><span class='String'>""</span><span class='Delimiter'>, </span><a href="zic.c.html#LN505"><span class='Ref_to_Parameter'>dir</span></a> <span class='Operator'>? </span><span class='String'>"/"</span> <span class='Operator'>: </span><span class='String'>""</span><span class='Delimiter'>, 
</span>                <a href="zic.c.html#LN505"><span class='Ref_to_Parameter'>name</span></a> <span class='Operator'>? </span><a href="zic.c.html#LN505"><span class='Ref_to_Parameter'>name</span></a> <span class='Operator'>: </span><span class='String'>""</span><span class='Delimiter'>, </span><a href="zic.c.html#LN505"><span class='Ref_to_Parameter'>name</span></a> <span class='Operator'>? </span><span class='String'>": "</span> <span class='Operator'>: </span><span class='String'>""</span><span class='Delimiter'>, 
</span>                <a href="zic.c.html#LN507"><span class='Ref_To_Local'>e</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../test/isolation/specscanner.l.html#LN91"><span class='Ref_to_Proto'>exit</span></a><span class='Parentheses'>(</span><a href="../bin/psql/settings.h.html#LN150"><span class='Ref_to_Const'>EXIT_FAILURE</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
} 
</span> 
<span class='Keyword'>static void 
</span><a name="LN521"></a><span class='Declare_Function'>usage</span><span class='Parentheses'>(</span>FILE <span class='Operator'>*</span><span class='Declare_Parameter'>stream</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>status</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <a href="../../contrib/seg/segscan.l.html#LN10"><span class='Ref_to_Macro'>fprintf</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN521"><span class='Ref_to_Parameter'>stream</span></a><span class='Delimiter'>, 
</span>            _<span class='Parentheses'>(</span><span class='String'>"%s: usage is %s [ --version ] [ --help ] [ -v ] [ -P ] \\\n"</span> 
              <span class='String'>"\t[ -l localtime ] [ -p posixrules ] [ -d directory ] \\\n"</span> 
              <span class='String'>"\t[ -L leapseconds ] [ filename ... ]\n\n"</span> 
              <span class='String'>"Report bugs to %s.\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>            <a href="../bin/pg_test_timing/pg_test_timing.c.html#LN11"><span class='Ref_to_Global_Var'>progname</span></a><span class='Delimiter'>, </span><a href="../bin/pg_test_timing/pg_test_timing.c.html#LN11"><span class='Ref_to_Global_Var'>progname</span></a><span class='Delimiter'>, </span>PACKAGE_BUGREPORT<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN521"><span class='Ref_to_Parameter'>status</span></a> <span class='Operator'>== </span><a href="../bin/psql/settings.h.html#LN146"><span class='Ref_to_Const'>EXIT_SUCCESS</span></a><span class='Parentheses'>) 
</span>        <a href="zic.c.html#LN504"><span class='Ref_to_Func'>close_file</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN521"><span class='Ref_to_Parameter'>stream</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../test/isolation/specscanner.l.html#LN91"><span class='Ref_to_Proto'>exit</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN521"><span class='Ref_to_Parameter'>status</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* Change the working directory to DIR, possibly creating DIR and its 
   ancestors.  After this is done, all files are accessed with names 
   relative to DIR.  */ 
</span><span class='Keyword'>static void 
</span><a name="LN538"></a><span class='Declare_Function'>change_directory</span><span class='Parentheses'>(</span><span class='Keyword'>char const </span><span class='Operator'>* </span><span class='Declare_Parameter'>dir</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span>chdir<span class='Parentheses'>(</span><a href="zic.c.html#LN538"><span class='Ref_to_Parameter'>dir</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span><a name="LN542"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>chdir_errno</span> <span class='Operator'>= </span>errno<span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN542"><span class='Ref_To_Local'>chdir_errno</span></a> <span class='Operator'>== </span>ENOENT<span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="zic.c.html#LN3615"><span class='Ref_to_Func'>mkdirs</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN538"><span class='Ref_to_Parameter'>dir</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="zic.c.html#LN542"><span class='Ref_To_Local'>chdir_errno</span></a> <span class='Operator'>= </span>chdir<span class='Parentheses'>(</span><a href="zic.c.html#LN538"><span class='Ref_to_Parameter'>dir</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span> <span class='Operator'>? </span><span class='Number'>0</span> <span class='Operator'>: </span>errno<span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN542"><span class='Ref_To_Local'>chdir_errno</span></a> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="../../contrib/seg/segscan.l.html#LN10"><span class='Ref_to_Macro'>fprintf</span></a><span class='Parentheses'>(</span>stderr<span class='Delimiter'>, </span>_<span class='Parentheses'>(</span><span class='String'>"%s: Can't chdir to %s: %s\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                    <a href="../bin/pg_test_timing/pg_test_timing.c.html#LN11"><span class='Ref_to_Global_Var'>progname</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN538"><span class='Ref_to_Parameter'>dir</span></a><span class='Delimiter'>, </span><a href="../port/strerror.c.html#LN17"><span class='Ref_to_Func'>strerror</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN542"><span class='Ref_To_Local'>chdir_errno</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="../test/isolation/specscanner.l.html#LN91"><span class='Ref_to_Proto'>exit</span></a><span class='Parentheses'>(</span><a href="../bin/psql/settings.h.html#LN150"><span class='Ref_to_Const'>EXIT_FAILURE</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
}</span><span class='Auto_Annotations'> &laquo; end change_directory &raquo; </span> 
 
<a name="LN558"></a><span class='Keyword'>static const char </span><span class='Operator'>*</span><span class='Declare_Var'>psxrules</span><span class='Delimiter'>; 
</span><a name="LN559"></a><span class='Keyword'>static const char </span><span class='Operator'>*</span><span class='Declare_Var'>lcltime</span><span class='Delimiter'>; 
</span><a name="LN560"></a><span class='Keyword'>static const char </span><span class='Operator'>*</span><span class='Declare_Var'>directory</span><span class='Delimiter'>; 
</span><a name="LN561"></a><span class='Keyword'>static const char </span><span class='Operator'>*</span><span class='Declare_Var'>leapsec</span><span class='Delimiter'>; 
</span><a name="LN562"></a><span class='Keyword'>static const char </span><span class='Operator'>*</span><span class='Declare_Var'>yitcommand</span><span class='Delimiter'>; 
</span> 
<span class='Keyword'>int 
</span><a name="LN565"></a><span class='Declare_Function'>main</span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Declare_Parameter'>argc</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>argv</span><span class='Delimiter'>[]</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN567"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>c</span><span class='Delimiter'>, 
</span><a name="LN568"></a>                <span class='Declare_Local'>k</span><span class='Delimiter'>; 
</span><a name="LN569"></a>    ptrdiff_t   <span class='Declare_Local'>i</span><span class='Delimiter'>, 
</span><a name="LN570"></a>                <span class='Declare_Local'>j</span><span class='Delimiter'>; 
</span> 
<span class='Directive'>#ifndef</span> <a href="../include/c.h.html#LN61"><span class='Ref_to_Const'>WIN32</span></a> 
    umask<span class='Parentheses'>(</span>umask<span class='Parentheses'>(</span><a href="../include/port/win32.h.html#LN448"><span class='Ref_to_Const'>S_IWGRP</span></a> <span class='Operator'>| </span><a href="../include/port/win32.h.html#LN452"><span class='Ref_to_Const'>S_IWOTH</span></a><span class='Parentheses'>) </span><span class='Operator'>| </span><span class='Parentheses'>(</span><a href="../include/port/win32.h.html#LN448"><span class='Ref_to_Const'>S_IWGRP</span></a> <span class='Operator'>| </span><a href="../include/port/win32.h.html#LN452"><span class='Ref_to_Const'>S_IWOTH</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span><span class='Directive'>#endif</span>   <span class='Comment_Single_Line'>/* !WIN32 */ 
</span>    <a href="../bin/pg_test_timing/pg_test_timing.c.html#LN11"><span class='Ref_to_Global_Var'>progname</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN565"><span class='Ref_to_Parameter'>argv</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="private.h.html#LN69"><span class='Ref_to_Macro'>TYPE_BIT</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a><span class='Parentheses'>) </span><span class='Operator'>&LT;</span><span class='Number'>64</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../../contrib/seg/segscan.l.html#LN10"><span class='Ref_to_Macro'>fprintf</span></a><span class='Parentheses'>(</span>stderr<span class='Delimiter'>, </span><span class='String'>"%s: %s\n"</span><span class='Delimiter'>, </span><a href="../bin/pg_test_timing/pg_test_timing.c.html#LN11"><span class='Ref_to_Global_Var'>progname</span></a><span class='Delimiter'>, 
</span>                _<span class='Parentheses'>(</span><span class='String'>"wild compilation-time specification of zic_t"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <a href="../bin/psql/settings.h.html#LN150"><span class='Ref_to_Const'>EXIT_FAILURE</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN568"><span class='Ref_To_Local'>k</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; </span><a href="zic.c.html#LN568"><span class='Ref_To_Local'>k</span></a> <span class='Operator'>&LT; </span><a href="zic.c.html#LN565"><span class='Ref_to_Parameter'>argc</span></a><span class='Delimiter'>; </span><a href="zic.c.html#LN568"><span class='Ref_To_Local'>k</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="zic.c.html#LN565"><span class='Ref_to_Parameter'>argv</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN568"><span class='Ref_To_Local'>k</span></a><span class='Delimiter'>], </span><span class='String'>"--version"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <span class='Delimiter'>{ 
</span>            <a href="../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span><span class='String'>"zic %s\n"</span><span class='Delimiter'>, </span>PG_VERSION<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="zic.c.html#LN504"><span class='Ref_to_Func'>close_file</span></a><span class='Parentheses'>(</span>stdout<span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>return</span> <a href="../bin/psql/settings.h.html#LN146"><span class='Ref_to_Const'>EXIT_SUCCESS</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="zic.c.html#LN565"><span class='Ref_to_Parameter'>argv</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN568"><span class='Ref_To_Local'>k</span></a><span class='Delimiter'>], </span><span class='String'>"--help"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <span class='Delimiter'>{ 
</span>            <a href="../bin/psql/help.h.html#LN10"><span class='Ref_to_Proto'>usage</span></a><span class='Parentheses'>(</span>stdout<span class='Delimiter'>, </span><a href="../bin/psql/settings.h.html#LN146"><span class='Ref_to_Const'>EXIT_SUCCESS</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Control'>while</span> <span class='Parentheses'>((</span><a href="zic.c.html#LN567"><span class='Ref_To_Local'>c</span></a> <span class='Operator'>= </span><a href="../include/pg_getopt.h.html#LN42"><span class='Ref_to_Proto'>getopt</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN565"><span class='Ref_to_Parameter'>argc</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN565"><span class='Ref_to_Parameter'>argv</span></a><span class='Delimiter'>, </span><span class='String'>"d:l:p:L:vPsy:"</span><span class='Parentheses'>))</span> <span class='Operator'>!= </span>EOF <span class='Operator'>&& </span><a href="zic.c.html#LN567"><span class='Ref_To_Local'>c</span></a> <span class='Operator'>!= -</span><span class='Number'>1</span><span class='Parentheses'>)</span> 
        <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN567"><span class='Ref_To_Local'>c</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>default</span><span class='Operator'>: 
</span>                <a href="../bin/psql/help.h.html#LN10"><span class='Ref_to_Proto'>usage</span></a><span class='Parentheses'>(</span>stderr<span class='Delimiter'>, </span><a href="../bin/psql/settings.h.html#LN150"><span class='Ref_to_Const'>EXIT_FAILURE</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <span class='String'>'d'</span><span class='Operator'>: 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN560"><span class='Ref_to_Global_Var'>directory</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>                    <a href="zic.c.html#LN560"><span class='Ref_to_Global_Var'>directory</span></a> <span class='Operator'>= </span>strdup<span class='Parentheses'>(</span><a href="../port/getopt.c.html#LN52"><span class='Ref_to_Global_Var'>optarg</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>else</span> 
                <span class='Delimiter'>{ 
</span>                    <a href="../../contrib/seg/segscan.l.html#LN10"><span class='Ref_to_Macro'>fprintf</span></a><span class='Parentheses'>(</span>stderr<span class='Delimiter'>, 
</span>                            _<span class='Parentheses'>(</span><span class='String'>"%s: More than one -d option specified\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                            <a href="../bin/pg_test_timing/pg_test_timing.c.html#LN11"><span class='Ref_to_Global_Var'>progname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>return</span> <a href="../bin/psql/settings.h.html#LN150"><span class='Ref_to_Const'>EXIT_FAILURE</span></a><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <span class='String'>'l'</span><span class='Operator'>: 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN559"><span class='Ref_to_Global_Var'>lcltime</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>                    <a href="zic.c.html#LN559"><span class='Ref_to_Global_Var'>lcltime</span></a> <span class='Operator'>= </span>strdup<span class='Parentheses'>(</span><a href="../port/getopt.c.html#LN52"><span class='Ref_to_Global_Var'>optarg</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>else</span> 
                <span class='Delimiter'>{ 
</span>                    <a href="../../contrib/seg/segscan.l.html#LN10"><span class='Ref_to_Macro'>fprintf</span></a><span class='Parentheses'>(</span>stderr<span class='Delimiter'>, 
</span>                            _<span class='Parentheses'>(</span><span class='String'>"%s: More than one -l option specified\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                            <a href="../bin/pg_test_timing/pg_test_timing.c.html#LN11"><span class='Ref_to_Global_Var'>progname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>return</span> <a href="../bin/psql/settings.h.html#LN150"><span class='Ref_to_Const'>EXIT_FAILURE</span></a><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <span class='String'>'p'</span><span class='Operator'>: 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN558"><span class='Ref_to_Global_Var'>psxrules</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>                    <a href="zic.c.html#LN558"><span class='Ref_to_Global_Var'>psxrules</span></a> <span class='Operator'>= </span>strdup<span class='Parentheses'>(</span><a href="../port/getopt.c.html#LN52"><span class='Ref_to_Global_Var'>optarg</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>else</span> 
                <span class='Delimiter'>{ 
</span>                    <a href="../../contrib/seg/segscan.l.html#LN10"><span class='Ref_to_Macro'>fprintf</span></a><span class='Parentheses'>(</span>stderr<span class='Delimiter'>, 
</span>                            _<span class='Parentheses'>(</span><span class='String'>"%s: More than one -p option specified\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                            <a href="../bin/pg_test_timing/pg_test_timing.c.html#LN11"><span class='Ref_to_Global_Var'>progname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>return</span> <a href="../bin/psql/settings.h.html#LN150"><span class='Ref_to_Const'>EXIT_FAILURE</span></a><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <span class='String'>'y'</span><span class='Operator'>: 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN562"><span class='Ref_to_Global_Var'>yitcommand</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>                    <a href="zic.c.html#LN562"><span class='Ref_to_Global_Var'>yitcommand</span></a> <span class='Operator'>= </span>strdup<span class='Parentheses'>(</span><a href="../port/getopt.c.html#LN52"><span class='Ref_to_Global_Var'>optarg</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>else</span> 
                <span class='Delimiter'>{ 
</span>                    <a href="../../contrib/seg/segscan.l.html#LN10"><span class='Ref_to_Macro'>fprintf</span></a><span class='Parentheses'>(</span>stderr<span class='Delimiter'>, 
</span>                            _<span class='Parentheses'>(</span><span class='String'>"%s: More than one -y option specified\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                            <a href="../bin/pg_test_timing/pg_test_timing.c.html#LN11"><span class='Ref_to_Global_Var'>progname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>return</span> <a href="../bin/psql/settings.h.html#LN150"><span class='Ref_to_Const'>EXIT_FAILURE</span></a><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <span class='String'>'L'</span><span class='Operator'>: 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN561"><span class='Ref_to_Global_Var'>leapsec</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>                    <a href="zic.c.html#LN561"><span class='Ref_to_Global_Var'>leapsec</span></a> <span class='Operator'>= </span>strdup<span class='Parentheses'>(</span><a href="../port/getopt.c.html#LN52"><span class='Ref_to_Global_Var'>optarg</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>else</span> 
                <span class='Delimiter'>{ 
</span>                    <a href="../../contrib/seg/segscan.l.html#LN10"><span class='Ref_to_Macro'>fprintf</span></a><span class='Parentheses'>(</span>stderr<span class='Delimiter'>, 
</span>                            _<span class='Parentheses'>(</span><span class='String'>"%s: More than one -L option specified\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                            <a href="../bin/pg_test_timing/pg_test_timing.c.html#LN11"><span class='Ref_to_Global_Var'>progname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>return</span> <a href="../bin/psql/settings.h.html#LN150"><span class='Ref_to_Const'>EXIT_FAILURE</span></a><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <span class='String'>'v'</span><span class='Operator'>: 
</span>                <a href="zic.c.html#LN175"><span class='Ref_to_Global_Var'>noise</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <span class='String'>'P'</span><span class='Operator'>: 
</span>                <a href="zic.c.html#LN176"><span class='Ref_to_Global_Var'>print_abbrevs</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>                <a href="zic.c.html#LN177"><span class='Ref_to_Global_Var'>print_cutoff</span></a> <span class='Operator'>= </span>time<span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <span class='String'>'s'</span><span class='Operator'>: 
</span>                <a href="zic.c.html#LN492"><span class='Ref_to_Func'>warning</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"-s ignored"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch c &raquo; </span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../port/getopt.c.html#LN50"><span class='Ref_to_Global_Var'>optind</span></a> <span class='Operator'>== </span><a href="zic.c.html#LN565"><span class='Ref_to_Parameter'>argc</span></a> <span class='Operator'>- </span><span class='Number'>1</span> <span class='Operator'>&& </span>strcmp<span class='Parentheses'>(</span><a href="zic.c.html#LN565"><span class='Ref_to_Parameter'>argv</span></a><span class='Delimiter'>[</span><a href="../port/getopt.c.html#LN50"><span class='Ref_to_Global_Var'>optind</span></a><span class='Delimiter'>], </span><span class='String'>"="</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <a href="../bin/psql/help.h.html#LN10"><span class='Ref_to_Proto'>usage</span></a><span class='Parentheses'>(</span>stderr<span class='Delimiter'>, </span><a href="../bin/psql/settings.h.html#LN150"><span class='Ref_to_Const'>EXIT_FAILURE</span></a><span class='Parentheses'>)</span><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* usage message by request */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN560"><span class='Ref_to_Global_Var'>directory</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <a href="zic.c.html#LN560"><span class='Ref_to_Global_Var'>directory</span></a> <span class='Operator'>= </span><span class='String'>"data"</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN562"><span class='Ref_to_Global_Var'>yitcommand</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <a href="zic.c.html#LN562"><span class='Ref_to_Global_Var'>yitcommand</span></a> <span class='Operator'>= </span><span class='String'>"yearistype"</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../port/getopt.c.html#LN50"><span class='Ref_to_Global_Var'>optind</span></a> <span class='Operator'>&LT; </span><a href="zic.c.html#LN565"><span class='Ref_to_Parameter'>argc</span></a> <span class='Operator'>&& </span><a href="zic.c.html#LN561"><span class='Ref_to_Global_Var'>leapsec</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="zic.c.html#LN1148"><span class='Ref_to_Func'>infile</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN561"><span class='Ref_to_Global_Var'>leapsec</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN3129"><span class='Ref_to_Func'>adjleap</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN568"><span class='Ref_To_Local'>k</span></a> <span class='Operator'>= </span><a href="../port/getopt.c.html#LN50"><span class='Ref_to_Global_Var'>optind</span></a><span class='Delimiter'>; </span><a href="zic.c.html#LN568"><span class='Ref_To_Local'>k</span></a> <span class='Operator'>&LT; </span><a href="zic.c.html#LN565"><span class='Ref_to_Parameter'>argc</span></a><span class='Delimiter'>; </span><a href="zic.c.html#LN568"><span class='Ref_To_Local'>k</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>        <a href="zic.c.html#LN1148"><span class='Ref_to_Func'>infile</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN565"><span class='Ref_to_Parameter'>argv</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN568"><span class='Ref_To_Local'>k</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN163"><span class='Ref_to_Global_Var'>errors</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <a href="../bin/psql/settings.h.html#LN150"><span class='Ref_to_Const'>EXIT_FAILURE</span></a><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN1062"><span class='Ref_to_Func'>associate</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN537"><span class='Ref_to_Func'>change_directory</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN560"><span class='Ref_to_Global_Var'>directory</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN569"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="zic.c.html#LN569"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="zic.c.html#LN271"><span class='Ref_to_Global_Var'>nzones</span></a><span class='Delimiter'>; </span><a href="zic.c.html#LN569"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN570"><span class='Ref_To_Local'>j</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * Find the next non-continuation zone entry. 
         */ 
</span>        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN570"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN569"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>; </span><a href="zic.c.html#LN570"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>&LT; </span><a href="zic.c.html#LN271"><span class='Ref_to_Global_Var'>nzones</span></a> <span class='Operator'>&& </span><a href="zic.c.html#LN270"><span class='Ref_to_Global_Var'>zones</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN570"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="zic.c.html#LN94"><span class='Ref_to_Member'>z_name</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; </span><span class='Operator'>++</span><a href="zic.c.html#LN570"><span class='Ref_To_Local'>j</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>continue</span><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN2645"><span class='Ref_to_Func'>outzone</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="zic.c.html#LN270"><span class='Ref_to_Global_Var'>zones</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN569"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>], </span><a href="zic.c.html#LN570"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>- </span><a href="zic.c.html#LN569"><span class='Ref_To_Local'>i</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Make links. 
     */ 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN569"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="zic.c.html#LN569"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="zic.c.html#LN283"><span class='Ref_to_Global_Var'>nlinks</span></a><span class='Delimiter'>; </span><span class='Operator'>++</span><a href="zic.c.html#LN569"><span class='Ref_To_Local'>i</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="zic.c.html#LN459"><span class='Ref_to_Func'>eat</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN282"><span class='Ref_to_Global_Var'>links</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN569"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="zic.c.html#LN276"><span class='Ref_to_Member'>l_filename</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN282"><span class='Ref_to_Global_Var'>links</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN569"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="zic.c.html#LN277"><span class='Ref_to_Member'>l_linenum</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN866"><span class='Ref_to_Func'>dolink</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN282"><span class='Ref_to_Global_Var'>links</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN569"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="zic.c.html#LN278"><span class='Ref_to_Member'>l_from</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN282"><span class='Ref_to_Global_Var'>links</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN569"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="zic.c.html#LN279"><span class='Ref_to_Member'>l_to</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN175"><span class='Ref_to_Global_Var'>noise</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN570"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="zic.c.html#LN570"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>&LT; </span><a href="zic.c.html#LN283"><span class='Ref_to_Global_Var'>nlinks</span></a><span class='Delimiter'>; </span><span class='Operator'>++</span><a href="zic.c.html#LN570"><span class='Ref_To_Local'>j</span></a><span class='Parentheses'>) 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="zic.c.html#LN282"><span class='Ref_to_Global_Var'>links</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN569"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="zic.c.html#LN279"><span class='Ref_to_Member'>l_to</span></a><span class='Delimiter'>, 
</span>                           <a href="zic.c.html#LN282"><span class='Ref_to_Global_Var'>links</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN570"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="zic.c.html#LN278"><span class='Ref_to_Member'>l_from</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
                    <a href="zic.c.html#LN492"><span class='Ref_to_Func'>warning</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"link to link"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN559"><span class='Ref_to_Global_Var'>lcltime</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="zic.c.html#LN459"><span class='Ref_to_Func'>eat</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"command line"</span><span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN866"><span class='Ref_to_Func'>dolink</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN559"><span class='Ref_to_Global_Var'>lcltime</span></a><span class='Delimiter'>, </span><a href="tzfile.h.html#LN23"><span class='Ref_to_Const'>TZDEFAULT</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN558"><span class='Ref_to_Global_Var'>psxrules</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="zic.c.html#LN459"><span class='Ref_to_Func'>eat</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"command line"</span><span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN866"><span class='Ref_to_Func'>dolink</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN558"><span class='Ref_to_Global_Var'>psxrules</span></a><span class='Delimiter'>, </span><a href="tzfile.h.html#LN24"><span class='Ref_to_Const'>TZDEFRULES</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN164"><span class='Ref_to_Global_Var'>warnings</span></a> <span class='Operator'>&& </span><span class='Parentheses'>(</span>ferror<span class='Parentheses'>(</span>stderr<span class='Parentheses'>) </span><span class='Operator'>|| </span>fclose<span class='Parentheses'>(</span>stderr<span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>))</span> 
        <span class='Control'>return</span> <a href="../bin/psql/settings.h.html#LN150"><span class='Ref_to_Const'>EXIT_FAILURE</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="zic.c.html#LN163"><span class='Ref_to_Global_Var'>errors</span></a> <span class='Operator'>? </span><a href="../bin/psql/settings.h.html#LN150"><span class='Ref_to_Const'>EXIT_FAILURE</span></a> <span class='Operator'>: </span><a href="../bin/psql/settings.h.html#LN146"><span class='Ref_to_Const'>EXIT_SUCCESS</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end main &raquo; </span> 
 
<span class='Keyword'>static bool 
</span><a name="LN722"></a><span class='Declare_Function'>componentcheck</span><span class='Parentheses'>(</span><span class='Keyword'>char const </span><span class='Operator'>* </span><span class='Declare_Parameter'>name</span><span class='Delimiter'>, </span><span class='Keyword'>char const </span><span class='Operator'>* </span><span class='Declare_Parameter'>component</span><span class='Delimiter'>, 
</span><a name="LN723"></a>               <span class='Keyword'>char const </span><span class='Operator'>* </span><span class='Declare_Parameter'>component_end</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>enum</span> 
    <span class='Delimiter'>{ 
</span><a name="LN727"></a>    <span class='Declare_Local'>component_len_max</span> <span class='Operator'>= </span><span class='Number'>14</span><span class='Delimiter'>}; 
</span><a name="LN728"></a>    ptrdiff_t   <span class='Declare_Local'>component_len</span> <span class='Operator'>= </span><a href="zic.c.html#LN723"><span class='Ref_to_Parameter'>component_end</span></a> <span class='Operator'>- </span><a href="zic.c.html#LN722"><span class='Ref_to_Parameter'>component</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN728"><span class='Ref_To_Local'>component_len</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!*</span><a href="zic.c.html#LN722"><span class='Ref_to_Parameter'>name</span></a><span class='Parentheses'>) 
</span>            <a href="../interfaces/ecpg/test/expected/sql-dyntest.c.html#LN145"><span class='Ref_to_Func'>error</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"empty file name"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <a href="../interfaces/ecpg/test/expected/sql-dyntest.c.html#LN145"><span class='Ref_to_Func'>error</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><a href="zic.c.html#LN722"><span class='Ref_to_Parameter'>component</span></a> <span class='Operator'>== </span><a href="zic.c.html#LN722"><span class='Ref_to_Parameter'>name</span></a> 
                    <span class='Operator'>? </span><span class='String'>"file name '%s' begins with '/'"</span> 
                    <span class='Operator'>: *</span><a href="zic.c.html#LN723"><span class='Ref_to_Parameter'>component_end</span></a> 
                    <span class='Operator'>? </span><span class='String'>"file name '%s' contains '//'"</span> 
                    <span class='Operator'>: </span><span class='String'>"file name '%s' ends with '/'"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                  <a href="zic.c.html#LN722"><span class='Ref_to_Parameter'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Number'>0</span> <span class='Operator'>&LT; </span><a href="zic.c.html#LN728"><span class='Ref_To_Local'>component_len</span></a> <span class='Operator'>&& </span><a href="zic.c.html#LN728"><span class='Ref_To_Local'>component_len</span></a> <span class='Operator'>&LT;= </span><span class='Number'>2</span> 
        <span class='Operator'>&& </span><a href="zic.c.html#LN722"><span class='Ref_to_Parameter'>component</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='String'>'.'</span> <span class='Operator'>&& </span><a href="zic.c.html#LN723"><span class='Ref_to_Parameter'>component_end</span></a><span class='Delimiter'>[</span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='String'>'.'</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN746"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>len</span> <span class='Operator'>= </span><a href="zic.c.html#LN728"><span class='Ref_To_Local'>component_len</span></a><span class='Delimiter'>; 
</span> 
        <a href="../interfaces/ecpg/test/expected/sql-dyntest.c.html#LN145"><span class='Ref_to_Func'>error</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"file name '%s' contains '%.*s' component"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>              <a href="zic.c.html#LN722"><span class='Ref_to_Parameter'>name</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN746"><span class='Ref_To_Local'>len</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN722"><span class='Ref_to_Parameter'>component</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN175"><span class='Ref_to_Global_Var'>noise</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Number'>0</span> <span class='Operator'>&LT; </span><a href="zic.c.html#LN728"><span class='Ref_To_Local'>component_len</span></a> <span class='Operator'>&& </span><a href="zic.c.html#LN722"><span class='Ref_to_Parameter'>component</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='String'>'-'</span><span class='Parentheses'>) 
</span>            <a href="zic.c.html#LN492"><span class='Ref_to_Func'>warning</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"file name '%s' component contains leading '-'"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                    <a href="zic.c.html#LN722"><span class='Ref_to_Parameter'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN727"><span class='Ref_to_EnumConst'>component_len_max</span></a> <span class='Operator'>&LT; </span><a href="zic.c.html#LN728"><span class='Ref_To_Local'>component_len</span></a><span class='Parentheses'>) 
</span>            <a href="zic.c.html#LN492"><span class='Ref_to_Func'>warning</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"file name '%s' contains overlength component"</span> 
                      <span class='String'>" '%.*s...'"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                    <a href="zic.c.html#LN722"><span class='Ref_to_Parameter'>name</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN727"><span class='Ref_to_EnumConst'>component_len_max</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN722"><span class='Ref_to_Parameter'>component</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>return</span> <span class='Boolean'>true</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end componentcheck &raquo; </span> 
 
<span class='Keyword'>static bool 
</span><a name="LN766"></a><span class='Declare_Function'>namecheck</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>name</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN768"></a>    <span class='Keyword'>char const </span><span class='Operator'>*</span><span class='Declare_Local'>cp</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Benign characters in a portable file name.  */ 
</span><a name="LN771"></a>    <span class='Keyword'>static char const </span><span class='Declare_Local'>benign</span><span class='Delimiter'>[] </span><span class='Operator'>= 
</span>    <span class='String'>"-/_"</span> 
    <span class='String'>"abcdefghijklmnopqrstuvwxyz"</span> 
    <span class='String'>"ABCDEFGHIJKLMNOPQRSTUVWXYZ"</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Non-control chars in the POSIX portable character set, excluding the 
     * benign characters. 
     */ 
</span><a name="LN780"></a>    <span class='Keyword'>static char const </span><span class='Declare_Local'>printable_and_not_benign</span><span class='Delimiter'>[] </span><span class='Operator'>= 
</span>    <span class='String'>" !\"#$%&'()*+,.0123456789:;&LT;=&GT;?@[\\]^`{|}~"</span><span class='Delimiter'>; 
</span> 
<a name="LN783"></a>    <span class='Keyword'>char const </span><span class='Operator'>*</span><span class='Declare_Local'>component</span> <span class='Operator'>= </span><a href="zic.c.html#LN766"><span class='Ref_to_Parameter'>name</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN768"><span class='Ref_To_Local'>cp</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN766"><span class='Ref_to_Parameter'>name</span></a><span class='Delimiter'>; </span><span class='Operator'>*</span><a href="zic.c.html#LN768"><span class='Ref_To_Local'>cp</span></a><span class='Delimiter'>; </span><a href="zic.c.html#LN768"><span class='Ref_To_Local'>cp</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN787"></a>        <span class='Keyword'>unsigned char </span><span class='Declare_Local'>c</span> <span class='Operator'>= *</span><a href="zic.c.html#LN768"><span class='Ref_To_Local'>cp</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN175"><span class='Ref_to_Global_Var'>noise</span></a> <span class='Operator'>&& !</span>strchr<span class='Parentheses'>(</span><a href="zic.c.html#LN771"><span class='Ref_To_Local'>benign</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN787"><span class='Ref_To_Local'>c</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span>            <a href="zic.c.html#LN492"><span class='Ref_to_Func'>warning</span></a><span class='Parentheses'>((</span>strchr<span class='Parentheses'>(</span><a href="zic.c.html#LN780"><span class='Ref_To_Local'>printable_and_not_benign</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN787"><span class='Ref_To_Local'>c</span></a><span class='Parentheses'>) 
</span>                     <span class='Operator'>? </span>_<span class='Parentheses'>(</span><span class='String'>"file name '%s' contains byte '%c'"</span><span class='Parentheses'>) 
</span>                     <span class='Operator'>: </span>_<span class='Parentheses'>(</span><span class='String'>"file name '%s' contains byte '\\%o'"</span><span class='Parentheses'>))</span><span class='Delimiter'>, 
</span>                    <a href="zic.c.html#LN766"><span class='Ref_to_Parameter'>name</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN787"><span class='Ref_To_Local'>c</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN787"><span class='Ref_To_Local'>c</span></a> <span class='Operator'>== </span><span class='String'>'/'</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="zic.c.html#LN721"><span class='Ref_to_Func'>componentcheck</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN766"><span class='Ref_to_Parameter'>name</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN783"><span class='Ref_To_Local'>component</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN768"><span class='Ref_To_Local'>cp</span></a><span class='Parentheses'>))</span> 
                <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span>            <a href="zic.c.html#LN783"><span class='Ref_To_Local'>component</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN768"><span class='Ref_To_Local'>cp</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>return</span> <a href="zic.c.html#LN721"><span class='Ref_to_Func'>componentcheck</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN766"><span class='Ref_to_Parameter'>name</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN783"><span class='Ref_To_Local'>component</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN768"><span class='Ref_To_Local'>cp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end namecheck &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Create symlink contents suitable for symlinking FROM to TO, as a 
 * freshly allocated string.  FROM should be a relative file name, and 
 * is relative to the global variable DIRECTORY.  TO can be either 
 * relative or absolute. 
 */ 
</span><span class='Directive'>#ifdef</span> HAVE_SYMLINK 
<span class='Keyword'>static char </span><span class='Operator'>* 
</span><a name="LN814"></a><span class='Declare_Function'>relname</span><span class='Parentheses'>(</span><span class='Keyword'>char const </span><span class='Operator'>* </span><span class='Declare_Parameter'>from</span><span class='Delimiter'>, </span><span class='Keyword'>char const </span><span class='Operator'>* </span><span class='Declare_Parameter'>to</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN816"></a>    size_t      <span class='Declare_Local'>i</span><span class='Delimiter'>, 
</span><a name="LN817"></a>                <span class='Declare_Local'>taillen</span><span class='Delimiter'>, 
</span><a name="LN818"></a>                <span class='Declare_Local'>dotdotetcsize</span><span class='Delimiter'>; 
</span><a name="LN819"></a>    size_t      <span class='Declare_Local'>dir_len</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>, 
</span><a name="LN820"></a>                <span class='Declare_Local'>dotdots</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>, 
</span><a name="LN821"></a>                <span class='Declare_Local'>linksize</span> <span class='Operator'>= </span><a href="private.h.html#LN51"><span class='Ref_to_Const'>SIZE_MAX</span></a><span class='Delimiter'>; 
</span><a name="LN822"></a>    <span class='Keyword'>char const </span><span class='Operator'>*</span><span class='Declare_Local'>f</span> <span class='Operator'>= </span><a href="zic.c.html#LN814"><span class='Ref_to_Parameter'>from</span></a><span class='Delimiter'>; 
</span><a name="LN823"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>result</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="zic.c.html#LN814"><span class='Ref_to_Parameter'>to</span></a> <span class='Operator'>== </span><span class='String'>'/'</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* Make F absolute too.  */ 
</span><a name="LN828"></a>        size_t      <span class='Declare_Local'>len</span> <span class='Operator'>= </span>strlen<span class='Parentheses'>(</span><a href="zic.c.html#LN560"><span class='Ref_to_Global_Var'>directory</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN829"></a>        <span class='Keyword'>bool</span>        <span class='Declare_Local'>needslash</span> <span class='Operator'>= </span><a href="zic.c.html#LN828"><span class='Ref_To_Local'>len</span></a> <span class='Operator'>&& </span><a href="zic.c.html#LN560"><span class='Ref_to_Global_Var'>directory</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN828"><span class='Ref_To_Local'>len</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>] </span><span class='Operator'>!= </span><span class='String'>'/'</span><span class='Delimiter'>; 
</span> 
        <a href="zic.c.html#LN821"><span class='Ref_To_Local'>linksize</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN828"><span class='Ref_To_Local'>len</span></a> <span class='Operator'>+ </span><a href="zic.c.html#LN829"><span class='Ref_To_Local'>needslash</span></a> <span class='Operator'>+ </span>strlen<span class='Parentheses'>(</span><a href="zic.c.html#LN814"><span class='Ref_to_Parameter'>from</span></a><span class='Parentheses'>) </span><span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN822"><span class='Ref_To_Local'>f</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN823"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN412"><span class='Ref_to_Func'>emalloc</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN821"><span class='Ref_To_Local'>linksize</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../contrib/cube/cubeparse.y.html#LN150"><span class='Ref_to_Proto'>strcpy</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN823"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN560"><span class='Ref_to_Global_Var'>directory</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN823"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN828"><span class='Ref_To_Local'>len</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='String'>'/'</span><span class='Delimiter'>; 
</span>        <a href="../../contrib/cube/cubeparse.y.html#LN150"><span class='Ref_to_Proto'>strcpy</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN823"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>+ </span><a href="zic.c.html#LN828"><span class='Ref_To_Local'>len</span></a> <span class='Operator'>+ </span><a href="zic.c.html#LN829"><span class='Ref_To_Local'>needslash</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN814"><span class='Ref_to_Parameter'>from</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN816"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="zic.c.html#LN822"><span class='Ref_To_Local'>f</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN816"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>&& </span><a href="zic.c.html#LN822"><span class='Ref_To_Local'>f</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN816"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>== </span><a href="zic.c.html#LN814"><span class='Ref_to_Parameter'>to</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN816"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; </span><a href="zic.c.html#LN816"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN822"><span class='Ref_To_Local'>f</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN816"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='String'>'/'</span><span class='Parentheses'>) 
</span>            <a href="zic.c.html#LN819"><span class='Ref_To_Local'>dir_len</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN816"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><span class='Delimiter'>; </span><a href="zic.c.html#LN814"><span class='Ref_to_Parameter'>to</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN816"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; </span><a href="zic.c.html#LN816"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>        <a href="zic.c.html#LN820"><span class='Ref_To_Local'>dotdots</span></a> <span class='Operator'>+= </span><a href="zic.c.html#LN814"><span class='Ref_to_Parameter'>to</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN816"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='String'>'/'</span> <span class='Operator'>&& </span><a href="zic.c.html#LN814"><span class='Ref_to_Parameter'>to</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN816"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>] </span><span class='Operator'>!= </span><span class='String'>'/'</span><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN817"><span class='Ref_To_Local'>taillen</span></a> <span class='Operator'>= </span>strlen<span class='Parentheses'>(</span><a href="zic.c.html#LN822"><span class='Ref_To_Local'>f</span></a> <span class='Operator'>+ </span><a href="zic.c.html#LN819"><span class='Ref_To_Local'>dir_len</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN818"><span class='Ref_To_Local'>dotdotetcsize</span></a> <span class='Operator'>= </span><span class='Number'>3</span> <span class='Operator'>* </span><a href="zic.c.html#LN820"><span class='Ref_To_Local'>dotdots</span></a> <span class='Operator'>+ </span><a href="zic.c.html#LN817"><span class='Ref_To_Local'>taillen</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN818"><span class='Ref_To_Local'>dotdotetcsize</span></a> <span class='Operator'>&LT;= </span><a href="zic.c.html#LN821"><span class='Ref_To_Local'>linksize</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="zic.c.html#LN823"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>) 
</span>            <a href="zic.c.html#LN823"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN412"><span class='Ref_to_Func'>emalloc</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN818"><span class='Ref_To_Local'>dotdotetcsize</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN816"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="zic.c.html#LN816"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="zic.c.html#LN820"><span class='Ref_To_Local'>dotdots</span></a><span class='Delimiter'>; </span><a href="zic.c.html#LN816"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>            memcpy<span class='Parentheses'>(</span><a href="zic.c.html#LN823"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>+ </span><span class='Number'>3</span> <span class='Operator'>* </span><a href="zic.c.html#LN816"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><span class='String'>"../"</span><span class='Delimiter'>, </span><span class='Number'>3</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../include/c.h.html#LN1057"><span class='Ref_to_Macro'>memmove</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN823"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>+ </span><span class='Number'>3</span> <span class='Operator'>* </span><a href="zic.c.html#LN820"><span class='Ref_To_Local'>dotdots</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN822"><span class='Ref_To_Local'>f</span></a> <span class='Operator'>+ </span><a href="zic.c.html#LN819"><span class='Ref_To_Local'>dir_len</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN817"><span class='Ref_To_Local'>taillen</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>return</span> <a href="zic.c.html#LN823"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end relname &raquo; </span> 
<span class='Directive'>#endif</span>   <span class='Comment_Single_Line'>/* HAVE_SYMLINK */ 
</span> 
<span class='Comment_Multi_Line'>/* Hard link FROM to TO, following any symbolic links. 
   Return 0 if successful, an error number otherwise.  */ 
</span><span class='Keyword'>static int 
</span><a name="LN859"></a><span class='Declare_Function'>hardlinkerr</span><span class='Parentheses'>(</span><span class='Keyword'>char const </span><span class='Operator'>* </span><span class='Declare_Parameter'>from</span><span class='Delimiter'>, </span><span class='Keyword'>char const </span><span class='Operator'>* </span><span class='Declare_Parameter'>to</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN861"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>r</span> <span class='Operator'>= </span><a href="zic.c.html#LN39"><span class='Ref_to_Macro'>linkat</span></a><span class='Parentheses'>(</span>AT_FDCWD<span class='Delimiter'>, </span><a href="zic.c.html#LN859"><span class='Ref_to_Parameter'>from</span></a><span class='Delimiter'>, </span>AT_FDCWD<span class='Delimiter'>, </span><a href="zic.c.html#LN859"><span class='Ref_to_Parameter'>to</span></a><span class='Delimiter'>, </span>AT_SYMLINK_FOLLOW<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="zic.c.html#LN861"><span class='Ref_To_Local'>r</span></a> <span class='Operator'>== </span><span class='Number'>0</span> <span class='Operator'>? </span><span class='Number'>0</span> <span class='Operator'>: </span>errno<span class='Delimiter'>; 
} 
</span> 
<span class='Keyword'>static void 
</span><a name="LN867"></a><span class='Declare_Function'>dolink</span><span class='Parentheses'>(</span><span class='Keyword'>char const </span><span class='Operator'>* </span><span class='Declare_Parameter'>fromfield</span><span class='Delimiter'>, </span><span class='Keyword'>char const </span><span class='Operator'>* </span><span class='Declare_Parameter'>tofield</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>staysymlink</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN869"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>todirs_made</span> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span><a name="LN870"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>link_errno</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * We get to be careful here since there's a fair chance of root running 
     * us. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN1010"><span class='Ref_to_Func'>itsdir</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN867"><span class='Ref_to_Parameter'>fromfield</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../../contrib/seg/segscan.l.html#LN10"><span class='Ref_to_Macro'>fprintf</span></a><span class='Parentheses'>(</span>stderr<span class='Delimiter'>, </span>_<span class='Parentheses'>(</span><span class='String'>"%s: link from %s/%s failed: %s\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                <a href="../bin/pg_test_timing/pg_test_timing.c.html#LN11"><span class='Ref_to_Global_Var'>progname</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN560"><span class='Ref_to_Global_Var'>directory</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN867"><span class='Ref_to_Parameter'>fromfield</span></a><span class='Delimiter'>, </span><a href="../port/strerror.c.html#LN17"><span class='Ref_to_Func'>strerror</span></a><span class='Parentheses'>(</span>EPERM<span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="../test/isolation/specscanner.l.html#LN91"><span class='Ref_to_Proto'>exit</span></a><span class='Parentheses'>(</span><a href="../bin/psql/settings.h.html#LN150"><span class='Ref_to_Const'>EXIT_FAILURE</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN867"><span class='Ref_to_Parameter'>staysymlink</span></a><span class='Parentheses'>) 
</span>        <a href="zic.c.html#LN867"><span class='Ref_to_Parameter'>staysymlink</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN1035"><span class='Ref_to_Func'>itssymlink</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN867"><span class='Ref_to_Parameter'>tofield</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="private.h.html#LN59"><span class='Ref_to_Proto'>remove</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN867"><span class='Ref_to_Parameter'>tofield</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <a href="zic.c.html#LN869"><span class='Ref_To_Local'>todirs_made</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span>errno <span class='Operator'>!= </span>ENOENT<span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN888"></a>        <span class='Keyword'>char const </span><span class='Operator'>*</span><span class='Declare_Local'>e</span> <span class='Operator'>= </span><a href="../port/strerror.c.html#LN17"><span class='Ref_to_Func'>strerror</span></a><span class='Parentheses'>(</span>errno<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../contrib/seg/segscan.l.html#LN10"><span class='Ref_to_Macro'>fprintf</span></a><span class='Parentheses'>(</span>stderr<span class='Delimiter'>, </span>_<span class='Parentheses'>(</span><span class='String'>"%s: Can't remove %s/%s: %s\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                <a href="../bin/pg_test_timing/pg_test_timing.c.html#LN11"><span class='Ref_to_Global_Var'>progname</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN560"><span class='Ref_to_Global_Var'>directory</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN867"><span class='Ref_to_Parameter'>tofield</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN888"><span class='Ref_To_Local'>e</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../test/isolation/specscanner.l.html#LN91"><span class='Ref_to_Proto'>exit</span></a><span class='Parentheses'>(</span><a href="../bin/psql/settings.h.html#LN150"><span class='Ref_to_Const'>EXIT_FAILURE</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <a href="zic.c.html#LN870"><span class='Ref_To_Local'>link_errno</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN867"><span class='Ref_to_Parameter'>staysymlink</span></a> <span class='Operator'>? </span><a href="private.h.html#LN34"><span class='Ref_to_Const'>ENOTSUP</span></a> <span class='Operator'>: </span><a href="zic.c.html#LN858"><span class='Ref_to_Func'>hardlinkerr</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN867"><span class='Ref_to_Parameter'>fromfield</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN867"><span class='Ref_to_Parameter'>tofield</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN870"><span class='Ref_To_Local'>link_errno</span></a> <span class='Operator'>== </span>ENOENT <span class='Operator'>&& !</span><a href="zic.c.html#LN869"><span class='Ref_To_Local'>todirs_made</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="zic.c.html#LN3615"><span class='Ref_to_Func'>mkdirs</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN867"><span class='Ref_to_Parameter'>tofield</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN869"><span class='Ref_To_Local'>todirs_made</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN870"><span class='Ref_To_Local'>link_errno</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN858"><span class='Ref_to_Func'>hardlinkerr</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN867"><span class='Ref_to_Parameter'>fromfield</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN867"><span class='Ref_to_Parameter'>tofield</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN870"><span class='Ref_To_Local'>link_errno</span></a> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><span class='Directive'>#ifdef</span> HAVE_SYMLINK 
<a name="LN904"></a>        <span class='Keyword'>bool</span>        <span class='Declare_Local'>absolute</span> <span class='Operator'>= *</span><a href="zic.c.html#LN867"><span class='Ref_to_Parameter'>fromfield</span></a> <span class='Operator'>== </span><span class='String'>'/'</span><span class='Delimiter'>; 
</span><a name="LN905"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>linkalloc</span> <span class='Operator'>= </span><a href="zic.c.html#LN904"><span class='Ref_To_Local'>absolute</span></a> <span class='Operator'>? </span><span class='Null_Value'>NULL </span><span class='Operator'>: </span><a href="zic.c.html#LN813"><span class='Ref_to_Func'>relname</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN867"><span class='Ref_to_Parameter'>fromfield</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN867"><span class='Ref_to_Parameter'>tofield</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN906"></a>        <span class='Keyword'>char const </span><span class='Operator'>*</span><span class='Declare_Local'>contents</span> <span class='Operator'>= </span><a href="zic.c.html#LN904"><span class='Ref_To_Local'>absolute</span></a> <span class='Operator'>? </span><a href="zic.c.html#LN867"><span class='Ref_to_Parameter'>fromfield</span></a> <span class='Operator'>: </span><a href="zic.c.html#LN905"><span class='Ref_To_Local'>linkalloc</span></a><span class='Delimiter'>; 
</span><a name="LN907"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>symlink_errno</span> <span class='Operator'>= </span><a href="../include/port.h.html#LN255"><span class='Ref_to_Macro'>symlink</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN906"><span class='Ref_To_Local'>contents</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN867"><span class='Ref_to_Parameter'>tofield</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span> <span class='Operator'>? </span><span class='Number'>0</span> <span class='Operator'>: </span>errno<span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN907"><span class='Ref_To_Local'>symlink_errno</span></a> <span class='Operator'>== </span>ENOENT <span class='Operator'>&& !</span><a href="zic.c.html#LN869"><span class='Ref_To_Local'>todirs_made</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="zic.c.html#LN3615"><span class='Ref_to_Func'>mkdirs</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN867"><span class='Ref_to_Parameter'>tofield</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="zic.c.html#LN907"><span class='Ref_To_Local'>symlink_errno</span></a> <span class='Operator'>= </span><a href="../include/port.h.html#LN255"><span class='Ref_to_Macro'>symlink</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN906"><span class='Ref_To_Local'>contents</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN867"><span class='Ref_to_Parameter'>tofield</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span> <span class='Operator'>? </span><span class='Number'>0</span> <span class='Operator'>: </span>errno<span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <a href="../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN905"><span class='Ref_To_Local'>linkalloc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN907"><span class='Ref_To_Local'>symlink_errno</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN870"><span class='Ref_To_Local'>link_errno</span></a> <span class='Operator'>!= </span><a href="private.h.html#LN34"><span class='Ref_to_Const'>ENOTSUP</span></a><span class='Parentheses'>) 
</span>                <a href="zic.c.html#LN492"><span class='Ref_to_Func'>warning</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"symbolic link used because hard link failed: %s"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                        <a href="../port/strerror.c.html#LN17"><span class='Ref_to_Func'>strerror</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN870"><span class='Ref_To_Local'>link_errno</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
<span class='Directive'>#endif</span>   <span class='Comment_Single_Line'>/* HAVE_SYMLINK */ 
</span>        <span class='Delimiter'>{ 
</span><a name="LN924"></a>            FILE       <span class='Operator'>*</span><span class='Declare_Local'>fp</span><span class='Delimiter'>, 
</span><a name="LN925"></a>                       <span class='Operator'>*</span><span class='Declare_Local'>tp</span><span class='Delimiter'>; 
</span><a name="LN926"></a>            <span class='Keyword'>int</span>         <span class='Declare_Local'>c</span><span class='Delimiter'>; 
</span> 
            <a href="zic.c.html#LN924"><span class='Ref_To_Local'>fp</span></a> <span class='Operator'>= </span><a href="../include/port.h.html#LN290"><span class='Ref_to_Macro'>fopen</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN867"><span class='Ref_to_Parameter'>fromfield</span></a><span class='Delimiter'>, </span><span class='String'>"rb"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="zic.c.html#LN924"><span class='Ref_To_Local'>fp</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span><a name="LN931"></a>                <span class='Keyword'>char const </span><span class='Operator'>*</span><span class='Declare_Local'>e</span> <span class='Operator'>= </span><a href="../port/strerror.c.html#LN17"><span class='Ref_to_Func'>strerror</span></a><span class='Parentheses'>(</span>errno<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <a href="../../contrib/seg/segscan.l.html#LN10"><span class='Ref_to_Macro'>fprintf</span></a><span class='Parentheses'>(</span>stderr<span class='Delimiter'>, </span>_<span class='Parentheses'>(</span><span class='String'>"%s: Can't read %s/%s: %s\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                        <a href="../bin/pg_test_timing/pg_test_timing.c.html#LN11"><span class='Ref_to_Global_Var'>progname</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN560"><span class='Ref_to_Global_Var'>directory</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN867"><span class='Ref_to_Parameter'>fromfield</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN931"><span class='Ref_To_Local'>e</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="../test/isolation/specscanner.l.html#LN91"><span class='Ref_to_Proto'>exit</span></a><span class='Parentheses'>(</span><a href="../bin/psql/settings.h.html#LN150"><span class='Ref_to_Const'>EXIT_FAILURE</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <a href="zic.c.html#LN925"><span class='Ref_To_Local'>tp</span></a> <span class='Operator'>= </span><a href="../include/port.h.html#LN290"><span class='Ref_to_Macro'>fopen</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN867"><span class='Ref_to_Parameter'>tofield</span></a><span class='Delimiter'>, </span><span class='String'>"wb"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="zic.c.html#LN925"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span><a name="LN940"></a>                <span class='Keyword'>char const </span><span class='Operator'>*</span><span class='Declare_Local'>e</span> <span class='Operator'>= </span><a href="../port/strerror.c.html#LN17"><span class='Ref_to_Func'>strerror</span></a><span class='Parentheses'>(</span>errno<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <a href="../../contrib/seg/segscan.l.html#LN10"><span class='Ref_to_Macro'>fprintf</span></a><span class='Parentheses'>(</span>stderr<span class='Delimiter'>, </span>_<span class='Parentheses'>(</span><span class='String'>"%s: Can't create %s/%s: %s\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                        <a href="../bin/pg_test_timing/pg_test_timing.c.html#LN11"><span class='Ref_to_Global_Var'>progname</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN560"><span class='Ref_to_Global_Var'>directory</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN867"><span class='Ref_to_Parameter'>tofield</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN940"><span class='Ref_To_Local'>e</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="../test/isolation/specscanner.l.html#LN91"><span class='Ref_to_Proto'>exit</span></a><span class='Parentheses'>(</span><a href="../bin/psql/settings.h.html#LN150"><span class='Ref_to_Const'>EXIT_FAILURE</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>while</span> <span class='Parentheses'>((</span><a href="zic.c.html#LN926"><span class='Ref_To_Local'>c</span></a> <span class='Operator'>= </span>getc<span class='Parentheses'>(</span><a href="zic.c.html#LN924"><span class='Ref_To_Local'>fp</span></a><span class='Parentheses'>))</span> <span class='Operator'>!= </span>EOF<span class='Parentheses'>)</span> 
                putc<span class='Parentheses'>(</span><a href="zic.c.html#LN926"><span class='Ref_To_Local'>c</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN925"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="zic.c.html#LN504"><span class='Ref_to_Func'>close_file</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN924"><span class='Ref_To_Local'>fp</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN560"><span class='Ref_to_Global_Var'>directory</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN867"><span class='Ref_to_Parameter'>fromfield</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="zic.c.html#LN504"><span class='Ref_to_Func'>close_file</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN925"><span class='Ref_To_Local'>tp</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN560"><span class='Ref_to_Global_Var'>directory</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN867"><span class='Ref_to_Parameter'>tofield</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN870"><span class='Ref_To_Local'>link_errno</span></a> <span class='Operator'>!= </span><a href="private.h.html#LN34"><span class='Ref_to_Const'>ENOTSUP</span></a><span class='Parentheses'>) 
</span>                <a href="zic.c.html#LN492"><span class='Ref_to_Func'>warning</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"copy used because hard link failed: %s"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                        <a href="../port/strerror.c.html#LN17"><span class='Ref_to_Func'>strerror</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN870"><span class='Ref_To_Local'>link_errno</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span><span class='Directive'>#ifdef</span> HAVE_SYMLINK 
            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN907"><span class='Ref_To_Local'>symlink_errno</span></a> <span class='Operator'>!= </span><a href="private.h.html#LN34"><span class='Ref_to_Const'>ENOTSUP</span></a><span class='Parentheses'>) 
</span>                <a href="zic.c.html#LN492"><span class='Ref_to_Func'>warning</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"copy used because symbolic link failed: %s"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                        <a href="../port/strerror.c.html#LN17"><span class='Ref_to_Func'>strerror</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN907"><span class='Ref_To_Local'>symlink_errno</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span><span class='Directive'>#endif</span> 
        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if link_errno!=0 &raquo; </span> 
<span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end dolink &raquo; </span> 
 
<a name="LN962"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>TIME_T_BITS_IN_FILE</span> <span class='Number'>64</span> 
 
<a name="LN964"></a><span class='Keyword'>static </span><a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a> <span class='Keyword'>const </span><span class='Declare_Var'>min_time</span> <span class='Operator'>= </span><a href="private.h.html#LN81"><span class='Ref_to_Macro'>MINVAL</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN962"><span class='Ref_to_Const'>TIME_T_BITS_IN_FILE</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN965"></a><span class='Keyword'>static </span><a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a> <span class='Keyword'>const </span><span class='Declare_Var'>max_time</span> <span class='Operator'>= </span><a href="private.h.html#LN78"><span class='Ref_to_Macro'>MAXVAL</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN962"><span class='Ref_to_Const'>TIME_T_BITS_IN_FILE</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Estimated time of the Big Bang, in seconds since the POSIX epoch. 
 * rounded downward to the negation of a power of two that is 
 * comfortably outside the error bounds. 
 * 
 * For the time of the Big Bang, see: 
 * 
 * Ade PAR, Aghanim N, Armitage-Caplan C et al.  Planck 2013 results. 
 * I. Overview of products and scientific results. 
 * arXiv:1303.5062 2013-03-20 20:10:01 UTC 
 * &LT;http://arxiv.org/pdf/1303.5062v1&GT; [PDF] 
 * 
 * Page 36, Table 9, row Age/Gyr, column Planck+WP+highL+BAO 68% limits 
 * gives the value 13.798 plus-or-minus 0.037 billion years. 
 * Multiplying this by 1000000000 and then by 31557600 (the number of 
 * seconds in an astronomical year) gives a value that is comfortably 
 * less than 2**59, so BIG_BANG is - 2**59. 
 * 
 * BIG_BANG is approximate, and may change in future versions. 
 * Please do not rely on its exact value. 
 */ 
</span> 
<span class='Directive'>#ifndef</span> <a href="zic.c.html#LN990"><span class='Ref_to_Const'>BIG_BANG</span></a> 
<a name="LN990"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>BIG_BANG</span> <span class='Parentheses'>(</span><span class='Operator'>- </span><span class='Parentheses'>(((</span><a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a><span class='Parentheses'>) </span><span class='Number'>1</span><span class='Parentheses'>)</span> <span class='Operator'>&LT;&LT; </span><span class='Number'>59</span><span class='Parentheses'>))</span> 
<span class='Directive'>#endif</span> 
 
<span class='Comment_Multi_Line'>/* If true, work around GNOME bug 730332 
   &LT;https://bugzilla.gnome.org/show_bug.cgi?id=730332&GT; 
   by refusing to output time stamps before BIG_BANG. 
   Such time stamps are physically suspect anyway. 
 
   The GNOME bug is scheduled to be fixed in GNOME 3.22, and if so 
   this workaround will no longer be needed when GNOME 3.21 and 
   earlier are obsolete, say in the year 2021.  */ 
</span><span class='Control'>enum</span> 
<span class='Delimiter'>{ 
</span><a name="LN1003"></a><span class='Declare_Enum_Const'>WORK_AROUND_GNOME_BUG_730332</span> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>}; 
</span> 
<a name="LN1005"></a><span class='Keyword'>static const </span><a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a> <span class='Declare_Var'>early_time</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="zic.c.html#LN1003"><span class='Ref_to_EnumConst'>WORK_AROUND_GNOME_BUG_730332</span></a> 
                                 <span class='Operator'>? </span><a href="zic.c.html#LN990"><span class='Ref_to_Const'>BIG_BANG</span></a> 
                                 <span class='Operator'>: </span><a href="private.h.html#LN81"><span class='Ref_to_Macro'>MINVAL</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN962"><span class='Ref_to_Const'>TIME_T_BITS_IN_FILE</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* Return true if NAME is a directory.  */ 
</span><span class='Keyword'>static bool 
</span><a name="LN1011"></a><span class='Declare_Function'>itsdir</span><span class='Parentheses'>(</span><span class='Keyword'>char const </span><span class='Operator'>* </span><span class='Declare_Parameter'>name</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1013"></a>    <span class='Control'>struct</span> <a href="../include/port.h.html#LN275"><span class='Ref_to_Macro'>stat</span></a> <span class='Declare_Local'>st</span><span class='Delimiter'>; 
</span><a name="LN1014"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>res</span> <span class='Operator'>= </span><a href="../include/port.h.html#LN275"><span class='Ref_to_Macro'>stat</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN1011"><span class='Ref_to_Parameter'>name</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="zic.c.html#LN1013"><span class='Ref_To_Local'>st</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Directive'>#ifdef</span> <a href="../include/port/win32.h.html#LN429"><span class='Ref_to_Macro'>S_ISDIR</span></a> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN1014"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <a href="../include/port/win32.h.html#LN429"><span class='Ref_to_Macro'>S_ISDIR</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN1013"><span class='Ref_To_Local'>st</span></a><span class='Operator'>.</span>st_mode<span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span><span class='Directive'>#endif</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN1014"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>== </span><span class='Number'>0</span> <span class='Operator'>|| </span>errno <span class='Operator'>== </span><a href="private.h.html#LN37"><span class='Ref_to_Const'>EOVERFLOW</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN1021"></a>        size_t      <span class='Declare_Local'>n</span> <span class='Operator'>= </span>strlen<span class='Parentheses'>(</span><a href="zic.c.html#LN1011"><span class='Ref_to_Parameter'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1022"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>nameslashdot</span> <span class='Operator'>= </span><a href="zic.c.html#LN412"><span class='Ref_to_Func'>emalloc</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN1021"><span class='Ref_To_Local'>n</span></a> <span class='Operator'>+ </span><span class='Number'>3</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1023"></a>        <span class='Keyword'>bool</span>        <span class='Declare_Local'>dir</span><span class='Delimiter'>; 
</span> 
        memcpy<span class='Parentheses'>(</span><a href="zic.c.html#LN1022"><span class='Ref_To_Local'>nameslashdot</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN1011"><span class='Ref_to_Parameter'>name</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN1021"><span class='Ref_To_Local'>n</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../contrib/cube/cubeparse.y.html#LN150"><span class='Ref_to_Proto'>strcpy</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="zic.c.html#LN1022"><span class='Ref_To_Local'>nameslashdot</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1021"><span class='Ref_To_Local'>n</span></a><span class='Delimiter'>], </span><span class='Operator'>&</span><span class='String'>"/."</span><span class='Delimiter'>[</span><span class='Operator'>!</span><span class='Parentheses'>(</span><a href="zic.c.html#LN1021"><span class='Ref_To_Local'>n</span></a> <span class='Operator'>&& </span><a href="zic.c.html#LN1011"><span class='Ref_to_Parameter'>name</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1021"><span class='Ref_To_Local'>n</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>] </span><span class='Operator'>!= </span><span class='String'>'/'</span><span class='Parentheses'>)</span><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN1023"><span class='Ref_To_Local'>dir</span></a> <span class='Operator'>= </span><a href="../include/port.h.html#LN275"><span class='Ref_to_Macro'>stat</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN1022"><span class='Ref_To_Local'>nameslashdot</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="zic.c.html#LN1013"><span class='Ref_To_Local'>st</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span> <span class='Operator'>|| </span>errno <span class='Operator'>== </span><a href="private.h.html#LN37"><span class='Ref_to_Const'>EOVERFLOW</span></a><span class='Delimiter'>; 
</span>        <a href="../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN1022"><span class='Ref_To_Local'>nameslashdot</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <a href="zic.c.html#LN1023"><span class='Ref_To_Local'>dir</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end itsdir &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* Return true if NAME is a symbolic link.  */ 
</span><span class='Keyword'>static bool 
</span><a name="LN1036"></a><span class='Declare_Function'>itssymlink</span><span class='Parentheses'>(</span><span class='Keyword'>char const </span><span class='Operator'>* </span><span class='Declare_Parameter'>name</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><span class='Directive'>#ifdef</span> HAVE_SYMLINK 
<a name="LN1039"></a>    <span class='Keyword'>char</span>        <span class='Declare_Local'>c</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <span class='Number'>0</span> <span class='Operator'>&LT;= </span><a href="../include/port.h.html#LN256"><span class='Ref_to_Macro'>readlink</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN1036"><span class='Ref_to_Parameter'>name</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="zic.c.html#LN1039"><span class='Ref_To_Local'>c</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Directive'>#else</span> 
    <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span><span class='Directive'>#endif</span> 
<span class='Delimiter'>} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Associate sets of rules with zones. 
 */ 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Sort by rule name. 
 */ 
</span> 
<span class='Keyword'>static int 
</span><a name="LN1056"></a><span class='Declare_Function'>rcomp</span><span class='Parentheses'>(</span><span class='Keyword'>const void </span><span class='Operator'>*</span><span class='Declare_Parameter'>cp1</span><span class='Delimiter'>, </span><span class='Keyword'>const void </span><span class='Operator'>*</span><span class='Declare_Parameter'>cp2</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>return</span> strcmp<span class='Parentheses'>(((</span><span class='Keyword'>const </span><span class='Control'>struct</span> <a href="localtime.c.html#LN81"><span class='Ref_to_Struct'>rule</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="zic.c.html#LN1056"><span class='Ref_to_Parameter'>cp1</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>r_name<span class='Delimiter'>, 
</span>                  <span class='Parentheses'>((</span><span class='Keyword'>const </span><span class='Control'>struct</span> <a href="localtime.c.html#LN81"><span class='Ref_to_Struct'>rule</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="zic.c.html#LN1056"><span class='Ref_to_Parameter'>cp2</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>r_name<span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Keyword'>static void 
</span><a name="LN1063"></a><span class='Declare_Function'>associate</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1065"></a>    <span class='Control'>struct</span> <a href="zic.c.html#LN89"><span class='Ref_to_Struct'>zone</span></a> <span class='Operator'>*</span><span class='Declare_Local'>zp</span><span class='Delimiter'>; 
</span><a name="LN1066"></a>    <span class='Control'>struct</span> <a href="localtime.c.html#LN81"><span class='Ref_to_Struct'>rule</span></a> <span class='Operator'>*</span><span class='Declare_Local'>rp</span><span class='Delimiter'>; 
</span><a name="LN1067"></a>    ptrdiff_t   <span class='Declare_Local'>i</span><span class='Delimiter'>, 
</span><a name="LN1068"></a>                <span class='Declare_Local'>j</span><span class='Delimiter'>, 
</span><a name="LN1069"></a>                <span class='Declare_Local'>base</span><span class='Delimiter'>, 
</span><a name="LN1070"></a>                <span class='Declare_Local'>out</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN267"><span class='Ref_to_Global_Var'>nrules</span></a> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../include/port.h.html#LN439"><span class='Ref_to_Macro'>qsort</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN266"><span class='Ref_to_Global_Var'>rules</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN267"><span class='Ref_to_Global_Var'>nrules</span></a><span class='Delimiter'>, </span><span class='Keyword'>sizeof </span><span class='Operator'>*</span><a href="zic.c.html#LN266"><span class='Ref_to_Global_Var'>rules</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN1055"><span class='Ref_to_Func'>rcomp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN1067"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="zic.c.html#LN1067"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="zic.c.html#LN267"><span class='Ref_to_Global_Var'>nrules</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>; </span><span class='Operator'>++</span><a href="zic.c.html#LN1067"><span class='Ref_To_Local'>i</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="zic.c.html#LN266"><span class='Ref_to_Global_Var'>rules</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1067"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="zic.c.html#LN56"><span class='Ref_to_Member'>r_name</span></a><span class='Delimiter'>, 
</span>                       <a href="zic.c.html#LN266"><span class='Ref_to_Global_Var'>rules</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1067"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="zic.c.html#LN56"><span class='Ref_to_Member'>r_name</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
                <span class='Control'>continue</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="zic.c.html#LN266"><span class='Ref_to_Global_Var'>rules</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1067"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="zic.c.html#LN54"><span class='Ref_to_Member'>r_filename</span></a><span class='Delimiter'>, 
</span>                       <a href="zic.c.html#LN266"><span class='Ref_to_Global_Var'>rules</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1067"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="zic.c.html#LN54"><span class='Ref_to_Member'>r_filename</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
                <span class='Control'>continue</span><span class='Delimiter'>; 
</span>            <a href="zic.c.html#LN459"><span class='Ref_to_Func'>eat</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN266"><span class='Ref_to_Global_Var'>rules</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1067"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="zic.c.html#LN54"><span class='Ref_to_Member'>r_filename</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN266"><span class='Ref_to_Global_Var'>rules</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1067"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="zic.c.html#LN55"><span class='Ref_to_Member'>r_linenum</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="zic.c.html#LN492"><span class='Ref_to_Func'>warning</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"same rule name in multiple files"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="zic.c.html#LN459"><span class='Ref_to_Func'>eat</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN266"><span class='Ref_to_Global_Var'>rules</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1067"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="zic.c.html#LN54"><span class='Ref_to_Member'>r_filename</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN266"><span class='Ref_to_Global_Var'>rules</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1067"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="zic.c.html#LN55"><span class='Ref_to_Member'>r_linenum</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="zic.c.html#LN492"><span class='Ref_to_Func'>warning</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"same rule name in multiple files"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN1068"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN1067"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>+ </span><span class='Number'>2</span><span class='Delimiter'>; </span><a href="zic.c.html#LN1068"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>&LT; </span><a href="zic.c.html#LN267"><span class='Ref_to_Global_Var'>nrules</span></a><span class='Delimiter'>; </span><span class='Operator'>++</span><a href="zic.c.html#LN1068"><span class='Ref_To_Local'>j</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="zic.c.html#LN266"><span class='Ref_to_Global_Var'>rules</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1067"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="zic.c.html#LN56"><span class='Ref_to_Member'>r_name</span></a><span class='Delimiter'>, 
</span>                           <a href="zic.c.html#LN266"><span class='Ref_to_Global_Var'>rules</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1068"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="zic.c.html#LN56"><span class='Ref_to_Member'>r_name</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="zic.c.html#LN266"><span class='Ref_to_Global_Var'>rules</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1067"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="zic.c.html#LN54"><span class='Ref_to_Member'>r_filename</span></a><span class='Delimiter'>, 
</span>                           <a href="zic.c.html#LN266"><span class='Ref_to_Global_Var'>rules</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1068"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="zic.c.html#LN54"><span class='Ref_to_Member'>r_filename</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
                    <span class='Control'>continue</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="zic.c.html#LN266"><span class='Ref_to_Global_Var'>rules</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1067"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="zic.c.html#LN54"><span class='Ref_to_Member'>r_filename</span></a><span class='Delimiter'>, 
</span>                           <a href="zic.c.html#LN266"><span class='Ref_to_Global_Var'>rules</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1068"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="zic.c.html#LN54"><span class='Ref_to_Member'>r_filename</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
                    <span class='Control'>continue</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <a href="zic.c.html#LN1067"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN1068"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=0;i&LT;nrules-1;++i &raquo; </span> 
    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if nrules!=0 &raquo; </span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN1067"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="zic.c.html#LN1067"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="zic.c.html#LN271"><span class='Ref_to_Global_Var'>nzones</span></a><span class='Delimiter'>; </span><span class='Operator'>++</span><a href="zic.c.html#LN1067"><span class='Ref_To_Local'>i</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="zic.c.html#LN1065"><span class='Ref_To_Local'>zp</span></a> <span class='Operator'>= &</span><a href="zic.c.html#LN270"><span class='Ref_to_Global_Var'>zones</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1067"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; 
</span>        <a href="zic.c.html#LN1065"><span class='Ref_To_Local'>zp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN102"><span class='Ref_to_Member'>z_rules</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN1065"><span class='Ref_To_Local'>zp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN103"><span class='Ref_to_Member'>z_nrules</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN1069"><span class='Ref_To_Local'>base</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="zic.c.html#LN1069"><span class='Ref_To_Local'>base</span></a> <span class='Operator'>&LT; </span><a href="zic.c.html#LN267"><span class='Ref_to_Global_Var'>nrules</span></a><span class='Delimiter'>; </span><a href="zic.c.html#LN1069"><span class='Ref_To_Local'>base</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN1070"><span class='Ref_To_Local'>out</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="zic.c.html#LN1066"><span class='Ref_To_Local'>rp</span></a> <span class='Operator'>= &</span><a href="zic.c.html#LN266"><span class='Ref_to_Global_Var'>rules</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1069"><span class='Ref_To_Local'>base</span></a><span class='Delimiter'>]; 
</span>        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN1070"><span class='Ref_To_Local'>out</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN1069"><span class='Ref_To_Local'>base</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>; </span><a href="zic.c.html#LN1070"><span class='Ref_To_Local'>out</span></a> <span class='Operator'>&LT; </span><a href="zic.c.html#LN267"><span class='Ref_to_Global_Var'>nrules</span></a><span class='Delimiter'>; </span><span class='Operator'>++</span><a href="zic.c.html#LN1070"><span class='Ref_To_Local'>out</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="zic.c.html#LN1066"><span class='Ref_To_Local'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN56"><span class='Ref_to_Member'>r_name</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN266"><span class='Ref_to_Global_Var'>rules</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1070"><span class='Ref_To_Local'>out</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="zic.c.html#LN56"><span class='Ref_to_Member'>r_name</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
                <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN1067"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="zic.c.html#LN1067"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="zic.c.html#LN271"><span class='Ref_to_Global_Var'>nzones</span></a><span class='Delimiter'>; </span><span class='Operator'>++</span><a href="zic.c.html#LN1067"><span class='Ref_To_Local'>i</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="zic.c.html#LN1065"><span class='Ref_To_Local'>zp</span></a> <span class='Operator'>= &</span><a href="zic.c.html#LN270"><span class='Ref_to_Global_Var'>zones</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1067"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="zic.c.html#LN1065"><span class='Ref_To_Local'>zp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN96"><span class='Ref_to_Member'>z_rule</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN1066"><span class='Ref_To_Local'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN56"><span class='Ref_to_Member'>r_name</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
                <span class='Control'>continue</span><span class='Delimiter'>; 
</span>            <a href="zic.c.html#LN1065"><span class='Ref_To_Local'>zp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN102"><span class='Ref_to_Member'>z_rules</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN1066"><span class='Ref_To_Local'>rp</span></a><span class='Delimiter'>; 
</span>            <a href="zic.c.html#LN1065"><span class='Ref_To_Local'>zp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN103"><span class='Ref_to_Member'>z_nrules</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN1070"><span class='Ref_To_Local'>out</span></a> <span class='Operator'>- </span><a href="zic.c.html#LN1069"><span class='Ref_To_Local'>base</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN1067"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="zic.c.html#LN1067"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="zic.c.html#LN271"><span class='Ref_to_Global_Var'>nzones</span></a><span class='Delimiter'>; </span><span class='Operator'>++</span><a href="zic.c.html#LN1067"><span class='Ref_To_Local'>i</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="zic.c.html#LN1065"><span class='Ref_To_Local'>zp</span></a> <span class='Operator'>= &</span><a href="zic.c.html#LN270"><span class='Ref_to_Global_Var'>zones</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1067"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN1065"><span class='Ref_To_Local'>zp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN103"><span class='Ref_to_Member'>z_nrules</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* 
             * Maybe we have a local standard time offset. 
             */ 
</span>            <a href="zic.c.html#LN459"><span class='Ref_to_Func'>eat</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN1065"><span class='Ref_To_Local'>zp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN91"><span class='Ref_to_Member'>z_filename</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN1065"><span class='Ref_To_Local'>zp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN92"><span class='Ref_to_Member'>z_linenum</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="zic.c.html#LN1065"><span class='Ref_To_Local'>zp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN100"><span class='Ref_to_Member'>z_stdoff</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN1251"><span class='Ref_to_Func'>gethms</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN1065"><span class='Ref_To_Local'>zp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN96"><span class='Ref_to_Member'>z_rule</span></a><span class='Delimiter'>, </span>_<span class='Parentheses'>(</span><span class='String'>"unruly zone"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                  <span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* 
             * Note, though, that if there's no rule, a '%s' in the format is 
             * a bad thing. 
             */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN1065"><span class='Ref_To_Local'>zp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN98"><span class='Ref_to_Member'>z_format_specifier</span></a> <span class='Operator'>== </span><span class='String'>'s'</span><span class='Parentheses'>) 
</span>                <a href="../interfaces/ecpg/test/expected/sql-dyntest.c.html#LN145"><span class='Ref_to_Func'>error</span></a><span class='Parentheses'>(</span><span class='String'>"%s"</span><span class='Delimiter'>, </span>_<span class='Parentheses'>(</span><span class='String'>"%s in ruleless zone"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=0;i&LT;nzones;++i &raquo; </span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN163"><span class='Ref_to_Global_Var'>errors</span></a><span class='Parentheses'>) 
</span>        <a href="../test/isolation/specscanner.l.html#LN91"><span class='Ref_to_Proto'>exit</span></a><span class='Parentheses'>(</span><a href="../bin/psql/settings.h.html#LN150"><span class='Ref_to_Const'>EXIT_FAILURE</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end associate &raquo; </span> 
 
<span class='Keyword'>static void 
</span><a name="LN1149"></a><span class='Declare_Function'>infile</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>name</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1151"></a>    FILE       <span class='Operator'>*</span><span class='Declare_Local'>fp</span><span class='Delimiter'>; 
</span><a name="LN1152"></a>    <span class='Keyword'>char</span>      <span class='Operator'>**</span><span class='Declare_Local'>fields</span><span class='Delimiter'>; 
</span><a name="LN1153"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>cp</span><span class='Delimiter'>; 
</span><a name="LN1154"></a>    <span class='Keyword'>const </span><span class='Control'>struct</span> <a href="zic.c.html#LN286"><span class='Ref_to_Struct'>lookup</span></a> <span class='Operator'>*</span><span class='Declare_Local'>lp</span><span class='Delimiter'>; 
</span><a name="LN1155"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>nfields</span><span class='Delimiter'>; 
</span><a name="LN1156"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>wantcont</span><span class='Delimiter'>; 
</span><a name="LN1157"></a>    <a href="zic.c.html#LN49"><span class='Ref_to_Typedef'>lineno_t</span></a>    <span class='Declare_Local'>num</span><span class='Delimiter'>; 
</span><a name="LN1158"></a>    <span class='Keyword'>char</span>        <span class='Declare_Local'>buf</span><span class='Delimiter'>[</span>BUFSIZ<span class='Delimiter'>]; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="zic.c.html#LN1149"><span class='Ref_to_Parameter'>name</span></a><span class='Delimiter'>, </span><span class='String'>"-"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <a href="zic.c.html#LN1149"><span class='Ref_to_Parameter'>name</span></a> <span class='Operator'>= </span>_<span class='Parentheses'>(</span><span class='String'>"standard input"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN1151"><span class='Ref_To_Local'>fp</span></a> <span class='Operator'>= </span>stdin<span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="zic.c.html#LN1151"><span class='Ref_To_Local'>fp</span></a> <span class='Operator'>= </span><a href="../include/port.h.html#LN290"><span class='Ref_to_Macro'>fopen</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN1149"><span class='Ref_to_Parameter'>name</span></a><span class='Delimiter'>, </span><span class='String'>"r"</span><span class='Parentheses'>))</span> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span><a name="LN1167"></a>        <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>e</span> <span class='Operator'>= </span><a href="../port/strerror.c.html#LN17"><span class='Ref_to_Func'>strerror</span></a><span class='Parentheses'>(</span>errno<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../contrib/seg/segscan.l.html#LN10"><span class='Ref_to_Macro'>fprintf</span></a><span class='Parentheses'>(</span>stderr<span class='Delimiter'>, </span>_<span class='Parentheses'>(</span><span class='String'>"%s: Cannot open %s: %s\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                <a href="../bin/pg_test_timing/pg_test_timing.c.html#LN11"><span class='Ref_to_Global_Var'>progname</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN1149"><span class='Ref_to_Parameter'>name</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN1167"><span class='Ref_To_Local'>e</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../test/isolation/specscanner.l.html#LN91"><span class='Ref_to_Proto'>exit</span></a><span class='Parentheses'>(</span><a href="../bin/psql/settings.h.html#LN150"><span class='Ref_to_Const'>EXIT_FAILURE</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <a href="zic.c.html#LN1156"><span class='Ref_To_Local'>wantcont</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN1157"><span class='Ref_To_Local'>num</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>;; </span><span class='Operator'>++</span><a href="zic.c.html#LN1157"><span class='Ref_To_Local'>num</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="zic.c.html#LN459"><span class='Ref_to_Func'>eat</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN1149"><span class='Ref_to_Parameter'>name</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN1157"><span class='Ref_To_Local'>num</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span>fgets<span class='Parentheses'>(</span><a href="zic.c.html#LN1158"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='Keyword'>sizeof </span><a href="zic.c.html#LN1158"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN1151"><span class='Ref_To_Local'>fp</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><a href="zic.c.html#LN1158"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>)</span> 
            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN1153"><span class='Ref_To_Local'>cp</span></a> <span class='Operator'>= </span>strchr<span class='Parentheses'>(</span><a href="zic.c.html#LN1158"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>'\n'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN1153"><span class='Ref_To_Local'>cp</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="../interfaces/ecpg/test/expected/sql-dyntest.c.html#LN145"><span class='Ref_to_Func'>error</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"line too long"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="../test/isolation/specscanner.l.html#LN91"><span class='Ref_to_Proto'>exit</span></a><span class='Parentheses'>(</span><a href="../bin/psql/settings.h.html#LN150"><span class='Ref_to_Const'>EXIT_FAILURE</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Operator'>*</span><a href="zic.c.html#LN1153"><span class='Ref_To_Local'>cp</span></a> <span class='Operator'>= </span><span class='String'>'\0'</span><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN1152"><span class='Ref_To_Local'>fields</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN3395"><span class='Ref_to_Func'>getfields</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN1158"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN1155"><span class='Ref_To_Local'>nfields</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>        <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN1152"><span class='Ref_To_Local'>fields</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1155"><span class='Ref_To_Local'>nfields</span></a><span class='Delimiter'>] </span><span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN1190"></a>            <span class='Keyword'>static char </span><span class='Declare_Local'>nada</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="zic.c.html#LN1152"><span class='Ref_To_Local'>fields</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1155"><span class='Ref_To_Local'>nfields</span></a><span class='Delimiter'>], </span><span class='String'>"-"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
                <a href="zic.c.html#LN1152"><span class='Ref_To_Local'>fields</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1155"><span class='Ref_To_Local'>nfields</span></a><span class='Delimiter'>] </span><span class='Operator'>= &</span><a href="zic.c.html#LN1190"><span class='Ref_To_Local'>nada</span></a><span class='Delimiter'>; 
</span>            <span class='Operator'>++</span><a href="zic.c.html#LN1155"><span class='Ref_To_Local'>nfields</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN1155"><span class='Ref_To_Local'>nfields</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* nothing to do */ 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN1156"><span class='Ref_To_Local'>wantcont</span></a><span class='Parentheses'>) 
</span>            <a href="zic.c.html#LN1156"><span class='Ref_To_Local'>wantcont</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN1370"><span class='Ref_to_Func'>inzcont</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN1152"><span class='Ref_To_Local'>fields</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN1155"><span class='Ref_To_Local'>nfields</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <a href="zic.c.html#LN1154"><span class='Ref_To_Local'>lp</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN292"><span class='Ref_to_Proto'>byword</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN1152"><span class='Ref_To_Local'>fields</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>], </span><a href="zic.c.html#LN295"><span class='Ref_to_Global_Var'>line_codes</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN1154"><span class='Ref_To_Local'>lp</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>                <a href="../interfaces/ecpg/test/expected/sql-dyntest.c.html#LN145"><span class='Ref_to_Func'>error</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"input line of unknown type"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> 
                <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN1154"><span class='Ref_To_Local'>lp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN289"><span class='Ref_to_Member'>l_value</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <span class='Control'>case</span> <a href="zic.c.html#LN189"><span class='Ref_to_Const'>LC_RULE</span></a><span class='Operator'>: 
</span>                        <a href="zic.c.html#LN1304"><span class='Ref_to_Func'>inrule</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN1152"><span class='Ref_To_Local'>fields</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN1155"><span class='Ref_To_Local'>nfields</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <a href="zic.c.html#LN1156"><span class='Ref_To_Local'>wantcont</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Control'>case</span> <a href="zic.c.html#LN190"><span class='Ref_to_Const'>LC_ZONE</span></a><span class='Operator'>: 
</span>                        <a href="zic.c.html#LN1156"><span class='Ref_To_Local'>wantcont</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN1332"><span class='Ref_to_Func'>inzone</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN1152"><span class='Ref_To_Local'>fields</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN1155"><span class='Ref_To_Local'>nfields</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Control'>case</span> <a href="zic.c.html#LN191"><span class='Ref_to_Const'>LC_LINK</span></a><span class='Operator'>: 
</span>                        <a href="zic.c.html#LN1610"><span class='Ref_to_Func'>inlink</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN1152"><span class='Ref_To_Local'>fields</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN1155"><span class='Ref_To_Local'>nfields</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <a href="zic.c.html#LN1156"><span class='Ref_To_Local'>wantcont</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Control'>case</span> <a href="zic.c.html#LN192"><span class='Ref_to_Const'>LC_LEAP</span></a><span class='Operator'>: 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN1149"><span class='Ref_to_Parameter'>name</span></a> <span class='Operator'>!= </span><a href="zic.c.html#LN561"><span class='Ref_to_Global_Var'>leapsec</span></a><span class='Parentheses'>) 
</span>                            <a href="zic.c.html#LN492"><span class='Ref_to_Func'>warning</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"%s: Leap line in non leap"</span> 
                                      <span class='String'>" seconds file %s"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                    <a href="../bin/pg_test_timing/pg_test_timing.c.html#LN11"><span class='Ref_to_Global_Var'>progname</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN1149"><span class='Ref_to_Parameter'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>else</span> 
                            <a href="zic.c.html#LN1480"><span class='Ref_to_Func'>inleap</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN1152"><span class='Ref_To_Local'>fields</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN1155"><span class='Ref_To_Local'>nfields</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <a href="zic.c.html#LN1156"><span class='Ref_To_Local'>wantcont</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Control'>default</span><span class='Operator'>:</span>    <span class='Comment_Single_Line'>/* "cannot happen" */ 
</span>                        <a href="../../contrib/seg/segscan.l.html#LN10"><span class='Ref_to_Macro'>fprintf</span></a><span class='Parentheses'>(</span>stderr<span class='Delimiter'>, 
</span>                                _<span class='Parentheses'>(</span><span class='String'>"%s: panic: Invalid l_value %d\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                <a href="../bin/pg_test_timing/pg_test_timing.c.html#LN11"><span class='Ref_to_Global_Var'>progname</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN1154"><span class='Ref_To_Local'>lp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN289"><span class='Ref_to_Member'>l_value</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <a href="../test/isolation/specscanner.l.html#LN91"><span class='Ref_to_Proto'>exit</span></a><span class='Parentheses'>(</span><a href="../bin/psql/settings.h.html#LN150"><span class='Ref_to_Const'>EXIT_FAILURE</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch lp-&GT;l_value &raquo; </span> 
        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
        <a href="../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN1152"><span class='Ref_To_Local'>fields</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for num=1;;++num &raquo; </span> 
    <a href="zic.c.html#LN504"><span class='Ref_to_Func'>close_file</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN1151"><span class='Ref_To_Local'>fp</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><a href="../bin/pg_test_fsync/pg_test_fsync.c.html#LN67"><span class='Ref_to_Global_Var'>filename</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN1156"><span class='Ref_To_Local'>wantcont</span></a><span class='Parentheses'>) 
</span>        <a href="../interfaces/ecpg/test/expected/sql-dyntest.c.html#LN145"><span class='Ref_to_Func'>error</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"expected continuation line not found"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end infile &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Convert a string of one of the forms 
 *  h   -h  hh:mm   -hh:mm  hh:mm:ss    -hh:mm:ss 
 * into a number of seconds. 
 * A null string maps to zero. 
 * Call error with errstring and return zero on errors. 
 */ 
</span><span class='Keyword'>static </span><a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a> 
<a name="LN1252"></a><span class='Declare_Function'>gethms</span><span class='Parentheses'>(</span><span class='Keyword'>char const </span><span class='Operator'>* </span><span class='Declare_Parameter'>string</span><span class='Delimiter'>, </span><span class='Keyword'>char const </span><span class='Operator'>* </span><span class='Declare_Parameter'>errstring</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>signable</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Comment_Multi_Line'>/* PG: make hh be int not zic_t to avoid sscanf portability issues */ 
</span><a name="LN1255"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>hh</span><span class='Delimiter'>; 
</span><a name="LN1256"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>mm</span><span class='Delimiter'>, 
</span><a name="LN1257"></a>                <span class='Declare_Local'>ss</span><span class='Delimiter'>, 
</span><a name="LN1258"></a>                <span class='Declare_Local'>sign</span><span class='Delimiter'>; 
</span><a name="LN1259"></a>    <span class='Keyword'>char</span>        <span class='Declare_Local'>xs</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN1252"><span class='Ref_to_Parameter'>string</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL </span><span class='Operator'>|| *</span><a href="zic.c.html#LN1252"><span class='Ref_to_Parameter'>string</span></a> <span class='Operator'>== </span><span class='String'>'\0'</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="zic.c.html#LN1252"><span class='Ref_to_Parameter'>signable</span></a><span class='Parentheses'>) 
</span>        <a href="zic.c.html#LN1258"><span class='Ref_To_Local'>sign</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="zic.c.html#LN1252"><span class='Ref_to_Parameter'>string</span></a> <span class='Operator'>== </span><span class='String'>'-'</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="zic.c.html#LN1258"><span class='Ref_To_Local'>sign</span></a> <span class='Operator'>= -</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>        <span class='Operator'>++</span><a href="zic.c.html#LN1252"><span class='Ref_to_Parameter'>string</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
        <a href="zic.c.html#LN1258"><span class='Ref_To_Local'>sign</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span>sscanf<span class='Parentheses'>(</span><a href="zic.c.html#LN1252"><span class='Ref_to_Parameter'>string</span></a><span class='Delimiter'>, </span><span class='String'>"%d%c"</span><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="zic.c.html#LN1255"><span class='Ref_To_Local'>hh</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="zic.c.html#LN1259"><span class='Ref_To_Local'>xs</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>1</span><span class='Parentheses'>)</span> 
        <a href="zic.c.html#LN1256"><span class='Ref_To_Local'>mm</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN1257"><span class='Ref_To_Local'>ss</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span>sscanf<span class='Parentheses'>(</span><a href="zic.c.html#LN1252"><span class='Ref_to_Parameter'>string</span></a><span class='Delimiter'>, </span><span class='String'>"%d:%d%c"</span><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="zic.c.html#LN1255"><span class='Ref_To_Local'>hh</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="zic.c.html#LN1256"><span class='Ref_To_Local'>mm</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="zic.c.html#LN1259"><span class='Ref_To_Local'>xs</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>2</span><span class='Parentheses'>)</span> 
        <a href="zic.c.html#LN1257"><span class='Ref_To_Local'>ss</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span>sscanf<span class='Parentheses'>(</span><a href="zic.c.html#LN1252"><span class='Ref_to_Parameter'>string</span></a><span class='Delimiter'>, </span><span class='String'>"%d:%d:%d%c"</span><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="zic.c.html#LN1255"><span class='Ref_To_Local'>hh</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="zic.c.html#LN1256"><span class='Ref_To_Local'>mm</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="zic.c.html#LN1257"><span class='Ref_To_Local'>ss</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="zic.c.html#LN1259"><span class='Ref_To_Local'>xs</span></a><span class='Parentheses'>) 
</span>             <span class='Operator'>!= </span><span class='Number'>3</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../interfaces/ecpg/test/expected/sql-dyntest.c.html#LN145"><span class='Ref_to_Func'>error</span></a><span class='Parentheses'>(</span><span class='String'>"%s"</span><span class='Delimiter'>, </span><a href="zic.c.html#LN1252"><span class='Ref_to_Parameter'>errstring</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN1255"><span class='Ref_To_Local'>hh</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span> <span class='Operator'>|| 
</span>        <a href="zic.c.html#LN1256"><span class='Ref_To_Local'>mm</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span> <span class='Operator'>|| </span><a href="zic.c.html#LN1256"><span class='Ref_To_Local'>mm</span></a> <span class='Operator'>&GT;= </span><a href="private.h.html#LN107"><span class='Ref_to_Const'>MINSPERHOUR</span></a> <span class='Operator'>|| 
</span>        <a href="zic.c.html#LN1257"><span class='Ref_To_Local'>ss</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span> <span class='Operator'>|| </span><a href="zic.c.html#LN1257"><span class='Ref_To_Local'>ss</span></a> <span class='Operator'>&GT; </span><a href="private.h.html#LN106"><span class='Ref_to_Const'>SECSPERMIN</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../interfaces/ecpg/test/expected/sql-dyntest.c.html#LN145"><span class='Ref_to_Func'>error</span></a><span class='Parentheses'>(</span><span class='String'>"%s"</span><span class='Delimiter'>, </span><a href="zic.c.html#LN1252"><span class='Ref_to_Parameter'>errstring</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Comment_Multi_Line'>/* Some compilers warn that this test is unsatisfiable for 32-bit ints */ 
</span><span class='Directive'>#if</span> INT_MAX <span class='Operator'>&GT; </span><a href="../include/c.h.html#LN339"><span class='Ref_to_Const'>PG_INT32_MAX</span></a> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN25"><span class='Ref_to_Const'>ZIC_MAX</span></a> <span class='Operator'>/ </span><a href="private.h.html#LN112"><span class='Ref_to_Const'>SECSPERHOUR</span></a> <span class='Operator'>&LT; </span><a href="zic.c.html#LN1255"><span class='Ref_To_Local'>hh</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../interfaces/ecpg/test/expected/sql-dyntest.c.html#LN145"><span class='Ref_to_Func'>error</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"time overflow"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span><span class='Directive'>#endif</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN175"><span class='Ref_to_Global_Var'>noise</span></a> <span class='Operator'>&& </span><span class='Parentheses'>(</span><a href="zic.c.html#LN1255"><span class='Ref_To_Local'>hh</span></a> <span class='Operator'>&GT; </span><a href="private.h.html#LN108"><span class='Ref_to_Const'>HOURSPERDAY</span></a> <span class='Operator'>|| 
</span>                  <span class='Parentheses'>(</span><a href="zic.c.html#LN1255"><span class='Ref_To_Local'>hh</span></a> <span class='Operator'>== </span><a href="private.h.html#LN108"><span class='Ref_to_Const'>HOURSPERDAY</span></a> <span class='Operator'>&& </span><span class='Parentheses'>(</span><a href="zic.c.html#LN1256"><span class='Ref_To_Local'>mm</span></a> <span class='Operator'>!= </span><span class='Number'>0</span> <span class='Operator'>|| </span><a href="zic.c.html#LN1257"><span class='Ref_To_Local'>ss</span></a> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>))))</span> 
        <a href="zic.c.html#LN492"><span class='Ref_to_Func'>warning</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"values over 24 hours not handled by pre-2007 versions of zic"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="zic.c.html#LN3442"><span class='Ref_to_Func'>oadd</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN1258"><span class='Ref_To_Local'>sign</span></a> <span class='Operator'>* </span><span class='Parentheses'>(</span><a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a><span class='Parentheses'>) </span><a href="zic.c.html#LN1255"><span class='Ref_To_Local'>hh</span></a> <span class='Operator'>* </span><a href="private.h.html#LN112"><span class='Ref_to_Const'>SECSPERHOUR</span></a><span class='Delimiter'>, 
</span>                <a href="zic.c.html#LN1258"><span class='Ref_To_Local'>sign</span></a> <span class='Operator'>* </span><span class='Parentheses'>(</span><a href="zic.c.html#LN1256"><span class='Ref_To_Local'>mm</span></a> <span class='Operator'>* </span><a href="private.h.html#LN106"><span class='Ref_to_Const'>SECSPERMIN</span></a> <span class='Operator'>+ </span><a href="zic.c.html#LN1257"><span class='Ref_To_Local'>ss</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end gethms &raquo; </span> 
 
<span class='Keyword'>static void 
</span><a name="LN1305"></a><span class='Declare_Function'>inrule</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>**</span><span class='Declare_Parameter'>fields</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>nfields</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1307"></a>    <span class='Keyword'>static </span><span class='Control'>struct</span> <a href="localtime.c.html#LN81"><span class='Ref_to_Struct'>rule</span></a> <span class='Declare_Local'>r</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN1305"><span class='Ref_to_Parameter'>nfields</span></a> <span class='Operator'>!= </span><a href="zic.c.html#LN236"><span class='Ref_to_Const'>RULE_FIELDS</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../interfaces/ecpg/test/expected/sql-dyntest.c.html#LN145"><span class='Ref_to_Func'>error</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"wrong number of fields on Rule line"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="zic.c.html#LN1305"><span class='Ref_to_Parameter'>fields</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN227"><span class='Ref_to_Const'>RF_NAME</span></a><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='String'>'\0'</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../interfaces/ecpg/test/expected/sql-dyntest.c.html#LN145"><span class='Ref_to_Func'>error</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"nameless rule"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <a href="zic.c.html#LN1307"><span class='Ref_To_Local'>r</span></a><span class='Operator'>.</span><a href="zic.c.html#LN54"><span class='Ref_to_Member'>r_filename</span></a> <span class='Operator'>= </span><a href="../bin/pg_test_fsync/pg_test_fsync.c.html#LN67"><span class='Ref_to_Global_Var'>filename</span></a><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN1307"><span class='Ref_To_Local'>r</span></a><span class='Operator'>.</span><a href="zic.c.html#LN55"><span class='Ref_to_Member'>r_linenum</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN170"><span class='Ref_to_Global_Var'>linenum</span></a><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN1307"><span class='Ref_To_Local'>r</span></a><span class='Operator'>.</span><a href="zic.c.html#LN74"><span class='Ref_to_Member'>r_stdoff</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN1251"><span class='Ref_to_Func'>gethms</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN1305"><span class='Ref_to_Parameter'>fields</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN234"><span class='Ref_to_Const'>RF_STDOFF</span></a><span class='Delimiter'>], </span>_<span class='Parentheses'>(</span><span class='String'>"invalid saved time"</span><span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN1635"><span class='Ref_to_Func'>rulesub</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="zic.c.html#LN1307"><span class='Ref_To_Local'>r</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN1305"><span class='Ref_to_Parameter'>fields</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN228"><span class='Ref_to_Const'>RF_LOYEAR</span></a><span class='Delimiter'>], </span><a href="zic.c.html#LN1305"><span class='Ref_to_Parameter'>fields</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN229"><span class='Ref_to_Const'>RF_HIYEAR</span></a><span class='Delimiter'>], </span><a href="zic.c.html#LN1305"><span class='Ref_to_Parameter'>fields</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN230"><span class='Ref_to_Const'>RF_COMMAND</span></a><span class='Delimiter'>], 
</span>            <a href="zic.c.html#LN1305"><span class='Ref_to_Parameter'>fields</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN231"><span class='Ref_to_Const'>RF_MONTH</span></a><span class='Delimiter'>], </span><a href="zic.c.html#LN1305"><span class='Ref_to_Parameter'>fields</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN232"><span class='Ref_to_Const'>RF_DAY</span></a><span class='Delimiter'>], </span><a href="zic.c.html#LN1305"><span class='Ref_to_Parameter'>fields</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN233"><span class='Ref_to_Const'>RF_TOD</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN1307"><span class='Ref_To_Local'>r</span></a><span class='Operator'>.</span><a href="zic.c.html#LN56"><span class='Ref_to_Member'>r_name</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN424"><span class='Ref_to_Func'>ecpyalloc</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN1305"><span class='Ref_to_Parameter'>fields</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN227"><span class='Ref_to_Const'>RF_NAME</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN1307"><span class='Ref_To_Local'>r</span></a><span class='Operator'>.</span><a href="zic.c.html#LN75"><span class='Ref_to_Member'>r_abbrvar</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN424"><span class='Ref_to_Func'>ecpyalloc</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN1305"><span class='Ref_to_Parameter'>fields</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN235"><span class='Ref_to_Const'>RF_ABBRVAR</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN171"><span class='Ref_to_Global_Var'>max_abbrvar_len</span></a> <span class='Operator'>&LT; </span>strlen<span class='Parentheses'>(</span><a href="zic.c.html#LN1307"><span class='Ref_To_Local'>r</span></a><span class='Operator'>.</span><a href="zic.c.html#LN75"><span class='Ref_to_Member'>r_abbrvar</span></a><span class='Parentheses'>))</span> 
        <a href="zic.c.html#LN171"><span class='Ref_to_Global_Var'>max_abbrvar_len</span></a> <span class='Operator'>= </span>strlen<span class='Parentheses'>(</span><a href="zic.c.html#LN1307"><span class='Ref_To_Local'>r</span></a><span class='Operator'>.</span><a href="zic.c.html#LN75"><span class='Ref_to_Member'>r_abbrvar</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN266"><span class='Ref_to_Global_Var'>rules</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN430"><span class='Ref_to_Func'>growalloc</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN266"><span class='Ref_to_Global_Var'>rules</span></a><span class='Delimiter'>, </span><span class='Keyword'>sizeof </span><span class='Operator'>*</span><a href="zic.c.html#LN266"><span class='Ref_to_Global_Var'>rules</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN267"><span class='Ref_to_Global_Var'>nrules</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="zic.c.html#LN268"><span class='Ref_to_Global_Var'>nrules_alloc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN266"><span class='Ref_to_Global_Var'>rules</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN267"><span class='Ref_to_Global_Var'>nrules</span></a><span class='Operator'>++</span><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="zic.c.html#LN1307"><span class='Ref_To_Local'>r</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end inrule &raquo; </span> 
 
<span class='Keyword'>static bool 
</span><a name="LN1333"></a><span class='Declare_Function'>inzone</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>**</span><span class='Declare_Parameter'>fields</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>nfields</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1335"></a>    ptrdiff_t   <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN1333"><span class='Ref_to_Parameter'>nfields</span></a> <span class='Operator'>&LT; </span><a href="zic.c.html#LN206"><span class='Ref_to_Const'>ZONE_MINFIELDS</span></a> <span class='Operator'>|| </span><a href="zic.c.html#LN1333"><span class='Ref_to_Parameter'>nfields</span></a> <span class='Operator'>&GT; </span><a href="zic.c.html#LN207"><span class='Ref_to_Const'>ZONE_MAXFIELDS</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../interfaces/ecpg/test/expected/sql-dyntest.c.html#LN145"><span class='Ref_to_Func'>error</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"wrong number of fields on Zone line"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="zic.c.html#LN1333"><span class='Ref_to_Parameter'>fields</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN198"><span class='Ref_to_Const'>ZF_NAME</span></a><span class='Delimiter'>], </span><a href="tzfile.h.html#LN23"><span class='Ref_to_Const'>TZDEFAULT</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span> <span class='Operator'>&& </span><a href="zic.c.html#LN559"><span class='Ref_to_Global_Var'>lcltime</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../interfaces/ecpg/test/expected/sql-dyntest.c.html#LN145"><span class='Ref_to_Func'>error</span></a><span class='Parentheses'>(</span> 
              _<span class='Parentheses'>(</span><span class='String'>"\"Zone %s\" line and -l option are mutually exclusive"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>              <a href="tzfile.h.html#LN23"><span class='Ref_to_Const'>TZDEFAULT</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="zic.c.html#LN1333"><span class='Ref_to_Parameter'>fields</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN198"><span class='Ref_to_Const'>ZF_NAME</span></a><span class='Delimiter'>], </span><a href="tzfile.h.html#LN24"><span class='Ref_to_Const'>TZDEFRULES</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span> <span class='Operator'>&& </span><a href="zic.c.html#LN558"><span class='Ref_to_Global_Var'>psxrules</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../interfaces/ecpg/test/expected/sql-dyntest.c.html#LN145"><span class='Ref_to_Func'>error</span></a><span class='Parentheses'>(</span> 
              _<span class='Parentheses'>(</span><span class='String'>"\"Zone %s\" line and -p option are mutually exclusive"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>              <a href="tzfile.h.html#LN24"><span class='Ref_to_Const'>TZDEFRULES</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN1335"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="zic.c.html#LN1335"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="zic.c.html#LN271"><span class='Ref_to_Global_Var'>nzones</span></a><span class='Delimiter'>; </span><span class='Operator'>++</span><a href="zic.c.html#LN1335"><span class='Ref_To_Local'>i</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN270"><span class='Ref_to_Global_Var'>zones</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1335"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="zic.c.html#LN94"><span class='Ref_to_Member'>z_name</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL </span><span class='Operator'>&& 
</span>            strcmp<span class='Parentheses'>(</span><a href="zic.c.html#LN270"><span class='Ref_to_Global_Var'>zones</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1335"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="zic.c.html#LN94"><span class='Ref_to_Member'>z_name</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN1333"><span class='Ref_to_Parameter'>fields</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN198"><span class='Ref_to_Const'>ZF_NAME</span></a><span class='Delimiter'>]</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <span class='Delimiter'>{ 
</span>            <a href="../interfaces/ecpg/test/expected/sql-dyntest.c.html#LN145"><span class='Ref_to_Func'>error</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"duplicate zone name %s"</span> 
                    <span class='String'>" (file \"%s\", line %"</span> <a href="zic.c.html#LN50"><span class='Ref_to_Const'>PRIdLINENO</span></a> <span class='String'>")"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                  <a href="zic.c.html#LN1333"><span class='Ref_to_Parameter'>fields</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN198"><span class='Ref_to_Const'>ZF_NAME</span></a><span class='Delimiter'>], 
</span>                  <a href="zic.c.html#LN270"><span class='Ref_to_Global_Var'>zones</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1335"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="zic.c.html#LN91"><span class='Ref_to_Member'>z_filename</span></a><span class='Delimiter'>, 
</span>                  <a href="zic.c.html#LN270"><span class='Ref_to_Global_Var'>zones</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1335"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="zic.c.html#LN92"><span class='Ref_to_Member'>z_linenum</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Control'>return</span> <a href="zic.c.html#LN1381"><span class='Ref_to_Func'>inzsub</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN1333"><span class='Ref_to_Parameter'>fields</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN1333"><span class='Ref_to_Parameter'>nfields</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end inzone &raquo; </span> 
 
<span class='Keyword'>static bool 
</span><a name="LN1371"></a><span class='Declare_Function'>inzcont</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>**</span><span class='Declare_Parameter'>fields</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>nfields</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN1371"><span class='Ref_to_Parameter'>nfields</span></a> <span class='Operator'>&LT; </span><a href="zic.c.html#LN220"><span class='Ref_to_Const'>ZONEC_MINFIELDS</span></a> <span class='Operator'>|| </span><a href="zic.c.html#LN1371"><span class='Ref_to_Parameter'>nfields</span></a> <span class='Operator'>&GT; </span><a href="zic.c.html#LN221"><span class='Ref_to_Const'>ZONEC_MAXFIELDS</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../interfaces/ecpg/test/expected/sql-dyntest.c.html#LN145"><span class='Ref_to_Func'>error</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"wrong number of fields on Zone continuation line"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>return</span> <a href="zic.c.html#LN1381"><span class='Ref_to_Func'>inzsub</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN1371"><span class='Ref_to_Parameter'>fields</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN1371"><span class='Ref_to_Parameter'>nfields</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Keyword'>static bool 
</span><a name="LN1382"></a><span class='Declare_Function'>inzsub</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>**</span><span class='Declare_Parameter'>fields</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>nfields</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>iscont</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1384"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>cp</span><span class='Delimiter'>; 
</span><a name="LN1385"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>cp1</span><span class='Delimiter'>; 
</span><a name="LN1386"></a>    <span class='Keyword'>static </span><span class='Control'>struct</span> <a href="zic.c.html#LN89"><span class='Ref_to_Struct'>zone</span></a> <span class='Declare_Local'>z</span><span class='Delimiter'>; 
</span><a name="LN1387"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_gmtoff</span><span class='Delimiter'>, 
</span><a name="LN1388"></a>                <span class='Declare_Local'>i_rule</span><span class='Delimiter'>, 
</span><a name="LN1389"></a>                <span class='Declare_Local'>i_format</span><span class='Delimiter'>; 
</span><a name="LN1390"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_untilyear</span><span class='Delimiter'>, 
</span><a name="LN1391"></a>                <span class='Declare_Local'>i_untilmonth</span><span class='Delimiter'>; 
</span><a name="LN1392"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_untilday</span><span class='Delimiter'>, 
</span><a name="LN1393"></a>                <span class='Declare_Local'>i_untiltime</span><span class='Delimiter'>; 
</span><a name="LN1394"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>hasuntil</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN1382"><span class='Ref_to_Parameter'>iscont</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="zic.c.html#LN1387"><span class='Ref_To_Local'>i_gmtoff</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN213"><span class='Ref_to_Const'>ZFC_GMTOFF</span></a><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN1388"><span class='Ref_To_Local'>i_rule</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN214"><span class='Ref_to_Const'>ZFC_RULE</span></a><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN1389"><span class='Ref_To_Local'>i_format</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN215"><span class='Ref_to_Const'>ZFC_FORMAT</span></a><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN1390"><span class='Ref_To_Local'>i_untilyear</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN216"><span class='Ref_to_Const'>ZFC_TILYEAR</span></a><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN1391"><span class='Ref_To_Local'>i_untilmonth</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN217"><span class='Ref_to_Const'>ZFC_TILMONTH</span></a><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN1392"><span class='Ref_To_Local'>i_untilday</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN218"><span class='Ref_to_Const'>ZFC_TILDAY</span></a><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN1393"><span class='Ref_To_Local'>i_untiltime</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN219"><span class='Ref_to_Const'>ZFC_TILTIME</span></a><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN1386"><span class='Ref_To_Local'>z</span></a><span class='Operator'>.</span><a href="zic.c.html#LN94"><span class='Ref_to_Member'>z_name</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="zic.c.html#LN765"><span class='Ref_to_Func'>namecheck</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN1382"><span class='Ref_to_Parameter'>fields</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN198"><span class='Ref_to_Const'>ZF_NAME</span></a><span class='Delimiter'>]</span><span class='Parentheses'>))</span> 
        <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <a href="zic.c.html#LN1387"><span class='Ref_To_Local'>i_gmtoff</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN199"><span class='Ref_to_Const'>ZF_GMTOFF</span></a><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN1388"><span class='Ref_To_Local'>i_rule</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN200"><span class='Ref_to_Const'>ZF_RULE</span></a><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN1389"><span class='Ref_To_Local'>i_format</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN201"><span class='Ref_to_Const'>ZF_FORMAT</span></a><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN1390"><span class='Ref_To_Local'>i_untilyear</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN202"><span class='Ref_to_Const'>ZF_TILYEAR</span></a><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN1391"><span class='Ref_To_Local'>i_untilmonth</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN203"><span class='Ref_to_Const'>ZF_TILMONTH</span></a><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN1392"><span class='Ref_To_Local'>i_untilday</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN204"><span class='Ref_to_Const'>ZF_TILDAY</span></a><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN1393"><span class='Ref_To_Local'>i_untiltime</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN205"><span class='Ref_to_Const'>ZF_TILTIME</span></a><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN1386"><span class='Ref_To_Local'>z</span></a><span class='Operator'>.</span><a href="zic.c.html#LN94"><span class='Ref_to_Member'>z_name</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN424"><span class='Ref_to_Func'>ecpyalloc</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN1382"><span class='Ref_to_Parameter'>fields</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN198"><span class='Ref_to_Const'>ZF_NAME</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <a href="zic.c.html#LN1386"><span class='Ref_To_Local'>z</span></a><span class='Operator'>.</span><a href="zic.c.html#LN91"><span class='Ref_to_Member'>z_filename</span></a> <span class='Operator'>= </span><a href="../bin/pg_test_fsync/pg_test_fsync.c.html#LN67"><span class='Ref_to_Global_Var'>filename</span></a><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN1386"><span class='Ref_To_Local'>z</span></a><span class='Operator'>.</span><a href="zic.c.html#LN92"><span class='Ref_to_Member'>z_linenum</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN170"><span class='Ref_to_Global_Var'>linenum</span></a><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN1386"><span class='Ref_To_Local'>z</span></a><span class='Operator'>.</span><a href="zic.c.html#LN95"><span class='Ref_to_Member'>z_gmtoff</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN1251"><span class='Ref_to_Func'>gethms</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN1382"><span class='Ref_to_Parameter'>fields</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1387"><span class='Ref_To_Local'>i_gmtoff</span></a><span class='Delimiter'>], </span>_<span class='Parentheses'>(</span><span class='String'>"invalid UT offset"</span><span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="zic.c.html#LN1384"><span class='Ref_To_Local'>cp</span></a> <span class='Operator'>= </span>strchr<span class='Parentheses'>(</span><a href="zic.c.html#LN1382"><span class='Ref_to_Parameter'>fields</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1389"><span class='Ref_To_Local'>i_format</span></a><span class='Delimiter'>], </span><span class='String'>'%'</span><span class='Parentheses'>))</span> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>((</span><span class='Operator'>*++</span><a href="zic.c.html#LN1384"><span class='Ref_To_Local'>cp</span></a> <span class='Operator'>!= </span><span class='String'>'s'</span> <span class='Operator'>&& *</span><a href="zic.c.html#LN1384"><span class='Ref_To_Local'>cp</span></a> <span class='Operator'>!= </span><span class='String'>'z'</span><span class='Parentheses'>) </span><span class='Operator'>|| </span>strchr<span class='Parentheses'>(</span><a href="zic.c.html#LN1384"><span class='Ref_To_Local'>cp</span></a><span class='Delimiter'>, </span><span class='String'>'%'</span><span class='Parentheses'>) 
</span>            <span class='Operator'>|| </span>strchr<span class='Parentheses'>(</span><a href="zic.c.html#LN1382"><span class='Ref_to_Parameter'>fields</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1389"><span class='Ref_To_Local'>i_format</span></a><span class='Delimiter'>], </span><span class='String'>'/'</span><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span>            <a href="../interfaces/ecpg/test/expected/sql-dyntest.c.html#LN145"><span class='Ref_to_Func'>error</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"invalid abbreviation format"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span>    <a href="zic.c.html#LN1386"><span class='Ref_To_Local'>z</span></a><span class='Operator'>.</span><a href="zic.c.html#LN96"><span class='Ref_to_Member'>z_rule</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN424"><span class='Ref_to_Func'>ecpyalloc</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN1382"><span class='Ref_to_Parameter'>fields</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1388"><span class='Ref_To_Local'>i_rule</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN1386"><span class='Ref_To_Local'>z</span></a><span class='Operator'>.</span><a href="zic.c.html#LN97"><span class='Ref_to_Member'>z_format</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN1385"><span class='Ref_To_Local'>cp1</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN424"><span class='Ref_to_Func'>ecpyalloc</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN1382"><span class='Ref_to_Parameter'>fields</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1389"><span class='Ref_To_Local'>i_format</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN1386"><span class='Ref_To_Local'>z</span></a><span class='Operator'>.</span><a href="zic.c.html#LN98"><span class='Ref_to_Member'>z_format_specifier</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN1384"><span class='Ref_To_Local'>cp</span></a> <span class='Operator'>? *</span><a href="zic.c.html#LN1384"><span class='Ref_To_Local'>cp</span></a> <span class='Operator'>: </span><span class='String'>'\0'</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN1386"><span class='Ref_To_Local'>z</span></a><span class='Operator'>.</span><a href="zic.c.html#LN98"><span class='Ref_to_Member'>z_format_specifier</span></a> <span class='Operator'>== </span><span class='String'>'z'</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN175"><span class='Ref_to_Global_Var'>noise</span></a><span class='Parentheses'>) 
</span>            <a href="zic.c.html#LN492"><span class='Ref_to_Func'>warning</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"format '%s' not handled by pre-2015 versions of zic"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                    <a href="zic.c.html#LN1386"><span class='Ref_To_Local'>z</span></a><span class='Operator'>.</span><a href="zic.c.html#LN97"><span class='Ref_to_Member'>z_format</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN1385"><span class='Ref_To_Local'>cp1</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1384"><span class='Ref_To_Local'>cp</span></a> <span class='Operator'>- </span><a href="zic.c.html#LN1382"><span class='Ref_to_Parameter'>fields</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1389"><span class='Ref_To_Local'>i_format</span></a><span class='Delimiter'>]] </span><span class='Operator'>= </span><span class='String'>'s'</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN172"><span class='Ref_to_Global_Var'>max_format_len</span></a> <span class='Operator'>&LT; </span>strlen<span class='Parentheses'>(</span><a href="zic.c.html#LN1386"><span class='Ref_To_Local'>z</span></a><span class='Operator'>.</span><a href="zic.c.html#LN97"><span class='Ref_to_Member'>z_format</span></a><span class='Parentheses'>))</span> 
        <a href="zic.c.html#LN172"><span class='Ref_to_Global_Var'>max_format_len</span></a> <span class='Operator'>= </span>strlen<span class='Parentheses'>(</span><a href="zic.c.html#LN1386"><span class='Ref_To_Local'>z</span></a><span class='Operator'>.</span><a href="zic.c.html#LN97"><span class='Ref_to_Member'>z_format</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN1394"><span class='Ref_To_Local'>hasuntil</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN1382"><span class='Ref_to_Parameter'>nfields</span></a> <span class='Operator'>&GT; </span><a href="zic.c.html#LN1390"><span class='Ref_To_Local'>i_untilyear</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN1394"><span class='Ref_To_Local'>hasuntil</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="zic.c.html#LN1386"><span class='Ref_To_Local'>z</span></a><span class='Operator'>.</span><a href="zic.c.html#LN105"><span class='Ref_to_Member'>z_untilrule</span></a><span class='Operator'>.</span><a href="zic.c.html#LN54"><span class='Ref_to_Member'>r_filename</span></a> <span class='Operator'>= </span><a href="../bin/pg_test_fsync/pg_test_fsync.c.html#LN67"><span class='Ref_to_Global_Var'>filename</span></a><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN1386"><span class='Ref_To_Local'>z</span></a><span class='Operator'>.</span><a href="zic.c.html#LN105"><span class='Ref_to_Member'>z_untilrule</span></a><span class='Operator'>.</span><a href="zic.c.html#LN55"><span class='Ref_to_Member'>r_linenum</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN170"><span class='Ref_to_Global_Var'>linenum</span></a><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN1635"><span class='Ref_to_Func'>rulesub</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="zic.c.html#LN1386"><span class='Ref_To_Local'>z</span></a><span class='Operator'>.</span><a href="zic.c.html#LN105"><span class='Ref_to_Member'>z_untilrule</span></a><span class='Delimiter'>, 
</span>                <a href="zic.c.html#LN1382"><span class='Ref_to_Parameter'>fields</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1390"><span class='Ref_To_Local'>i_untilyear</span></a><span class='Delimiter'>], 
</span>                <span class='String'>"only"</span><span class='Delimiter'>, 
</span>                <span class='String'>""</span><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="zic.c.html#LN1382"><span class='Ref_to_Parameter'>nfields</span></a> <span class='Operator'>&GT; </span><a href="zic.c.html#LN1391"><span class='Ref_To_Local'>i_untilmonth</span></a><span class='Parentheses'>) </span><span class='Operator'>? 
</span>                <a href="zic.c.html#LN1382"><span class='Ref_to_Parameter'>fields</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1391"><span class='Ref_To_Local'>i_untilmonth</span></a><span class='Delimiter'>] </span><span class='Operator'>: </span><span class='String'>"Jan"</span><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="zic.c.html#LN1382"><span class='Ref_to_Parameter'>nfields</span></a> <span class='Operator'>&GT; </span><a href="zic.c.html#LN1392"><span class='Ref_To_Local'>i_untilday</span></a><span class='Parentheses'>) </span><span class='Operator'>? </span><a href="zic.c.html#LN1382"><span class='Ref_to_Parameter'>fields</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1392"><span class='Ref_To_Local'>i_untilday</span></a><span class='Delimiter'>] </span><span class='Operator'>: </span><span class='String'>"1"</span><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="zic.c.html#LN1382"><span class='Ref_to_Parameter'>nfields</span></a> <span class='Operator'>&GT; </span><a href="zic.c.html#LN1393"><span class='Ref_To_Local'>i_untiltime</span></a><span class='Parentheses'>) </span><span class='Operator'>? </span><a href="zic.c.html#LN1382"><span class='Ref_to_Parameter'>fields</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1393"><span class='Ref_To_Local'>i_untiltime</span></a><span class='Delimiter'>] </span><span class='Operator'>: </span><span class='String'>"0"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN1386"><span class='Ref_To_Local'>z</span></a><span class='Operator'>.</span><a href="zic.c.html#LN106"><span class='Ref_to_Member'>z_untiltime</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN3479"><span class='Ref_to_Func'>rpytime</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="zic.c.html#LN1386"><span class='Ref_To_Local'>z</span></a><span class='Operator'>.</span><a href="zic.c.html#LN105"><span class='Ref_to_Member'>z_untilrule</span></a><span class='Delimiter'>, 
</span>                                <a href="zic.c.html#LN1386"><span class='Ref_To_Local'>z</span></a><span class='Operator'>.</span><a href="zic.c.html#LN105"><span class='Ref_to_Member'>z_untilrule</span></a><span class='Operator'>.</span><a href="zic.c.html#LN58"><span class='Ref_to_Member'>r_loyear</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN1382"><span class='Ref_to_Parameter'>iscont</span></a> <span class='Operator'>&& </span><a href="zic.c.html#LN271"><span class='Ref_to_Global_Var'>nzones</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span> <span class='Operator'>&& 
</span>            <a href="zic.c.html#LN1386"><span class='Ref_To_Local'>z</span></a><span class='Operator'>.</span><a href="zic.c.html#LN106"><span class='Ref_to_Member'>z_untiltime</span></a> <span class='Operator'>&GT; </span><a href="zic.c.html#LN964"><span class='Ref_to_Global_Var'>min_time</span></a> <span class='Operator'>&& 
</span>            <a href="zic.c.html#LN1386"><span class='Ref_To_Local'>z</span></a><span class='Operator'>.</span><a href="zic.c.html#LN106"><span class='Ref_to_Member'>z_untiltime</span></a> <span class='Operator'>&LT; </span><a href="zic.c.html#LN965"><span class='Ref_to_Global_Var'>max_time</span></a> <span class='Operator'>&& 
</span>            <a href="zic.c.html#LN270"><span class='Ref_to_Global_Var'>zones</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN271"><span class='Ref_to_Global_Var'>nzones</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="zic.c.html#LN106"><span class='Ref_to_Member'>z_untiltime</span></a> <span class='Operator'>&GT; </span><a href="zic.c.html#LN964"><span class='Ref_to_Global_Var'>min_time</span></a> <span class='Operator'>&& 
</span>            <a href="zic.c.html#LN270"><span class='Ref_to_Global_Var'>zones</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN271"><span class='Ref_to_Global_Var'>nzones</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="zic.c.html#LN106"><span class='Ref_to_Member'>z_untiltime</span></a> <span class='Operator'>&LT; </span><a href="zic.c.html#LN965"><span class='Ref_to_Global_Var'>max_time</span></a> <span class='Operator'>&& 
</span>            <a href="zic.c.html#LN270"><span class='Ref_to_Global_Var'>zones</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN271"><span class='Ref_to_Global_Var'>nzones</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="zic.c.html#LN106"><span class='Ref_to_Member'>z_untiltime</span></a> <span class='Operator'>&GT;= </span><a href="zic.c.html#LN1386"><span class='Ref_To_Local'>z</span></a><span class='Operator'>.</span><a href="zic.c.html#LN106"><span class='Ref_to_Member'>z_untiltime</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="../interfaces/ecpg/test/expected/sql-dyntest.c.html#LN145"><span class='Ref_to_Func'>error</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"Zone continuation line end time is not after end time of previous line"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if hasuntil &raquo; </span> 
    <a href="zic.c.html#LN270"><span class='Ref_to_Global_Var'>zones</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN430"><span class='Ref_to_Func'>growalloc</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN270"><span class='Ref_to_Global_Var'>zones</span></a><span class='Delimiter'>, </span><span class='Keyword'>sizeof </span><span class='Operator'>*</span><a href="zic.c.html#LN270"><span class='Ref_to_Global_Var'>zones</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN271"><span class='Ref_to_Global_Var'>nzones</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="zic.c.html#LN272"><span class='Ref_to_Global_Var'>nzones_alloc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN270"><span class='Ref_to_Global_Var'>zones</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN271"><span class='Ref_to_Global_Var'>nzones</span></a><span class='Operator'>++</span><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="zic.c.html#LN1386"><span class='Ref_To_Local'>z</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * If there was an UNTIL field on this line, there's more information 
     * about the zone on the next line. 
     */ 
</span>    <span class='Control'>return</span> <a href="zic.c.html#LN1394"><span class='Ref_To_Local'>hasuntil</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end inzsub &raquo; </span> 
 
<span class='Keyword'>static void 
</span><a name="LN1481"></a><span class='Declare_Function'>inleap</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>**</span><span class='Declare_Parameter'>fields</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>nfields</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1483"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>cp</span><span class='Delimiter'>; 
</span><a name="LN1484"></a>    <span class='Keyword'>const </span><span class='Control'>struct</span> <a href="zic.c.html#LN286"><span class='Ref_to_Struct'>lookup</span></a> <span class='Operator'>*</span><span class='Declare_Local'>lp</span><span class='Delimiter'>; 
</span><a name="LN1485"></a>    <a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a>       <span class='Declare_Local'>i</span><span class='Delimiter'>, 
</span><a name="LN1486"></a>                <span class='Declare_Local'>j</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* PG: make year be int not zic_t to avoid sscanf portability issues */ 
</span><a name="LN1489"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>year</span><span class='Delimiter'>; 
</span><a name="LN1490"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>month</span><span class='Delimiter'>, 
</span><a name="LN1491"></a>                <span class='Declare_Local'>day</span><span class='Delimiter'>; 
</span><a name="LN1492"></a>    <a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a>       <span class='Declare_Local'>dayoff</span><span class='Delimiter'>, 
</span><a name="LN1493"></a>                <span class='Declare_Local'>tod</span><span class='Delimiter'>; 
</span><a name="LN1494"></a>    <a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a>       <span class='Declare_Local'>t</span><span class='Delimiter'>; 
</span><a name="LN1495"></a>    <span class='Keyword'>char</span>        <span class='Declare_Local'>xs</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN1481"><span class='Ref_to_Parameter'>nfields</span></a> <span class='Operator'>!= </span><a href="zic.c.html#LN256"><span class='Ref_to_Const'>LEAP_FIELDS</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../interfaces/ecpg/test/expected/sql-dyntest.c.html#LN145"><span class='Ref_to_Func'>error</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"wrong number of fields on Leap line"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <a href="zic.c.html#LN1492"><span class='Ref_To_Local'>dayoff</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN1483"><span class='Ref_To_Local'>cp</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN1481"><span class='Ref_to_Parameter'>fields</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN250"><span class='Ref_to_Const'>LP_YEAR</span></a><span class='Delimiter'>]; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span>sscanf<span class='Parentheses'>(</span><a href="zic.c.html#LN1483"><span class='Ref_To_Local'>cp</span></a><span class='Delimiter'>, </span><span class='String'>"%d%c"</span><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="zic.c.html#LN1489"><span class='Ref_To_Local'>year</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="zic.c.html#LN1495"><span class='Ref_To_Local'>xs</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>1</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * Leapin' Lizards! 
         */ 
</span>        <a href="../interfaces/ecpg/test/expected/sql-dyntest.c.html#LN145"><span class='Ref_to_Func'>error</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"invalid leaping year"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="zic.c.html#LN167"><span class='Ref_to_Global_Var'>leapseen</span></a> <span class='Operator'>|| </span><a href="zic.c.html#LN169"><span class='Ref_to_Global_Var'>leapmaxyear</span></a> <span class='Operator'>&LT; </span><a href="zic.c.html#LN1489"><span class='Ref_To_Local'>year</span></a><span class='Parentheses'>) 
</span>        <a href="zic.c.html#LN169"><span class='Ref_to_Global_Var'>leapmaxyear</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN1489"><span class='Ref_To_Local'>year</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="zic.c.html#LN167"><span class='Ref_to_Global_Var'>leapseen</span></a> <span class='Operator'>|| </span><a href="zic.c.html#LN168"><span class='Ref_to_Global_Var'>leapminyear</span></a> <span class='Operator'>&GT; </span><a href="zic.c.html#LN1489"><span class='Ref_To_Local'>year</span></a><span class='Parentheses'>) 
</span>        <a href="zic.c.html#LN168"><span class='Ref_to_Global_Var'>leapminyear</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN1489"><span class='Ref_To_Local'>year</span></a><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN167"><span class='Ref_to_Global_Var'>leapseen</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN1486"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>= </span><a href="private.h.html#LN139"><span class='Ref_to_Const'>EPOCH_YEAR</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN1486"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>!= </span><a href="zic.c.html#LN1489"><span class='Ref_To_Local'>year</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN1489"><span class='Ref_To_Local'>year</span></a> <span class='Operator'>&GT; </span><a href="zic.c.html#LN1486"><span class='Ref_To_Local'>j</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="zic.c.html#LN1485"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN365"><span class='Ref_to_Global_Var'>len_years</span></a><span class='Delimiter'>[</span><a href="private.h.html#LN142"><span class='Ref_to_Macro'>isleap</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN1486"><span class='Ref_To_Local'>j</span></a><span class='Parentheses'>)</span><span class='Delimiter'>]; 
</span>            <span class='Operator'>++</span><a href="zic.c.html#LN1486"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Operator'>--</span><a href="zic.c.html#LN1486"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>; 
</span>            <a href="zic.c.html#LN1485"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= -</span><a href="zic.c.html#LN365"><span class='Ref_to_Global_Var'>len_years</span></a><span class='Delimiter'>[</span><a href="private.h.html#LN142"><span class='Ref_to_Macro'>isleap</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN1486"><span class='Ref_To_Local'>j</span></a><span class='Parentheses'>)</span><span class='Delimiter'>]; 
</span>        <span class='Delimiter'>} 
</span>        <a href="zic.c.html#LN1492"><span class='Ref_To_Local'>dayoff</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN3442"><span class='Ref_to_Func'>oadd</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN1492"><span class='Ref_To_Local'>dayoff</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN1485"><span class='Ref_To_Local'>i</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="zic.c.html#LN1484"><span class='Ref_To_Local'>lp</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN292"><span class='Ref_to_Proto'>byword</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN1481"><span class='Ref_to_Parameter'>fields</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN251"><span class='Ref_to_Const'>LP_MONTH</span></a><span class='Delimiter'>], </span><a href="zic.c.html#LN303"><span class='Ref_to_Global_Var'>mon_names</span></a><span class='Parentheses'>))</span> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../interfaces/ecpg/test/expected/sql-dyntest.c.html#LN145"><span class='Ref_to_Func'>error</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"invalid month name"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <a href="zic.c.html#LN1490"><span class='Ref_To_Local'>month</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN1484"><span class='Ref_To_Local'>lp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN289"><span class='Ref_to_Member'>l_value</span></a><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN1486"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>= </span><a href="private.h.html#LN124"><span class='Ref_to_Const'>TM_JANUARY</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN1486"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>!= </span><a href="zic.c.html#LN1490"><span class='Ref_To_Local'>month</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="zic.c.html#LN1485"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN360"><span class='Ref_to_Global_Var'>len_months</span></a><span class='Delimiter'>[</span><a href="private.h.html#LN142"><span class='Ref_to_Macro'>isleap</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN1489"><span class='Ref_To_Local'>year</span></a><span class='Parentheses'>)</span><span class='Delimiter'>][</span><a href="zic.c.html#LN1486"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]; 
</span>        <a href="zic.c.html#LN1492"><span class='Ref_To_Local'>dayoff</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN3442"><span class='Ref_to_Func'>oadd</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN1492"><span class='Ref_To_Local'>dayoff</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN1485"><span class='Ref_To_Local'>i</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Operator'>++</span><a href="zic.c.html#LN1486"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <a href="zic.c.html#LN1483"><span class='Ref_To_Local'>cp</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN1481"><span class='Ref_to_Parameter'>fields</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN252"><span class='Ref_to_Const'>LP_DAY</span></a><span class='Delimiter'>]; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span>sscanf<span class='Parentheses'>(</span><a href="zic.c.html#LN1483"><span class='Ref_To_Local'>cp</span></a><span class='Delimiter'>, </span><span class='String'>"%d%c"</span><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="zic.c.html#LN1491"><span class='Ref_To_Local'>day</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="zic.c.html#LN1495"><span class='Ref_To_Local'>xs</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>1</span> <span class='Operator'>|| 
</span>        <a href="zic.c.html#LN1491"><span class='Ref_To_Local'>day</span></a> <span class='Operator'>&LT;= </span><span class='Number'>0</span> <span class='Operator'>|| </span><a href="zic.c.html#LN1491"><span class='Ref_To_Local'>day</span></a> <span class='Operator'>&GT; </span><a href="zic.c.html#LN360"><span class='Ref_to_Global_Var'>len_months</span></a><span class='Delimiter'>[</span><a href="private.h.html#LN142"><span class='Ref_to_Macro'>isleap</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN1489"><span class='Ref_To_Local'>year</span></a><span class='Parentheses'>)</span><span class='Delimiter'>][</span><a href="zic.c.html#LN1490"><span class='Ref_To_Local'>month</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../interfaces/ecpg/test/expected/sql-dyntest.c.html#LN145"><span class='Ref_to_Func'>error</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"invalid day of month"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <a href="zic.c.html#LN1492"><span class='Ref_To_Local'>dayoff</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN3442"><span class='Ref_to_Func'>oadd</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN1492"><span class='Ref_To_Local'>dayoff</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN1491"><span class='Ref_To_Local'>day</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN1492"><span class='Ref_To_Local'>dayoff</span></a> <span class='Operator'>&LT; </span><a href="zic.c.html#LN964"><span class='Ref_to_Global_Var'>min_time</span></a> <span class='Operator'>/ </span><a href="private.h.html#LN113"><span class='Ref_to_Const'>SECSPERDAY</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../interfaces/ecpg/test/expected/sql-dyntest.c.html#LN145"><span class='Ref_to_Func'>error</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"time too small"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN1492"><span class='Ref_To_Local'>dayoff</span></a> <span class='Operator'>&GT; </span><a href="zic.c.html#LN965"><span class='Ref_to_Global_Var'>max_time</span></a> <span class='Operator'>/ </span><a href="private.h.html#LN113"><span class='Ref_to_Const'>SECSPERDAY</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../interfaces/ecpg/test/expected/sql-dyntest.c.html#LN145"><span class='Ref_to_Func'>error</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"time too large"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <a href="zic.c.html#LN1494"><span class='Ref_To_Local'>t</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN1492"><span class='Ref_To_Local'>dayoff</span></a> <span class='Operator'>* </span><a href="private.h.html#LN113"><span class='Ref_to_Const'>SECSPERDAY</span></a><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN1493"><span class='Ref_To_Local'>tod</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN1251"><span class='Ref_to_Func'>gethms</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN1481"><span class='Ref_to_Parameter'>fields</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN253"><span class='Ref_to_Const'>LP_TIME</span></a><span class='Delimiter'>], </span>_<span class='Parentheses'>(</span><span class='String'>"invalid time of day"</span><span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN1483"><span class='Ref_To_Local'>cp</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN1481"><span class='Ref_to_Parameter'>fields</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN254"><span class='Ref_to_Const'>LP_CORR</span></a><span class='Delimiter'>]; 
</span>    <span class='Delimiter'>{ 
</span><a name="LN1567"></a>        <span class='Keyword'>bool</span>        <span class='Declare_Local'>positive</span><span class='Delimiter'>; 
</span><a name="LN1568"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>count</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="zic.c.html#LN1483"><span class='Ref_To_Local'>cp</span></a><span class='Delimiter'>, </span><span class='String'>""</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <span class='Delimiter'>{</span>                       <span class='Comment_Single_Line'>/* infile() turns "-" into "" */ 
</span>            <a href="zic.c.html#LN1567"><span class='Ref_To_Local'>positive</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>            <a href="zic.c.html#LN1568"><span class='Ref_To_Local'>count</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="zic.c.html#LN1483"><span class='Ref_To_Local'>cp</span></a><span class='Delimiter'>, </span><span class='String'>"--"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <span class='Delimiter'>{ 
</span>            <a href="zic.c.html#LN1567"><span class='Ref_To_Local'>positive</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>            <a href="zic.c.html#LN1568"><span class='Ref_To_Local'>count</span></a> <span class='Operator'>= </span><span class='Number'>2</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="zic.c.html#LN1483"><span class='Ref_To_Local'>cp</span></a><span class='Delimiter'>, </span><span class='String'>"+"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <span class='Delimiter'>{ 
</span>            <a href="zic.c.html#LN1567"><span class='Ref_To_Local'>positive</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>            <a href="zic.c.html#LN1568"><span class='Ref_To_Local'>count</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="zic.c.html#LN1483"><span class='Ref_To_Local'>cp</span></a><span class='Delimiter'>, </span><span class='String'>"++"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <span class='Delimiter'>{ 
</span>            <a href="zic.c.html#LN1567"><span class='Ref_To_Local'>positive</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>            <a href="zic.c.html#LN1568"><span class='Ref_To_Local'>count</span></a> <span class='Operator'>= </span><span class='Number'>2</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <a href="../interfaces/ecpg/test/expected/sql-dyntest.c.html#LN145"><span class='Ref_to_Func'>error</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"illegal CORRECTION field on Leap line"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <span class='Control'>return</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="zic.c.html#LN1484"><span class='Ref_To_Local'>lp</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN292"><span class='Ref_to_Proto'>byword</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN1481"><span class='Ref_to_Parameter'>fields</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN255"><span class='Ref_to_Const'>LP_ROLL</span></a><span class='Delimiter'>], </span><a href="zic.c.html#LN354"><span class='Ref_to_Global_Var'>leap_types</span></a><span class='Parentheses'>))</span> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> 
        <span class='Delimiter'>{ 
</span>            <a href="../interfaces/ecpg/test/expected/sql-dyntest.c.html#LN145"><span class='Ref_to_Func'>error</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"illegal Rolling/Stationary field on Leap line"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <span class='Control'>return</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <a href="zic.c.html#LN1494"><span class='Ref_To_Local'>t</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN3450"><span class='Ref_to_Func'>tadd</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN1494"><span class='Ref_To_Local'>t</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN1493"><span class='Ref_To_Local'>tod</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN1494"><span class='Ref_To_Local'>t</span></a> <span class='Operator'>&LT; </span><a href="zic.c.html#LN1005"><span class='Ref_to_Global_Var'>early_time</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="../interfaces/ecpg/test/expected/sql-dyntest.c.html#LN145"><span class='Ref_to_Func'>error</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"leap second precedes Big Bang"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <span class='Control'>return</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <a href="zic.c.html#LN3093"><span class='Ref_to_Func'>leapadd</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN1494"><span class='Ref_To_Local'>t</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN1567"><span class='Ref_To_Local'>positive</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN1484"><span class='Ref_To_Local'>lp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN289"><span class='Ref_to_Member'>l_value</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN1568"><span class='Ref_To_Local'>count</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
}</span><span class='Auto_Annotations'> &laquo; end inleap &raquo; </span> 
 
<span class='Keyword'>static void 
</span><a name="LN1611"></a><span class='Declare_Function'>inlink</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>**</span><span class='Declare_Parameter'>fields</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>nfields</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1613"></a>    <span class='Control'>struct</span> <a href="zic.c.html#LN109"><span class='Ref_to_Proto'>link</span></a> <span class='Declare_Local'>l</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN1611"><span class='Ref_to_Parameter'>nfields</span></a> <span class='Operator'>!= </span><a href="zic.c.html#LN244"><span class='Ref_to_Const'>LINK_FIELDS</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../interfaces/ecpg/test/expected/sql-dyntest.c.html#LN145"><span class='Ref_to_Func'>error</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"wrong number of fields on Link line"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="zic.c.html#LN1611"><span class='Ref_to_Parameter'>fields</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN242"><span class='Ref_to_Const'>LF_FROM</span></a><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='String'>'\0'</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../interfaces/ecpg/test/expected/sql-dyntest.c.html#LN145"><span class='Ref_to_Func'>error</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"blank FROM field on Link line"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="zic.c.html#LN765"><span class='Ref_to_Func'>namecheck</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN1611"><span class='Ref_to_Parameter'>fields</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN243"><span class='Ref_to_Const'>LF_TO</span></a><span class='Delimiter'>]</span><span class='Parentheses'>))</span> 
        <span class='Control'>return</span><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN1613"><span class='Ref_To_Local'>l</span></a><span class='Operator'>.</span><a href="zic.c.html#LN276"><span class='Ref_to_Member'>l_filename</span></a> <span class='Operator'>= </span><a href="../bin/pg_test_fsync/pg_test_fsync.c.html#LN67"><span class='Ref_to_Global_Var'>filename</span></a><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN1613"><span class='Ref_To_Local'>l</span></a><span class='Operator'>.</span><a href="zic.c.html#LN277"><span class='Ref_to_Member'>l_linenum</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN170"><span class='Ref_to_Global_Var'>linenum</span></a><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN1613"><span class='Ref_To_Local'>l</span></a><span class='Operator'>.</span><a href="zic.c.html#LN278"><span class='Ref_to_Member'>l_from</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN424"><span class='Ref_to_Func'>ecpyalloc</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN1611"><span class='Ref_to_Parameter'>fields</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN242"><span class='Ref_to_Const'>LF_FROM</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN1613"><span class='Ref_To_Local'>l</span></a><span class='Operator'>.</span><a href="zic.c.html#LN279"><span class='Ref_to_Member'>l_to</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN424"><span class='Ref_to_Func'>ecpyalloc</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN1611"><span class='Ref_to_Parameter'>fields</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN243"><span class='Ref_to_Const'>LF_TO</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN282"><span class='Ref_to_Global_Var'>links</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN430"><span class='Ref_to_Func'>growalloc</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN282"><span class='Ref_to_Global_Var'>links</span></a><span class='Delimiter'>, </span><span class='Keyword'>sizeof </span><span class='Operator'>*</span><a href="zic.c.html#LN282"><span class='Ref_to_Global_Var'>links</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN283"><span class='Ref_to_Global_Var'>nlinks</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="zic.c.html#LN284"><span class='Ref_to_Global_Var'>nlinks_alloc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN282"><span class='Ref_to_Global_Var'>links</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN283"><span class='Ref_to_Global_Var'>nlinks</span></a><span class='Operator'>++</span><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="zic.c.html#LN1613"><span class='Ref_To_Local'>l</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end inlink &raquo; </span> 
 
<span class='Keyword'>static void 
</span><a name="LN1636"></a><span class='Declare_Function'>rulesub</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="localtime.c.html#LN81"><span class='Ref_to_Struct'>rule</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>rp</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>loyearp</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>hiyearp</span><span class='Delimiter'>, 
</span><a name="LN1637"></a>        <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>typep</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>monthp</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>dayp</span><span class='Delimiter'>, 
</span><a name="LN1638"></a>        <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>timep</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1640"></a>    <span class='Keyword'>const </span><span class='Control'>struct</span> <a href="zic.c.html#LN286"><span class='Ref_to_Struct'>lookup</span></a> <span class='Operator'>*</span><span class='Declare_Local'>lp</span><span class='Delimiter'>; 
</span><a name="LN1641"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>cp</span><span class='Delimiter'>; 
</span><a name="LN1642"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>dp</span><span class='Delimiter'>; 
</span><a name="LN1643"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>ep</span><span class='Delimiter'>; 
</span><a name="LN1644"></a>    <span class='Keyword'>char</span>        <span class='Declare_Local'>xs</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* PG: year_tmp is to avoid sscanf portability issues */ 
</span><a name="LN1647"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>year_tmp</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="zic.c.html#LN1640"><span class='Ref_To_Local'>lp</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN292"><span class='Ref_to_Proto'>byword</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN1637"><span class='Ref_to_Parameter'>monthp</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN303"><span class='Ref_to_Global_Var'>mon_names</span></a><span class='Parentheses'>))</span> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../interfaces/ecpg/test/expected/sql-dyntest.c.html#LN145"><span class='Ref_to_Func'>error</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"invalid month name"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <a href="zic.c.html#LN1636"><span class='Ref_to_Parameter'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN64"><span class='Ref_to_Member'>r_month</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN1640"><span class='Ref_To_Local'>lp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN289"><span class='Ref_to_Member'>l_value</span></a><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN1636"><span class='Ref_to_Parameter'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN71"><span class='Ref_to_Member'>r_todisstd</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN1636"><span class='Ref_to_Parameter'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN73"><span class='Ref_to_Member'>r_todisgmt</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN1642"><span class='Ref_To_Local'>dp</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN424"><span class='Ref_to_Func'>ecpyalloc</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN1638"><span class='Ref_to_Parameter'>timep</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="zic.c.html#LN1642"><span class='Ref_To_Local'>dp</span></a> <span class='Operator'>!= </span><span class='String'>'\0'</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="zic.c.html#LN1643"><span class='Ref_To_Local'>ep</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN1642"><span class='Ref_To_Local'>dp</span></a> <span class='Operator'>+ </span>strlen<span class='Parentheses'>(</span><a href="zic.c.html#LN1642"><span class='Ref_To_Local'>dp</span></a><span class='Parentheses'>) </span><span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>        <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN3277"><span class='Ref_to_Func'>lowerit</span></a><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="zic.c.html#LN1643"><span class='Ref_To_Local'>ep</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Control'>case</span> <span class='String'>'s'</span><span class='Operator'>:</span>           <span class='Comment_Single_Line'>/* Standard */ 
</span>                <a href="zic.c.html#LN1636"><span class='Ref_to_Parameter'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN71"><span class='Ref_to_Member'>r_todisstd</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>                <a href="zic.c.html#LN1636"><span class='Ref_to_Parameter'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN73"><span class='Ref_to_Member'>r_todisgmt</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>                <span class='Operator'>*</span><a href="zic.c.html#LN1643"><span class='Ref_To_Local'>ep</span></a> <span class='Operator'>= </span><span class='String'>'\0'</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <span class='String'>'w'</span><span class='Operator'>:</span>           <span class='Comment_Single_Line'>/* Wall */ 
</span>                <a href="zic.c.html#LN1636"><span class='Ref_to_Parameter'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN71"><span class='Ref_to_Member'>r_todisstd</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>                <a href="zic.c.html#LN1636"><span class='Ref_to_Parameter'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN73"><span class='Ref_to_Member'>r_todisgmt</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>                <span class='Operator'>*</span><a href="zic.c.html#LN1643"><span class='Ref_To_Local'>ep</span></a> <span class='Operator'>= </span><span class='String'>'\0'</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <span class='String'>'g'</span><span class='Operator'>:</span>           <span class='Comment_Single_Line'>/* Greenwich */ 
</span>            <span class='Control'>case</span> <span class='String'>'u'</span><span class='Operator'>:</span>           <span class='Comment_Single_Line'>/* Universal */ 
</span>            <span class='Control'>case</span> <span class='String'>'z'</span><span class='Operator'>:</span>           <span class='Comment_Single_Line'>/* Zulu */ 
</span>                <a href="zic.c.html#LN1636"><span class='Ref_to_Parameter'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN71"><span class='Ref_to_Member'>r_todisstd</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>                <a href="zic.c.html#LN1636"><span class='Ref_to_Parameter'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN73"><span class='Ref_to_Member'>r_todisgmt</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>                <span class='Operator'>*</span><a href="zic.c.html#LN1643"><span class='Ref_To_Local'>ep</span></a> <span class='Operator'>= </span><span class='String'>'\0'</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch lowerit(*ep) &raquo; </span> 
    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if *dp!='\0' &raquo; </span> 
    <a href="zic.c.html#LN1636"><span class='Ref_to_Parameter'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN70"><span class='Ref_to_Member'>r_tod</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN1251"><span class='Ref_to_Func'>gethms</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN1642"><span class='Ref_To_Local'>dp</span></a><span class='Delimiter'>, </span>_<span class='Parentheses'>(</span><span class='String'>"invalid time of day"</span><span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN1642"><span class='Ref_To_Local'>dp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Year work. 
     */ 
</span>    <a href="zic.c.html#LN1641"><span class='Ref_To_Local'>cp</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN1636"><span class='Ref_to_Parameter'>loyearp</span></a><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN1640"><span class='Ref_To_Local'>lp</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN292"><span class='Ref_to_Proto'>byword</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN1641"><span class='Ref_To_Local'>cp</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN341"><span class='Ref_to_Global_Var'>begin_years</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN1636"><span class='Ref_to_Parameter'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN61"><span class='Ref_to_Member'>r_lowasnum</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN1640"><span class='Ref_To_Local'>lp</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="zic.c.html#LN1636"><span class='Ref_to_Parameter'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN61"><span class='Ref_to_Member'>r_lowasnum</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN1640"><span class='Ref_To_Local'>lp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN289"><span class='Ref_to_Member'>l_value</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>case</span> <a href="zic.c.html#LN262"><span class='Ref_to_Const'>YR_MINIMUM</span></a><span class='Operator'>: 
</span>                <a href="zic.c.html#LN1636"><span class='Ref_to_Parameter'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN58"><span class='Ref_to_Member'>r_loyear</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN24"><span class='Ref_to_Const'>ZIC_MIN</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="zic.c.html#LN263"><span class='Ref_to_Const'>YR_MAXIMUM</span></a><span class='Operator'>: 
</span>                <a href="zic.c.html#LN1636"><span class='Ref_to_Parameter'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN58"><span class='Ref_to_Member'>r_loyear</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN25"><span class='Ref_to_Const'>ZIC_MAX</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>default</span><span class='Operator'>:</span>            <span class='Comment_Single_Line'>/* "cannot happen" */ 
</span>                <a href="../../contrib/seg/segscan.l.html#LN10"><span class='Ref_to_Macro'>fprintf</span></a><span class='Parentheses'>(</span>stderr<span class='Delimiter'>, 
</span>                        _<span class='Parentheses'>(</span><span class='String'>"%s: panic: Invalid l_value %d\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                        <a href="../bin/pg_test_timing/pg_test_timing.c.html#LN11"><span class='Ref_to_Global_Var'>progname</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN1640"><span class='Ref_To_Local'>lp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN289"><span class='Ref_to_Member'>l_value</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="../test/isolation/specscanner.l.html#LN91"><span class='Ref_to_Proto'>exit</span></a><span class='Parentheses'>(</span><a href="../bin/psql/settings.h.html#LN150"><span class='Ref_to_Const'>EXIT_FAILURE</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span>sscanf<span class='Parentheses'>(</span><a href="zic.c.html#LN1641"><span class='Ref_To_Local'>cp</span></a><span class='Delimiter'>, </span><span class='String'>"%d%c"</span><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="zic.c.html#LN1647"><span class='Ref_To_Local'>year_tmp</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="zic.c.html#LN1644"><span class='Ref_To_Local'>xs</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>1</span><span class='Parentheses'>)</span> 
        <a href="zic.c.html#LN1636"><span class='Ref_to_Parameter'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN58"><span class='Ref_to_Member'>r_loyear</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN1647"><span class='Ref_To_Local'>year_tmp</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../interfaces/ecpg/test/expected/sql-dyntest.c.html#LN145"><span class='Ref_to_Func'>error</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"invalid starting year"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <a href="zic.c.html#LN1641"><span class='Ref_To_Local'>cp</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN1636"><span class='Ref_to_Parameter'>hiyearp</span></a><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN1640"><span class='Ref_To_Local'>lp</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN292"><span class='Ref_to_Proto'>byword</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN1641"><span class='Ref_To_Local'>cp</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN347"><span class='Ref_to_Global_Var'>end_years</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN1636"><span class='Ref_to_Parameter'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN62"><span class='Ref_to_Member'>r_hiwasnum</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN1640"><span class='Ref_To_Local'>lp</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="zic.c.html#LN1636"><span class='Ref_to_Parameter'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN62"><span class='Ref_to_Member'>r_hiwasnum</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN1640"><span class='Ref_To_Local'>lp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN289"><span class='Ref_to_Member'>l_value</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>case</span> <a href="zic.c.html#LN262"><span class='Ref_to_Const'>YR_MINIMUM</span></a><span class='Operator'>: 
</span>                <a href="zic.c.html#LN1636"><span class='Ref_to_Parameter'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN59"><span class='Ref_to_Member'>r_hiyear</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN24"><span class='Ref_to_Const'>ZIC_MIN</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="zic.c.html#LN263"><span class='Ref_to_Const'>YR_MAXIMUM</span></a><span class='Operator'>: 
</span>                <a href="zic.c.html#LN1636"><span class='Ref_to_Parameter'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN59"><span class='Ref_to_Member'>r_hiyear</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN25"><span class='Ref_to_Const'>ZIC_MAX</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="zic.c.html#LN264"><span class='Ref_to_Const'>YR_ONLY</span></a><span class='Operator'>: 
</span>                <a href="zic.c.html#LN1636"><span class='Ref_to_Parameter'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN59"><span class='Ref_to_Member'>r_hiyear</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN1636"><span class='Ref_to_Parameter'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN58"><span class='Ref_to_Member'>r_loyear</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>default</span><span class='Operator'>:</span>            <span class='Comment_Single_Line'>/* "cannot happen" */ 
</span>                <a href="../../contrib/seg/segscan.l.html#LN10"><span class='Ref_to_Macro'>fprintf</span></a><span class='Parentheses'>(</span>stderr<span class='Delimiter'>, 
</span>                        _<span class='Parentheses'>(</span><span class='String'>"%s: panic: Invalid l_value %d\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                        <a href="../bin/pg_test_timing/pg_test_timing.c.html#LN11"><span class='Ref_to_Global_Var'>progname</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN1640"><span class='Ref_To_Local'>lp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN289"><span class='Ref_to_Member'>l_value</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="../test/isolation/specscanner.l.html#LN91"><span class='Ref_to_Proto'>exit</span></a><span class='Parentheses'>(</span><a href="../bin/psql/settings.h.html#LN150"><span class='Ref_to_Const'>EXIT_FAILURE</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span>sscanf<span class='Parentheses'>(</span><a href="zic.c.html#LN1641"><span class='Ref_To_Local'>cp</span></a><span class='Delimiter'>, </span><span class='String'>"%d%c"</span><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="zic.c.html#LN1647"><span class='Ref_To_Local'>year_tmp</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="zic.c.html#LN1644"><span class='Ref_To_Local'>xs</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>1</span><span class='Parentheses'>)</span> 
        <a href="zic.c.html#LN1636"><span class='Ref_to_Parameter'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN59"><span class='Ref_to_Member'>r_hiyear</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN1647"><span class='Ref_To_Local'>year_tmp</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../interfaces/ecpg/test/expected/sql-dyntest.c.html#LN145"><span class='Ref_to_Func'>error</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"invalid ending year"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN1636"><span class='Ref_to_Parameter'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN58"><span class='Ref_to_Member'>r_loyear</span></a> <span class='Operator'>&GT; </span><a href="zic.c.html#LN1636"><span class='Ref_to_Parameter'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN59"><span class='Ref_to_Member'>r_hiyear</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../interfaces/ecpg/test/expected/sql-dyntest.c.html#LN145"><span class='Ref_to_Func'>error</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"starting year greater than ending year"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="zic.c.html#LN1637"><span class='Ref_to_Parameter'>typep</span></a> <span class='Operator'>== </span><span class='String'>'\0'</span><span class='Parentheses'>) 
</span>        <a href="zic.c.html#LN1636"><span class='Ref_to_Parameter'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN60"><span class='Ref_to_Member'>r_yrtype</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN1636"><span class='Ref_to_Parameter'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN58"><span class='Ref_to_Member'>r_loyear</span></a> <span class='Operator'>== </span><a href="zic.c.html#LN1636"><span class='Ref_to_Parameter'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN59"><span class='Ref_to_Member'>r_hiyear</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="../interfaces/ecpg/test/expected/sql-dyntest.c.html#LN145"><span class='Ref_to_Func'>error</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"typed single year"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <span class='Control'>return</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <a href="zic.c.html#LN1636"><span class='Ref_to_Parameter'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN60"><span class='Ref_to_Member'>r_yrtype</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN424"><span class='Ref_to_Func'>ecpyalloc</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN1637"><span class='Ref_to_Parameter'>typep</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Day work. Accept things such as:  1  last-Sunday  Sun&LT;=20  Sun&GT;=7 
     */ 
</span>    <a href="zic.c.html#LN1642"><span class='Ref_To_Local'>dp</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN424"><span class='Ref_to_Func'>ecpyalloc</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN1637"><span class='Ref_to_Parameter'>dayp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="zic.c.html#LN1640"><span class='Ref_To_Local'>lp</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN292"><span class='Ref_to_Proto'>byword</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN1642"><span class='Ref_To_Local'>dp</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN330"><span class='Ref_to_Global_Var'>lasts</span></a><span class='Parentheses'>))</span> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <a href="zic.c.html#LN1636"><span class='Ref_to_Parameter'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN66"><span class='Ref_to_Member'>r_dycode</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN87"><span class='Ref_to_Const'>DC_DOWLEQ</span></a><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN1636"><span class='Ref_to_Parameter'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN68"><span class='Ref_to_Member'>r_wday</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN1640"><span class='Ref_To_Local'>lp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN289"><span class='Ref_to_Member'>l_value</span></a><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN1636"><span class='Ref_to_Parameter'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN67"><span class='Ref_to_Member'>r_dayofmonth</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN360"><span class='Ref_to_Global_Var'>len_months</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>][</span><a href="zic.c.html#LN1636"><span class='Ref_to_Parameter'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN64"><span class='Ref_to_Member'>r_month</span></a><span class='Delimiter'>]; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="zic.c.html#LN1643"><span class='Ref_To_Local'>ep</span></a> <span class='Operator'>= </span>strchr<span class='Parentheses'>(</span><a href="zic.c.html#LN1642"><span class='Ref_To_Local'>dp</span></a><span class='Delimiter'>, </span><span class='String'>'&LT;'</span><span class='Parentheses'>))</span> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> 
            <a href="zic.c.html#LN1636"><span class='Ref_to_Parameter'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN66"><span class='Ref_to_Member'>r_dycode</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN87"><span class='Ref_to_Const'>DC_DOWLEQ</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="zic.c.html#LN1643"><span class='Ref_To_Local'>ep</span></a> <span class='Operator'>= </span>strchr<span class='Parentheses'>(</span><a href="zic.c.html#LN1642"><span class='Ref_To_Local'>dp</span></a><span class='Delimiter'>, </span><span class='String'>'&GT;'</span><span class='Parentheses'>))</span> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> 
            <a href="zic.c.html#LN1636"><span class='Ref_to_Parameter'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN66"><span class='Ref_to_Member'>r_dycode</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN86"><span class='Ref_to_Const'>DC_DOWGEQ</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <a href="zic.c.html#LN1643"><span class='Ref_To_Local'>ep</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN1642"><span class='Ref_To_Local'>dp</span></a><span class='Delimiter'>; 
</span>            <a href="zic.c.html#LN1636"><span class='Ref_to_Parameter'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN66"><span class='Ref_to_Member'>r_dycode</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN85"><span class='Ref_to_Const'>DC_DOM</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN1636"><span class='Ref_to_Parameter'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN66"><span class='Ref_to_Member'>r_dycode</span></a> <span class='Operator'>!= </span><a href="zic.c.html#LN85"><span class='Ref_to_Const'>DC_DOM</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Operator'>*</span><a href="zic.c.html#LN1643"><span class='Ref_To_Local'>ep</span></a><span class='Operator'>++ = </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="zic.c.html#LN1643"><span class='Ref_To_Local'>ep</span></a><span class='Operator'>++ != </span><span class='String'>'='</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <a href="../interfaces/ecpg/test/expected/sql-dyntest.c.html#LN145"><span class='Ref_to_Func'>error</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"invalid day of month"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN1642"><span class='Ref_To_Local'>dp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>return</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="zic.c.html#LN1640"><span class='Ref_To_Local'>lp</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN292"><span class='Ref_to_Proto'>byword</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN1642"><span class='Ref_To_Local'>dp</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN319"><span class='Ref_to_Global_Var'>wday_names</span></a><span class='Parentheses'>))</span> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> 
            <span class='Delimiter'>{ 
</span>                <a href="../interfaces/ecpg/test/expected/sql-dyntest.c.html#LN145"><span class='Ref_to_Func'>error</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"invalid weekday name"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN1642"><span class='Ref_To_Local'>dp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>return</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <a href="zic.c.html#LN1636"><span class='Ref_to_Parameter'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN68"><span class='Ref_to_Member'>r_wday</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN1640"><span class='Ref_To_Local'>lp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN289"><span class='Ref_to_Member'>l_value</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span>sscanf<span class='Parentheses'>(</span><a href="zic.c.html#LN1643"><span class='Ref_To_Local'>ep</span></a><span class='Delimiter'>, </span><span class='String'>"%d%c"</span><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="zic.c.html#LN1636"><span class='Ref_to_Parameter'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN67"><span class='Ref_to_Member'>r_dayofmonth</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="zic.c.html#LN1644"><span class='Ref_To_Local'>xs</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>1</span> <span class='Operator'>|| 
</span>            <a href="zic.c.html#LN1636"><span class='Ref_to_Parameter'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN67"><span class='Ref_to_Member'>r_dayofmonth</span></a> <span class='Operator'>&LT;= </span><span class='Number'>0</span> <span class='Operator'>|| 
</span>            <span class='Parentheses'>(</span><a href="zic.c.html#LN1636"><span class='Ref_to_Parameter'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN67"><span class='Ref_to_Member'>r_dayofmonth</span></a> <span class='Operator'>&GT; </span><a href="zic.c.html#LN360"><span class='Ref_to_Global_Var'>len_months</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>][</span><a href="zic.c.html#LN1636"><span class='Ref_to_Parameter'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN64"><span class='Ref_to_Member'>r_month</span></a><span class='Delimiter'>]</span><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span>            <a href="../interfaces/ecpg/test/expected/sql-dyntest.c.html#LN145"><span class='Ref_to_Func'>error</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"invalid day of month"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN1642"><span class='Ref_To_Local'>dp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>return</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
    <a href="../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN1642"><span class='Ref_To_Local'>dp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end rulesub &raquo; </span> 
 
<span class='Keyword'>static void 
</span><a name="LN1809"></a><span class='Declare_Function'>convert</span><span class='Parentheses'>(</span><span class='Keyword'>const </span><a href="../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a> <span class='Declare_Parameter'>val</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Keyword'>const </span><span class='Declare_Parameter'>buf</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1811"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN1812"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>shift</span><span class='Delimiter'>; 
</span><a name="LN1813"></a>    <span class='Keyword'>unsigned char </span><span class='Operator'>*</span><span class='Keyword'>const </span><span class='Declare_Local'>b</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>unsigned char </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="zic.c.html#LN1809"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN1811"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="zic.c.html#LN1812"><span class='Ref_To_Local'>shift</span></a> <span class='Operator'>= </span><span class='Number'>24</span><span class='Delimiter'>; </span><a href="zic.c.html#LN1811"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><span class='Number'>4</span><span class='Delimiter'>; </span><span class='Operator'>++</span><a href="zic.c.html#LN1811"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN1812"><span class='Ref_To_Local'>shift</span></a> <span class='Operator'>-= </span><span class='Number'>8</span><span class='Parentheses'>) 
</span>        <a href="zic.c.html#LN1813"><span class='Ref_To_Local'>b</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1811"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="zic.c.html#LN1809"><span class='Ref_to_Parameter'>val</span></a> <span class='Operator'>&GT;&GT; </span><a href="zic.c.html#LN1812"><span class='Ref_To_Local'>shift</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Keyword'>static void 
</span><a name="LN1820"></a><span class='Declare_Function'>convert64</span><span class='Parentheses'>(</span><span class='Keyword'>const </span><a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a> <span class='Declare_Parameter'>val</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Keyword'>const </span><span class='Declare_Parameter'>buf</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1822"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN1823"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>shift</span><span class='Delimiter'>; 
</span><a name="LN1824"></a>    <span class='Keyword'>unsigned char </span><span class='Operator'>*</span><span class='Keyword'>const </span><span class='Declare_Local'>b</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>unsigned char </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="zic.c.html#LN1820"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN1822"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="zic.c.html#LN1823"><span class='Ref_To_Local'>shift</span></a> <span class='Operator'>= </span><span class='Number'>56</span><span class='Delimiter'>; </span><a href="zic.c.html#LN1822"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><span class='Number'>8</span><span class='Delimiter'>; </span><span class='Operator'>++</span><a href="zic.c.html#LN1822"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN1823"><span class='Ref_To_Local'>shift</span></a> <span class='Operator'>-= </span><span class='Number'>8</span><span class='Parentheses'>) 
</span>        <a href="zic.c.html#LN1824"><span class='Ref_To_Local'>b</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1822"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="zic.c.html#LN1820"><span class='Ref_to_Parameter'>val</span></a> <span class='Operator'>&GT;&GT; </span><a href="zic.c.html#LN1823"><span class='Ref_To_Local'>shift</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Keyword'>static void 
</span><a name="LN1831"></a><span class='Declare_Function'>puttzcode</span><span class='Parentheses'>(</span><span class='Keyword'>const </span><a href="../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a> <span class='Declare_Parameter'>val</span><span class='Delimiter'>, </span>FILE <span class='Operator'>*</span><span class='Keyword'>const </span><span class='Declare_Parameter'>fp</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1833"></a>    <span class='Keyword'>char</span>        <span class='Declare_Local'>buf</span><span class='Delimiter'>[</span><span class='Number'>4</span><span class='Delimiter'>]; 
</span> 
    <a href="zic.c.html#LN1808"><span class='Ref_to_Func'>convert</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN1831"><span class='Ref_to_Parameter'>val</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN1833"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    fwrite<span class='Parentheses'>(</span><a href="zic.c.html#LN1833"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='Keyword'>sizeof </span><a href="zic.c.html#LN1833"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="zic.c.html#LN1831"><span class='Ref_to_Parameter'>fp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Keyword'>static void 
</span><a name="LN1840"></a><span class='Declare_Function'>puttzcode64</span><span class='Parentheses'>(</span><span class='Keyword'>const </span><a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a> <span class='Declare_Parameter'>val</span><span class='Delimiter'>, </span>FILE <span class='Operator'>*</span><span class='Keyword'>const </span><span class='Declare_Parameter'>fp</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1842"></a>    <span class='Keyword'>char</span>        <span class='Declare_Local'>buf</span><span class='Delimiter'>[</span><span class='Number'>8</span><span class='Delimiter'>]; 
</span> 
    <a href="zic.c.html#LN1819"><span class='Ref_to_Func'>convert64</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN1840"><span class='Ref_to_Parameter'>val</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN1842"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    fwrite<span class='Parentheses'>(</span><a href="zic.c.html#LN1842"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='Keyword'>sizeof </span><a href="zic.c.html#LN1842"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="zic.c.html#LN1840"><span class='Ref_to_Parameter'>fp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Keyword'>static int 
</span><a name="LN1849"></a><span class='Declare_Function'>atcomp</span><span class='Parentheses'>(</span><span class='Keyword'>const void </span><span class='Operator'>*</span><span class='Declare_Parameter'>avp</span><span class='Delimiter'>, </span><span class='Keyword'>const void </span><span class='Operator'>*</span><span class='Declare_Parameter'>bvp</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1851"></a>    <span class='Keyword'>const </span><a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a> <span class='Declare_Local'>a</span> <span class='Operator'>= </span><span class='Parentheses'>((</span><span class='Keyword'>const </span><span class='Control'>struct</span> <a href="zic.c.html#LN369"><span class='Ref_to_Struct'>attype</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="zic.c.html#LN1849"><span class='Ref_to_Parameter'>avp</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>at<span class='Delimiter'>; 
</span><a name="LN1852"></a>    <span class='Keyword'>const </span><a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a> <span class='Declare_Local'>b</span> <span class='Operator'>= </span><span class='Parentheses'>((</span><span class='Keyword'>const </span><span class='Control'>struct</span> <a href="zic.c.html#LN369"><span class='Ref_to_Struct'>attype</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="zic.c.html#LN1849"><span class='Ref_to_Parameter'>bvp</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>at<span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN1851"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>&LT; </span><a href="zic.c.html#LN1852"><span class='Ref_To_Local'>b</span></a><span class='Parentheses'>) </span><span class='Operator'>? -</span><span class='Number'>1</span> <span class='Operator'>: </span><span class='Parentheses'>(</span><a href="zic.c.html#LN1851"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>&GT; </span><a href="zic.c.html#LN1852"><span class='Ref_To_Local'>b</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Keyword'>static bool 
</span><a name="LN1858"></a><span class='Declare_Function'>is32</span><span class='Parentheses'>(</span><span class='Keyword'>const </span><a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a> <span class='Declare_Parameter'>x</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>return</span> <a href="zic.c.html#LN1858"><span class='Ref_to_Parameter'>x</span></a> <span class='Operator'>== </span><span class='Parentheses'>((</span><a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a><span class='Parentheses'>)</span> <span class='Parentheses'>((</span><a href="../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a><span class='Parentheses'>) </span><a href="zic.c.html#LN1858"><span class='Ref_to_Parameter'>x</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<span class='Keyword'>static void 
</span><a name="LN1864"></a><span class='Declare_Function'>writezone</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Keyword'>const </span><span class='Declare_Parameter'>name</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Keyword'>const </span><span class='Declare_Parameter'>string</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Declare_Parameter'>version</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1866"></a>    FILE       <span class='Operator'>*</span><span class='Declare_Local'>fp</span><span class='Delimiter'>; 
</span><a name="LN1867"></a>    ptrdiff_t   <span class='Declare_Local'>i</span><span class='Delimiter'>, 
</span><a name="LN1868"></a>                <span class='Declare_Local'>j</span><span class='Delimiter'>; 
</span><a name="LN1869"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>leapcnt32</span><span class='Delimiter'>, 
</span><a name="LN1870"></a>                <span class='Declare_Local'>leapi32</span><span class='Delimiter'>; 
</span><a name="LN1871"></a>    ptrdiff_t   <span class='Declare_Local'>timecnt32</span><span class='Delimiter'>, 
</span><a name="LN1872"></a>                <span class='Declare_Local'>timei32</span><span class='Delimiter'>; 
</span><a name="LN1873"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>pass</span><span class='Delimiter'>; 
</span><a name="LN1874"></a>    <span class='Keyword'>static const </span><span class='Control'>struct</span> <a href="tzfile.h.html#LN32"><span class='Ref_to_Struct'>tzhead</span></a> <span class='Declare_Local'>tzh0</span><span class='Delimiter'>; 
</span><a name="LN1875"></a>    <span class='Keyword'>static </span><span class='Control'>struct</span> <a href="tzfile.h.html#LN32"><span class='Ref_to_Struct'>tzhead</span></a> <span class='Declare_Local'>tzh</span><span class='Delimiter'>; 
</span><a name="LN1876"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>dir_checked</span> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span><a name="LN1877"></a>    <a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a>       <span class='Declare_Local'>one</span> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span><a name="LN1878"></a>    <a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a>       <span class='Declare_Local'>y2038_boundary</span> <span class='Operator'>= </span><a href="zic.c.html#LN1877"><span class='Ref_To_Local'>one</span></a> <span class='Operator'>&LT;&LT; </span><span class='Number'>31</span><span class='Delimiter'>; 
</span><a name="LN1879"></a>    ptrdiff_t   <span class='Declare_Local'>nats</span> <span class='Operator'>= </span><a href="zic.c.html#LN181"><span class='Ref_to_Global_Var'>timecnt</span></a> <span class='Operator'>+ </span><a href="zic.c.html#LN160"><span class='Ref_to_EnumConst'>WORK_AROUND_QTBUG_53071</span></a><span class='Delimiter'>; 
</span><a name="LN1880"></a>    <a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>ats</span> <span class='Operator'>= </span><a href="zic.c.html#LN412"><span class='Ref_to_Func'>emalloc</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN396"><span class='Ref_to_Func'>size_product</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN1879"><span class='Ref_To_Local'>nats</span></a><span class='Delimiter'>, </span><span class='Keyword'>sizeof </span><span class='Operator'>*</span><a href="zic.c.html#LN1880"><span class='Ref_To_Local'>ats</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span><a name="LN1881"></a>    <span class='Keyword'>void</span>       <span class='Operator'>*</span><span class='Declare_Local'>typesptr</span> <span class='Operator'>= </span><a href="zic.c.html#LN1880"><span class='Ref_To_Local'>ats</span></a> <span class='Operator'>+ </span><a href="zic.c.html#LN1879"><span class='Ref_To_Local'>nats</span></a><span class='Delimiter'>; 
</span><a name="LN1882"></a>    <span class='Keyword'>unsigned char </span><span class='Operator'>*</span><span class='Declare_Local'>types</span> <span class='Operator'>= </span><a href="zic.c.html#LN1881"><span class='Ref_To_Local'>typesptr</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Sort. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN181"><span class='Ref_to_Global_Var'>timecnt</span></a> <span class='Operator'>&GT; </span><span class='Number'>1</span><span class='Parentheses'>) 
</span>        <a href="../include/port.h.html#LN439"><span class='Ref_to_Macro'>qsort</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN374"><span class='Ref_to_Global_Var'>attypes</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN181"><span class='Ref_to_Global_Var'>timecnt</span></a><span class='Delimiter'>, </span><span class='Keyword'>sizeof </span><span class='Operator'>*</span><a href="zic.c.html#LN374"><span class='Ref_to_Global_Var'>attypes</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN1848"><span class='Ref_to_Func'>atcomp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Optimize. 
     */ 
</span>    <span class='Delimiter'>{ 
</span><a name="LN1894"></a>        ptrdiff_t   <span class='Declare_Local'>fromi</span><span class='Delimiter'>, 
</span><a name="LN1895"></a>                    <span class='Declare_Local'>toi</span><span class='Delimiter'>; 
</span> 
        <a href="zic.c.html#LN1895"><span class='Ref_To_Local'>toi</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN1894"><span class='Ref_To_Local'>fromi</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>        <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN1894"><span class='Ref_To_Local'>fromi</span></a> <span class='Operator'>&LT; </span><a href="zic.c.html#LN181"><span class='Ref_to_Global_Var'>timecnt</span></a> <span class='Operator'>&& </span><a href="zic.c.html#LN374"><span class='Ref_to_Global_Var'>attypes</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1894"><span class='Ref_To_Local'>fromi</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="zic.c.html#LN371"><span class='Ref_to_Member'>at</span></a> <span class='Operator'>&LT; </span><a href="zic.c.html#LN1005"><span class='Ref_to_Global_Var'>early_time</span></a><span class='Parentheses'>) 
</span>            <span class='Operator'>++</span><a href="zic.c.html#LN1894"><span class='Ref_To_Local'>fromi</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>for</span> <span class='Parentheses'>(</span><span class='Delimiter'>; </span><a href="zic.c.html#LN1894"><span class='Ref_To_Local'>fromi</span></a> <span class='Operator'>&LT; </span><a href="zic.c.html#LN181"><span class='Ref_to_Global_Var'>timecnt</span></a><span class='Delimiter'>; </span><span class='Operator'>++</span><a href="zic.c.html#LN1894"><span class='Ref_To_Local'>fromi</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN1895"><span class='Ref_To_Local'>toi</span></a> <span class='Operator'>&GT; </span><span class='Number'>1</span> <span class='Operator'>&& </span><span class='Parentheses'>((</span><a href="zic.c.html#LN374"><span class='Ref_to_Global_Var'>attypes</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1894"><span class='Ref_To_Local'>fromi</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="zic.c.html#LN371"><span class='Ref_to_Member'>at</span></a> <span class='Operator'>+ 
</span>                             <a href="zic.c.html#LN375"><span class='Ref_to_Global_Var'>gmtoffs</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN374"><span class='Ref_to_Global_Var'>attypes</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1895"><span class='Ref_To_Local'>toi</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="zic.c.html#LN373"><span class='Ref_to_Member'>type</span></a><span class='Delimiter'>]</span><span class='Parentheses'>) </span><span class='Operator'>&LT;= 
</span>                            <span class='Parentheses'>(</span><a href="zic.c.html#LN374"><span class='Ref_to_Global_Var'>attypes</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1895"><span class='Ref_To_Local'>toi</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="zic.c.html#LN371"><span class='Ref_to_Member'>at</span></a> <span class='Operator'>+ 
</span>                             <a href="zic.c.html#LN375"><span class='Ref_to_Global_Var'>gmtoffs</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN374"><span class='Ref_to_Global_Var'>attypes</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1895"><span class='Ref_To_Local'>toi</span></a> <span class='Operator'>- </span><span class='Number'>2</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="zic.c.html#LN373"><span class='Ref_to_Member'>type</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)))</span> 
            <span class='Delimiter'>{ 
</span>                <a href="zic.c.html#LN374"><span class='Ref_to_Global_Var'>attypes</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1895"><span class='Ref_To_Local'>toi</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="zic.c.html#LN373"><span class='Ref_to_Member'>type</span></a> <span class='Operator'>= 
</span>                    <a href="zic.c.html#LN374"><span class='Ref_to_Global_Var'>attypes</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1894"><span class='Ref_To_Local'>fromi</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="zic.c.html#LN373"><span class='Ref_to_Member'>type</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>continue</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN1895"><span class='Ref_To_Local'>toi</span></a> <span class='Operator'>== </span><span class='Number'>0</span> 
                <span class='Operator'>|| </span><a href="zic.c.html#LN374"><span class='Ref_to_Global_Var'>attypes</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1894"><span class='Ref_To_Local'>fromi</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="zic.c.html#LN372"><span class='Ref_to_Member'>dontmerge</span></a> 
                <span class='Operator'>|| </span><a href="zic.c.html#LN374"><span class='Ref_to_Global_Var'>attypes</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1895"><span class='Ref_To_Local'>toi</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="zic.c.html#LN373"><span class='Ref_to_Member'>type</span></a> <span class='Operator'>!= </span><a href="zic.c.html#LN374"><span class='Ref_to_Global_Var'>attypes</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1894"><span class='Ref_To_Local'>fromi</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="zic.c.html#LN373"><span class='Ref_to_Member'>type</span></a><span class='Parentheses'>) 
</span>                <a href="zic.c.html#LN374"><span class='Ref_to_Global_Var'>attypes</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1895"><span class='Ref_To_Local'>toi</span></a><span class='Operator'>++</span><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="zic.c.html#LN374"><span class='Ref_to_Global_Var'>attypes</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1894"><span class='Ref_To_Local'>fromi</span></a><span class='Delimiter'>]; 
</span>        <span class='Delimiter'>} 
</span>        <a href="zic.c.html#LN181"><span class='Ref_to_Global_Var'>timecnt</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN1895"><span class='Ref_To_Local'>toi</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN175"><span class='Ref_to_Global_Var'>noise</span></a> <span class='Operator'>&& </span><a href="zic.c.html#LN181"><span class='Ref_to_Global_Var'>timecnt</span></a> <span class='Operator'>&GT; </span><span class='Number'>1200</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN181"><span class='Ref_to_Global_Var'>timecnt</span></a> <span class='Operator'>&GT; </span><a href="tzfile.h.html#LN92"><span class='Ref_to_Const'>TZ_MAX_TIMES</span></a><span class='Parentheses'>) 
</span>            <a href="zic.c.html#LN492"><span class='Ref_to_Func'>warning</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"reference clients mishandle"</span> 
                      <span class='String'>" more than %d transition times"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                    <a href="tzfile.h.html#LN92"><span class='Ref_to_Const'>TZ_MAX_TIMES</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <a href="zic.c.html#LN492"><span class='Ref_to_Func'>warning</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"pre-2014 clients may mishandle"</span> 
                      <span class='String'>" more than 1200 transition times"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Transfer. 
     */ 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="zic.c.html#LN181"><span class='Ref_to_Global_Var'>timecnt</span></a><span class='Delimiter'>; </span><span class='Operator'>++</span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="zic.c.html#LN1880"><span class='Ref_To_Local'>ats</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="zic.c.html#LN374"><span class='Ref_to_Global_Var'>attypes</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="zic.c.html#LN371"><span class='Ref_to_Member'>at</span></a><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN1882"><span class='Ref_To_Local'>types</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="zic.c.html#LN374"><span class='Ref_to_Global_Var'>attypes</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="zic.c.html#LN373"><span class='Ref_to_Member'>type</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Work around QTBUG-53071 for time stamps less than y2038_boundary - 1, 
     * by inserting a no-op transition at time y2038_boundary - 1. This works 
     * only for timestamps before the boundary, which should be good enough in 
     * practice as QTBUG-53071 should be long-dead by 2038. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN160"><span class='Ref_to_EnumConst'>WORK_AROUND_QTBUG_53071</span></a> <span class='Operator'>&& </span><a href="zic.c.html#LN181"><span class='Ref_to_Global_Var'>timecnt</span></a> <span class='Operator'>!= </span><span class='Number'>0</span> 
        <span class='Operator'>&& </span><a href="zic.c.html#LN1880"><span class='Ref_To_Local'>ats</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN181"><span class='Ref_to_Global_Var'>timecnt</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>] </span><span class='Operator'>&LT; </span><a href="zic.c.html#LN1878"><span class='Ref_To_Local'>y2038_boundary</span></a> <span class='Operator'>- </span><span class='Number'>1</span> <span class='Operator'>&& </span>strchr<span class='Parentheses'>(</span><a href="zic.c.html#LN1864"><span class='Ref_to_Parameter'>string</span></a><span class='Delimiter'>, </span><span class='String'>'&LT;'</span><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="zic.c.html#LN1880"><span class='Ref_To_Local'>ats</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN181"><span class='Ref_to_Global_Var'>timecnt</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="zic.c.html#LN1878"><span class='Ref_To_Local'>y2038_boundary</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN1882"><span class='Ref_To_Local'>types</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN181"><span class='Ref_to_Global_Var'>timecnt</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="zic.c.html#LN1882"><span class='Ref_To_Local'>types</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN181"><span class='Ref_to_Global_Var'>timecnt</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>]; 
</span>        <a href="zic.c.html#LN181"><span class='Ref_to_Global_Var'>timecnt</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Correct for leap seconds. 
     */ 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="zic.c.html#LN181"><span class='Ref_to_Global_Var'>timecnt</span></a><span class='Delimiter'>; </span><span class='Operator'>++</span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="zic.c.html#LN1868"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN166"><span class='Ref_to_Global_Var'>leapcnt</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>while</span> <span class='Parentheses'>(</span><span class='Operator'>--</span><a href="zic.c.html#LN1868"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>&GT;= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN1880"><span class='Ref_To_Local'>ats</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>&GT; </span><a href="zic.c.html#LN381"><span class='Ref_to_Global_Var'>trans</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1868"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>] </span><span class='Operator'>- </span><a href="zic.c.html#LN382"><span class='Ref_to_Global_Var'>corr</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1868"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <a href="zic.c.html#LN1880"><span class='Ref_To_Local'>ats</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="zic.c.html#LN3450"><span class='Ref_to_Func'>tadd</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN1880"><span class='Ref_To_Local'>ats</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>], </span><a href="zic.c.html#LN382"><span class='Ref_to_Global_Var'>corr</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1868"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Figure out 32-bit-limited starts and counts. 
     */ 
</span>    <a href="zic.c.html#LN1871"><span class='Ref_To_Local'>timecnt32</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN181"><span class='Ref_to_Global_Var'>timecnt</span></a><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN1872"><span class='Ref_To_Local'>timei32</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN1869"><span class='Ref_To_Local'>leapcnt32</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN166"><span class='Ref_to_Global_Var'>leapcnt</span></a><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN1870"><span class='Ref_To_Local'>leapi32</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN1871"><span class='Ref_To_Local'>timecnt32</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span> <span class='Operator'>&& !</span><a href="zic.c.html#LN1857"><span class='Ref_to_Func'>is32</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN1880"><span class='Ref_To_Local'>ats</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1871"><span class='Ref_To_Local'>timecnt32</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Parentheses'>))</span> 
        <span class='Operator'>--</span><a href="zic.c.html#LN1871"><span class='Ref_To_Local'>timecnt32</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN1871"><span class='Ref_To_Local'>timecnt32</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span> <span class='Operator'>&& !</span><a href="zic.c.html#LN1857"><span class='Ref_to_Func'>is32</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN1880"><span class='Ref_To_Local'>ats</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1872"><span class='Ref_To_Local'>timei32</span></a><span class='Delimiter'>]</span><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Operator'>--</span><a href="zic.c.html#LN1871"><span class='Ref_To_Local'>timecnt32</span></a><span class='Delimiter'>; 
</span>        <span class='Operator'>++</span><a href="zic.c.html#LN1872"><span class='Ref_To_Local'>timei32</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Output an INT32_MIN "transition" if appropriate; see below. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN1872"><span class='Ref_To_Local'>timei32</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span> <span class='Operator'>&& </span><a href="zic.c.html#LN1880"><span class='Ref_To_Local'>ats</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1872"><span class='Ref_To_Local'>timei32</span></a><span class='Delimiter'>] </span><span class='Operator'>&GT; </span><a href="../include/c.h.html#LN338"><span class='Ref_to_Const'>PG_INT32_MIN</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Operator'>--</span><a href="zic.c.html#LN1872"><span class='Ref_To_Local'>timei32</span></a><span class='Delimiter'>; 
</span>        <span class='Operator'>++</span><a href="zic.c.html#LN1871"><span class='Ref_To_Local'>timecnt32</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN1869"><span class='Ref_To_Local'>leapcnt32</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span> <span class='Operator'>&& !</span><a href="zic.c.html#LN1857"><span class='Ref_to_Func'>is32</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN381"><span class='Ref_to_Global_Var'>trans</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1869"><span class='Ref_To_Local'>leapcnt32</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Parentheses'>))</span> 
        <span class='Operator'>--</span><a href="zic.c.html#LN1869"><span class='Ref_To_Local'>leapcnt32</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN1869"><span class='Ref_To_Local'>leapcnt32</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span> <span class='Operator'>&& !</span><a href="zic.c.html#LN1857"><span class='Ref_to_Func'>is32</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN381"><span class='Ref_to_Global_Var'>trans</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1870"><span class='Ref_To_Local'>leapi32</span></a><span class='Delimiter'>]</span><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Operator'>--</span><a href="zic.c.html#LN1869"><span class='Ref_To_Local'>leapcnt32</span></a><span class='Delimiter'>; 
</span>        <span class='Operator'>++</span><a href="zic.c.html#LN1870"><span class='Ref_To_Local'>leapi32</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Remove old file, if any, to snap links. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="private.h.html#LN59"><span class='Ref_to_Proto'>remove</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN1864"><span class='Ref_to_Parameter'>name</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <a href="zic.c.html#LN1876"><span class='Ref_To_Local'>dir_checked</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span>errno <span class='Operator'>!= </span>ENOENT<span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN2006"></a>        <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>e</span> <span class='Operator'>= </span><a href="../port/strerror.c.html#LN17"><span class='Ref_to_Func'>strerror</span></a><span class='Parentheses'>(</span>errno<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../contrib/seg/segscan.l.html#LN10"><span class='Ref_to_Macro'>fprintf</span></a><span class='Parentheses'>(</span>stderr<span class='Delimiter'>, </span>_<span class='Parentheses'>(</span><span class='String'>"%s: Cannot remove %s/%s: %s\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                <a href="../bin/pg_test_timing/pg_test_timing.c.html#LN11"><span class='Ref_to_Global_Var'>progname</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN560"><span class='Ref_to_Global_Var'>directory</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN1864"><span class='Ref_to_Parameter'>name</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN2006"><span class='Ref_To_Local'>e</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../test/isolation/specscanner.l.html#LN91"><span class='Ref_to_Proto'>exit</span></a><span class='Parentheses'>(</span><a href="../bin/psql/settings.h.html#LN150"><span class='Ref_to_Const'>EXIT_FAILURE</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <a href="zic.c.html#LN1866"><span class='Ref_To_Local'>fp</span></a> <span class='Operator'>= </span><a href="../include/port.h.html#LN290"><span class='Ref_to_Macro'>fopen</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN1864"><span class='Ref_to_Parameter'>name</span></a><span class='Delimiter'>, </span><span class='String'>"wb"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="zic.c.html#LN1866"><span class='Ref_To_Local'>fp</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN2015"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>fopen_errno</span> <span class='Operator'>= </span>errno<span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2015"><span class='Ref_To_Local'>fopen_errno</span></a> <span class='Operator'>== </span>ENOENT <span class='Operator'>&& !</span><a href="zic.c.html#LN1876"><span class='Ref_To_Local'>dir_checked</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="zic.c.html#LN3615"><span class='Ref_to_Func'>mkdirs</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN1864"><span class='Ref_to_Parameter'>name</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="zic.c.html#LN1866"><span class='Ref_To_Local'>fp</span></a> <span class='Operator'>= </span><a href="../include/port.h.html#LN290"><span class='Ref_to_Macro'>fopen</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN1864"><span class='Ref_to_Parameter'>name</span></a><span class='Delimiter'>, </span><span class='String'>"wb"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="zic.c.html#LN2015"><span class='Ref_To_Local'>fopen_errno</span></a> <span class='Operator'>= </span>errno<span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="zic.c.html#LN1866"><span class='Ref_To_Local'>fp</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="../../contrib/seg/segscan.l.html#LN10"><span class='Ref_to_Macro'>fprintf</span></a><span class='Parentheses'>(</span>stderr<span class='Delimiter'>, </span>_<span class='Parentheses'>(</span><span class='String'>"%s: Cannot create %s/%s: %s\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                    <a href="../bin/pg_test_timing/pg_test_timing.c.html#LN11"><span class='Ref_to_Global_Var'>progname</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN560"><span class='Ref_to_Global_Var'>directory</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN1864"><span class='Ref_to_Parameter'>name</span></a><span class='Delimiter'>, </span><a href="../port/strerror.c.html#LN17"><span class='Ref_to_Func'>strerror</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN2015"><span class='Ref_To_Local'>fopen_errno</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="../test/isolation/specscanner.l.html#LN91"><span class='Ref_to_Proto'>exit</span></a><span class='Parentheses'>(</span><a href="../bin/psql/settings.h.html#LN150"><span class='Ref_to_Const'>EXIT_FAILURE</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN1873"><span class='Ref_To_Local'>pass</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; </span><a href="zic.c.html#LN1873"><span class='Ref_To_Local'>pass</span></a> <span class='Operator'>&LT;= </span><span class='Number'>2</span><span class='Delimiter'>; </span><span class='Operator'>++</span><a href="zic.c.html#LN1873"><span class='Ref_To_Local'>pass</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN2032"></a>        ptrdiff_t   <span class='Declare_Local'>thistimei</span><span class='Delimiter'>, 
</span><a name="LN2033"></a>                    <span class='Declare_Local'>thistimecnt</span><span class='Delimiter'>, 
</span><a name="LN2034"></a>                    <span class='Declare_Local'>thistimelim</span><span class='Delimiter'>; 
</span><a name="LN2035"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>thisleapi</span><span class='Delimiter'>, 
</span><a name="LN2036"></a>                    <span class='Declare_Local'>thisleapcnt</span><span class='Delimiter'>, 
</span><a name="LN2037"></a>                    <span class='Declare_Local'>thisleaplim</span><span class='Delimiter'>; 
</span><a name="LN2038"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>writetype</span><span class='Delimiter'>[</span><a href="tzfile.h.html#LN95"><span class='Ref_to_Const'>TZ_MAX_TYPES</span></a><span class='Delimiter'>]; 
</span><a name="LN2039"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>typemap</span><span class='Delimiter'>[</span><a href="tzfile.h.html#LN95"><span class='Ref_to_Const'>TZ_MAX_TYPES</span></a><span class='Delimiter'>]; 
</span><a name="LN2040"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>thistypecnt</span><span class='Delimiter'>; 
</span><a name="LN2041"></a>        <span class='Keyword'>char</span>        <span class='Declare_Local'>thischars</span><span class='Delimiter'>[</span><a href="tzfile.h.html#LN97"><span class='Ref_to_Const'>TZ_MAX_CHARS</span></a><span class='Delimiter'>]; 
</span><a name="LN2042"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>thischarcnt</span><span class='Delimiter'>; 
</span><a name="LN2043"></a>        <span class='Keyword'>bool</span>        <span class='Declare_Local'>toomanytimes</span><span class='Delimiter'>; 
</span><a name="LN2044"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>indmap</span><span class='Delimiter'>[</span><a href="tzfile.h.html#LN97"><span class='Ref_to_Const'>TZ_MAX_CHARS</span></a><span class='Delimiter'>]; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN1873"><span class='Ref_To_Local'>pass</span></a> <span class='Operator'>== </span><span class='Number'>1</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="zic.c.html#LN2032"><span class='Ref_To_Local'>thistimei</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN1872"><span class='Ref_To_Local'>timei32</span></a><span class='Delimiter'>; 
</span>            <a href="zic.c.html#LN2033"><span class='Ref_To_Local'>thistimecnt</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN1871"><span class='Ref_To_Local'>timecnt32</span></a><span class='Delimiter'>; 
</span>            <a href="zic.c.html#LN2043"><span class='Ref_To_Local'>toomanytimes</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN2033"><span class='Ref_To_Local'>thistimecnt</span></a> <span class='Operator'>&GT;&GT; </span><span class='Number'>31</span> <span class='Operator'>&GT;&GT; </span><span class='Number'>1</span> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>            <a href="zic.c.html#LN2035"><span class='Ref_To_Local'>thisleapi</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN1870"><span class='Ref_To_Local'>leapi32</span></a><span class='Delimiter'>; 
</span>            <a href="zic.c.html#LN2036"><span class='Ref_To_Local'>thisleapcnt</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN1869"><span class='Ref_To_Local'>leapcnt32</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <a href="zic.c.html#LN2032"><span class='Ref_To_Local'>thistimei</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>            <a href="zic.c.html#LN2033"><span class='Ref_To_Local'>thistimecnt</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN181"><span class='Ref_to_Global_Var'>timecnt</span></a><span class='Delimiter'>; 
</span>            <a href="zic.c.html#LN2043"><span class='Ref_To_Local'>toomanytimes</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN2033"><span class='Ref_To_Local'>thistimecnt</span></a> <span class='Operator'>&GT;&GT; </span><span class='Number'>31</span> <span class='Operator'>&GT;&GT; </span><span class='Number'>31</span> <span class='Operator'>&GT;&GT; </span><span class='Number'>2</span> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>            <a href="zic.c.html#LN2035"><span class='Ref_To_Local'>thisleapi</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>            <a href="zic.c.html#LN2036"><span class='Ref_To_Local'>thisleapcnt</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN166"><span class='Ref_to_Global_Var'>leapcnt</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2043"><span class='Ref_To_Local'>toomanytimes</span></a><span class='Parentheses'>) 
</span>            <a href="../interfaces/ecpg/test/expected/sql-dyntest.c.html#LN145"><span class='Ref_to_Func'>error</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"too many transition times"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN2034"><span class='Ref_To_Local'>thistimelim</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN2032"><span class='Ref_To_Local'>thistimei</span></a> <span class='Operator'>+ </span><a href="zic.c.html#LN2033"><span class='Ref_To_Local'>thistimecnt</span></a><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN2037"><span class='Ref_To_Local'>thisleaplim</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN2035"><span class='Ref_To_Local'>thisleapi</span></a> <span class='Operator'>+ </span><a href="zic.c.html#LN2036"><span class='Ref_To_Local'>thisleapcnt</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="zic.c.html#LN183"><span class='Ref_to_Global_Var'>typecnt</span></a><span class='Delimiter'>; </span><span class='Operator'>++</span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a><span class='Parentheses'>) 
</span>            <a href="zic.c.html#LN2038"><span class='Ref_To_Local'>writetype</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="zic.c.html#LN2033"><span class='Ref_To_Local'>thistimecnt</span></a> <span class='Operator'>== </span><a href="zic.c.html#LN181"><span class='Ref_to_Global_Var'>timecnt</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2033"><span class='Ref_To_Local'>thistimecnt</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* 
             * No transition times fall in the current (32- or 64-bit) window. 
             */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN183"><span class='Ref_to_Global_Var'>typecnt</span></a> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                <a href="zic.c.html#LN2038"><span class='Ref_To_Local'>writetype</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN183"><span class='Ref_to_Global_Var'>typecnt</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN2032"><span class='Ref_To_Local'>thistimei</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>; </span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="zic.c.html#LN2034"><span class='Ref_To_Local'>thistimelim</span></a><span class='Delimiter'>; </span><span class='Operator'>++</span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a><span class='Parentheses'>) 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&GT;= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                    <a href="zic.c.html#LN2038"><span class='Ref_To_Local'>writetype</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1882"><span class='Ref_To_Local'>types</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]] </span><span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* 
             * For America/Godthab and Antarctica/Palmer 
             */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2032"><span class='Ref_To_Local'>thistimei</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                <a href="zic.c.html#LN2038"><span class='Ref_To_Local'>writetype</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span><span class='Directive'>#ifndef</span> LEAVE_SOME_PRE_2011_SYSTEMS_IN_THE_LURCH 
 
        <span class='Comment_Multi_Line'>/* 
         * For some pre-2011 systems: if the last-to-be-written standard (or 
         * daylight) type has an offset different from the most recently used 
         * offset, append an (unused) copy of the most recently used type (to 
         * help get global "altzone" and "timezone" variables set correctly). 
         */ 
</span>        <span class='Delimiter'>{ 
</span><a name="LN2097"></a>            <span class='Keyword'>int</span>         <span class='Declare_Local'>mrudst</span><span class='Delimiter'>, 
</span><a name="LN2098"></a>                        <span class='Declare_Local'>mrustd</span><span class='Delimiter'>, 
</span><a name="LN2099"></a>                        <span class='Declare_Local'>hidst</span><span class='Delimiter'>, 
</span><a name="LN2100"></a>                        <span class='Declare_Local'>histd</span><span class='Delimiter'>, 
</span><a name="LN2101"></a>                        <span class='Declare_Local'>type</span><span class='Delimiter'>; 
</span> 
            <a href="zic.c.html#LN2099"><span class='Ref_To_Local'>hidst</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN2100"><span class='Ref_To_Local'>histd</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN2097"><span class='Ref_To_Local'>mrudst</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN2098"><span class='Ref_To_Local'>mrustd</span></a> <span class='Operator'>= -</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>            <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN2032"><span class='Ref_To_Local'>thistimei</span></a><span class='Delimiter'>; </span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="zic.c.html#LN2034"><span class='Ref_To_Local'>thistimelim</span></a><span class='Delimiter'>; </span><span class='Operator'>++</span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a><span class='Parentheses'>) 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN376"><span class='Ref_to_Global_Var'>isdsts</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1882"><span class='Ref_To_Local'>types</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]]</span><span class='Parentheses'>) 
</span>                    <a href="zic.c.html#LN2097"><span class='Ref_To_Local'>mrudst</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN1882"><span class='Ref_To_Local'>types</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; 
</span>                <span class='Control'>else</span> 
                    <a href="zic.c.html#LN2098"><span class='Ref_To_Local'>mrustd</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN1882"><span class='Ref_To_Local'>types</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; 
</span>            <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="zic.c.html#LN183"><span class='Ref_to_Global_Var'>typecnt</span></a><span class='Delimiter'>; </span><span class='Operator'>++</span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a><span class='Parentheses'>) 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2038"><span class='Ref_To_Local'>writetype</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN376"><span class='Ref_to_Global_Var'>isdsts</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Parentheses'>) 
</span>                        <a href="zic.c.html#LN2099"><span class='Ref_To_Local'>hidst</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>; 
</span>                    <span class='Control'>else</span> 
                        <a href="zic.c.html#LN2100"><span class='Ref_To_Local'>histd</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2099"><span class='Ref_To_Local'>hidst</span></a> <span class='Operator'>&GT;= </span><span class='Number'>0</span> <span class='Operator'>&& </span><a href="zic.c.html#LN2097"><span class='Ref_To_Local'>mrudst</span></a> <span class='Operator'>&GT;= </span><span class='Number'>0</span> <span class='Operator'>&& </span><a href="zic.c.html#LN2099"><span class='Ref_To_Local'>hidst</span></a> <span class='Operator'>!= </span><a href="zic.c.html#LN2097"><span class='Ref_To_Local'>mrudst</span></a> <span class='Operator'>&& 
</span>                <a href="zic.c.html#LN375"><span class='Ref_to_Global_Var'>gmtoffs</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN2099"><span class='Ref_To_Local'>hidst</span></a><span class='Delimiter'>] </span><span class='Operator'>!= </span><a href="zic.c.html#LN375"><span class='Ref_to_Global_Var'>gmtoffs</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN2097"><span class='Ref_To_Local'>mrudst</span></a><span class='Delimiter'>]</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <a href="zic.c.html#LN376"><span class='Ref_to_Global_Var'>isdsts</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN2097"><span class='Ref_To_Local'>mrudst</span></a><span class='Delimiter'>] </span><span class='Operator'>= -</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>                <a href="zic.c.html#LN2101"><span class='Ref_To_Local'>type</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN3046"><span class='Ref_to_Func'>addtype</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN375"><span class='Ref_to_Global_Var'>gmtoffs</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN2097"><span class='Ref_To_Local'>mrudst</span></a><span class='Delimiter'>], 
</span>                               <span class='Operator'>&</span><a href="zic.c.html#LN380"><span class='Ref_to_Global_Var'>chars</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN377"><span class='Ref_to_Global_Var'>abbrinds</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN2097"><span class='Ref_To_Local'>mrudst</span></a><span class='Delimiter'>]], 
</span>                               <span class='Boolean'>true</span><span class='Delimiter'>, 
</span>                               <a href="zic.c.html#LN378"><span class='Ref_to_Global_Var'>ttisstds</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN2097"><span class='Ref_To_Local'>mrudst</span></a><span class='Delimiter'>], 
</span>                               <a href="zic.c.html#LN379"><span class='Ref_to_Global_Var'>ttisgmts</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN2097"><span class='Ref_To_Local'>mrudst</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="zic.c.html#LN376"><span class='Ref_to_Global_Var'>isdsts</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN2097"><span class='Ref_To_Local'>mrudst</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>                <a href="zic.c.html#LN2038"><span class='Ref_To_Local'>writetype</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN2101"><span class='Ref_To_Local'>type</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2100"><span class='Ref_To_Local'>histd</span></a> <span class='Operator'>&GT;= </span><span class='Number'>0</span> <span class='Operator'>&& </span><a href="zic.c.html#LN2098"><span class='Ref_To_Local'>mrustd</span></a> <span class='Operator'>&GT;= </span><span class='Number'>0</span> <span class='Operator'>&& </span><a href="zic.c.html#LN2100"><span class='Ref_To_Local'>histd</span></a> <span class='Operator'>!= </span><a href="zic.c.html#LN2098"><span class='Ref_To_Local'>mrustd</span></a> <span class='Operator'>&& 
</span>                <a href="zic.c.html#LN375"><span class='Ref_to_Global_Var'>gmtoffs</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN2100"><span class='Ref_To_Local'>histd</span></a><span class='Delimiter'>] </span><span class='Operator'>!= </span><a href="zic.c.html#LN375"><span class='Ref_to_Global_Var'>gmtoffs</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN2098"><span class='Ref_To_Local'>mrustd</span></a><span class='Delimiter'>]</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <a href="zic.c.html#LN376"><span class='Ref_to_Global_Var'>isdsts</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN2098"><span class='Ref_To_Local'>mrustd</span></a><span class='Delimiter'>] </span><span class='Operator'>= -</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>                <a href="zic.c.html#LN2101"><span class='Ref_To_Local'>type</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN3046"><span class='Ref_to_Func'>addtype</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN375"><span class='Ref_to_Global_Var'>gmtoffs</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN2098"><span class='Ref_To_Local'>mrustd</span></a><span class='Delimiter'>], 
</span>                               <span class='Operator'>&</span><a href="zic.c.html#LN380"><span class='Ref_to_Global_Var'>chars</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN377"><span class='Ref_to_Global_Var'>abbrinds</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN2098"><span class='Ref_To_Local'>mrustd</span></a><span class='Delimiter'>]], 
</span>                               <span class='Boolean'>false</span><span class='Delimiter'>, 
</span>                               <a href="zic.c.html#LN378"><span class='Ref_to_Global_Var'>ttisstds</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN2098"><span class='Ref_To_Local'>mrustd</span></a><span class='Delimiter'>], 
</span>                               <a href="zic.c.html#LN379"><span class='Ref_to_Global_Var'>ttisgmts</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN2098"><span class='Ref_To_Local'>mrustd</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="zic.c.html#LN376"><span class='Ref_to_Global_Var'>isdsts</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN2098"><span class='Ref_To_Local'>mrustd</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>                <a href="zic.c.html#LN2038"><span class='Ref_To_Local'>writetype</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN2101"><span class='Ref_To_Local'>type</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>} 
</span><span class='Directive'>#endif</span>   <span class='Comment_Multi_Line'>/* !defined 
                                 * LEAVE_SOME_PRE_2011_SYSTEMS_IN_THE_LURCH */ 
</span>        <a href="zic.c.html#LN2040"><span class='Ref_To_Local'>thistypecnt</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="zic.c.html#LN183"><span class='Ref_to_Global_Var'>typecnt</span></a><span class='Delimiter'>; </span><span class='Operator'>++</span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a><span class='Parentheses'>) 
</span>            <a href="zic.c.html#LN2039"><span class='Ref_To_Local'>typemap</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="zic.c.html#LN2038"><span class='Ref_To_Local'>writetype</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>? </span><a href="zic.c.html#LN2040"><span class='Ref_To_Local'>thistypecnt</span></a><span class='Operator'>++ : -</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><span class='Keyword'>sizeof </span><a href="zic.c.html#LN2044"><span class='Ref_To_Local'>indmap</span></a> <span class='Operator'>/ </span><span class='Keyword'>sizeof </span><a href="zic.c.html#LN2044"><span class='Ref_To_Local'>indmap</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]; </span><span class='Operator'>++</span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a><span class='Parentheses'>) 
</span>            <a href="zic.c.html#LN2044"><span class='Ref_To_Local'>indmap</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>= -</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN2042"><span class='Ref_To_Local'>thischarcnt</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="zic.c.html#LN183"><span class='Ref_to_Global_Var'>typecnt</span></a><span class='Delimiter'>; </span><span class='Operator'>++</span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN2152"></a>            <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>thisabbr</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="zic.c.html#LN2038"><span class='Ref_To_Local'>writetype</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Parentheses'>) 
</span>                <span class='Control'>continue</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2044"><span class='Ref_To_Local'>indmap</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN377"><span class='Ref_to_Global_Var'>abbrinds</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]] </span><span class='Operator'>&GT;= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                <span class='Control'>continue</span><span class='Delimiter'>; 
</span>            <a href="zic.c.html#LN2152"><span class='Ref_To_Local'>thisabbr</span></a> <span class='Operator'>= &</span><a href="zic.c.html#LN380"><span class='Ref_to_Global_Var'>chars</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN377"><span class='Ref_to_Global_Var'>abbrinds</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]]; 
</span>            <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN1868"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="zic.c.html#LN1868"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>&LT; </span><a href="zic.c.html#LN2042"><span class='Ref_To_Local'>thischarcnt</span></a><span class='Delimiter'>; </span><span class='Operator'>++</span><a href="zic.c.html#LN1868"><span class='Ref_To_Local'>j</span></a><span class='Parentheses'>) 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><span class='Operator'>&</span><a href="zic.c.html#LN2041"><span class='Ref_To_Local'>thischars</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1868"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>], </span><a href="zic.c.html#LN2152"><span class='Ref_To_Local'>thisabbr</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN1868"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>== </span><a href="zic.c.html#LN2042"><span class='Ref_To_Local'>thischarcnt</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <a href="../../contrib/cube/cubeparse.y.html#LN150"><span class='Ref_to_Proto'>strcpy</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="zic.c.html#LN2041"><span class='Ref_To_Local'>thischars</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN2042"><span class='Ref_To_Local'>thischarcnt</span></a><span class='Delimiter'>], </span><a href="zic.c.html#LN2152"><span class='Ref_To_Local'>thisabbr</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="zic.c.html#LN2042"><span class='Ref_To_Local'>thischarcnt</span></a> <span class='Operator'>+= </span>strlen<span class='Parentheses'>(</span><a href="zic.c.html#LN2152"><span class='Ref_To_Local'>thisabbr</span></a><span class='Parentheses'>) </span><span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <a href="zic.c.html#LN2044"><span class='Ref_To_Local'>indmap</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN377"><span class='Ref_to_Global_Var'>abbrinds</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]] </span><span class='Operator'>= </span><a href="zic.c.html#LN1868"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span><a name="LN2169"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>DO</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>field</span><span class='Parentheses'>)</span>   fwrite<span class='Parentheses'>(</span><a href="zic.c.html#LN1875"><span class='Ref_To_Local'>tzh</span></a><span class='Operator'>.</span>field<span class='Delimiter'>, </span><span class='Keyword'>sizeof </span><a href="zic.c.html#LN1875"><span class='Ref_To_Local'>tzh</span></a><span class='Operator'>.</span>field<span class='Delimiter'>, </span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="zic.c.html#LN1866"><span class='Ref_To_Local'>fp</span></a><span class='Parentheses'>) 
</span>        <a href="zic.c.html#LN1875"><span class='Ref_To_Local'>tzh</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN1874"><span class='Ref_To_Local'>tzh0</span></a><span class='Delimiter'>; 
</span>        strncpy<span class='Parentheses'>(</span><a href="zic.c.html#LN1875"><span class='Ref_To_Local'>tzh</span></a><span class='Operator'>.</span><a href="tzfile.h.html#LN34"><span class='Ref_to_Member'>tzh_magic</span></a><span class='Delimiter'>, </span><a href="tzfile.h.html#LN30"><span class='Ref_to_Const'>TZ_MAGIC</span></a><span class='Delimiter'>, </span><span class='Keyword'>sizeof </span><a href="zic.c.html#LN1875"><span class='Ref_To_Local'>tzh</span></a><span class='Operator'>.</span><a href="tzfile.h.html#LN34"><span class='Ref_to_Member'>tzh_magic</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN1875"><span class='Ref_To_Local'>tzh</span></a><span class='Operator'>.</span><a href="tzfile.h.html#LN35"><span class='Ref_to_Member'>tzh_version</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="zic.c.html#LN1864"><span class='Ref_to_Parameter'>version</span></a><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN1808"><span class='Ref_to_Func'>convert</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN2040"><span class='Ref_To_Local'>thistypecnt</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN1875"><span class='Ref_To_Local'>tzh</span></a><span class='Operator'>.</span><a href="tzfile.h.html#LN37"><span class='Ref_to_Member'>tzh_ttisgmtcnt</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN1808"><span class='Ref_to_Func'>convert</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN2040"><span class='Ref_To_Local'>thistypecnt</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN1875"><span class='Ref_To_Local'>tzh</span></a><span class='Operator'>.</span><a href="tzfile.h.html#LN38"><span class='Ref_to_Member'>tzh_ttisstdcnt</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN1808"><span class='Ref_to_Func'>convert</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN2036"><span class='Ref_To_Local'>thisleapcnt</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN1875"><span class='Ref_To_Local'>tzh</span></a><span class='Operator'>.</span><a href="tzfile.h.html#LN39"><span class='Ref_to_Member'>tzh_leapcnt</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN1808"><span class='Ref_to_Func'>convert</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN2033"><span class='Ref_To_Local'>thistimecnt</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN1875"><span class='Ref_To_Local'>tzh</span></a><span class='Operator'>.</span><a href="tzfile.h.html#LN40"><span class='Ref_to_Member'>tzh_timecnt</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN1808"><span class='Ref_to_Func'>convert</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN2040"><span class='Ref_To_Local'>thistypecnt</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN1875"><span class='Ref_To_Local'>tzh</span></a><span class='Operator'>.</span><a href="tzfile.h.html#LN41"><span class='Ref_to_Member'>tzh_typecnt</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN1808"><span class='Ref_to_Func'>convert</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN2042"><span class='Ref_To_Local'>thischarcnt</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN1875"><span class='Ref_To_Local'>tzh</span></a><span class='Operator'>.</span><a href="tzfile.h.html#LN42"><span class='Ref_to_Member'>tzh_charcnt</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN2169"><span class='Ref_to_Macro'>DO</span></a><span class='Parentheses'>(</span>tzh_magic<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN2169"><span class='Ref_to_Macro'>DO</span></a><span class='Parentheses'>(</span>tzh_version<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN2169"><span class='Ref_to_Macro'>DO</span></a><span class='Parentheses'>(</span>tzh_reserved<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN2169"><span class='Ref_to_Macro'>DO</span></a><span class='Parentheses'>(</span>tzh_ttisgmtcnt<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN2169"><span class='Ref_to_Macro'>DO</span></a><span class='Parentheses'>(</span>tzh_ttisstdcnt<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN2169"><span class='Ref_to_Macro'>DO</span></a><span class='Parentheses'>(</span>tzh_leapcnt<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN2169"><span class='Ref_to_Macro'>DO</span></a><span class='Parentheses'>(</span>tzh_timecnt<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN2169"><span class='Ref_to_Macro'>DO</span></a><span class='Parentheses'>(</span>tzh_typecnt<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN2169"><span class='Ref_to_Macro'>DO</span></a><span class='Parentheses'>(</span>tzh_charcnt<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Keyword'>#undef </span><a href="zic.c.html#LN2169"><span class='Ref_to_Macro'>DO</span></a> 
        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN2032"><span class='Ref_To_Local'>thistimei</span></a><span class='Delimiter'>; </span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="zic.c.html#LN2034"><span class='Ref_To_Local'>thistimelim</span></a><span class='Delimiter'>; </span><span class='Operator'>++</span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN1873"><span class='Ref_To_Local'>pass</span></a> <span class='Operator'>== </span><span class='Number'>1</span><span class='Parentheses'>) 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * Output an INT32_MIN "transition" if appropriate; see above. 
                 */ 
</span>                <a href="zic.c.html#LN1830"><span class='Ref_to_Func'>puttzcode</span></a><span class='Parentheses'>(((</span><a href="zic.c.html#LN1880"><span class='Ref_To_Local'>ats</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>&LT; </span><a href="../include/c.h.html#LN338"><span class='Ref_to_Const'>PG_INT32_MIN</span></a><span class='Parentheses'>) </span><span class='Operator'>? 
</span>                           <a href="../include/c.h.html#LN338"><span class='Ref_to_Const'>PG_INT32_MIN</span></a> <span class='Operator'>: </span><a href="zic.c.html#LN1880"><span class='Ref_To_Local'>ats</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="zic.c.html#LN1866"><span class='Ref_To_Local'>fp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> 
            <span class='Delimiter'>{ 
</span>                <a href="zic.c.html#LN1839"><span class='Ref_to_Func'>puttzcode64</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN1880"><span class='Ref_To_Local'>ats</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>], </span><a href="zic.c.html#LN1866"><span class='Ref_To_Local'>fp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* Print current timezone abbreviations if requested */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN176"><span class='Ref_to_Global_Var'>print_abbrevs</span></a> <span class='Operator'>&& 
</span>                    <span class='Parentheses'>(</span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>== </span><a href="zic.c.html#LN2034"><span class='Ref_To_Local'>thistimelim</span></a> <span class='Operator'>- </span><span class='Number'>1</span> <span class='Operator'>|| </span><a href="zic.c.html#LN1880"><span class='Ref_To_Local'>ats</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>] </span><span class='Operator'>&GT; </span><a href="zic.c.html#LN177"><span class='Ref_to_Global_Var'>print_cutoff</span></a><span class='Parentheses'>))</span> 
                <span class='Delimiter'>{ 
</span><a name="LN2205"></a>                    <span class='Keyword'>unsigned char </span><span class='Declare_Local'>tm</span> <span class='Operator'>= </span><a href="zic.c.html#LN2039"><span class='Ref_To_Local'>typemap</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1882"><span class='Ref_To_Local'>types</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]]; 
</span><a name="LN2206"></a>                    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>thisabbrev</span> <span class='Operator'>= &</span><a href="zic.c.html#LN2041"><span class='Ref_To_Local'>thischars</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN2044"><span class='Ref_To_Local'>indmap</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN377"><span class='Ref_to_Global_Var'>abbrinds</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN2205"><span class='Ref_To_Local'>tm</span></a><span class='Delimiter'>]]]; 
</span> 
                    <span class='Comment_Multi_Line'>/* filter out assorted junk entries */ 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="zic.c.html#LN2206"><span class='Ref_To_Local'>thisabbrev</span></a><span class='Delimiter'>, </span><a href="private.h.html#LN26"><span class='Ref_to_Const'>GRANDPARENTED</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span> <span class='Operator'>&& 
</span>                        strcmp<span class='Parentheses'>(</span><a href="zic.c.html#LN2206"><span class='Ref_To_Local'>thisabbrev</span></a><span class='Delimiter'>, </span><span class='String'>"zzz"</span><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
                        <a href="../../contrib/seg/segscan.l.html#LN10"><span class='Ref_to_Macro'>fprintf</span></a><span class='Parentheses'>(</span>stdout<span class='Delimiter'>, </span><span class='String'>"%s\t"</span> <a href="../include/c.h.html#LN314"><span class='Ref_to_Const'>INT64_FORMAT</span></a> <span class='String'>"%s\n"</span><span class='Delimiter'>, 
</span>                                <a href="zic.c.html#LN2206"><span class='Ref_To_Local'>thisabbrev</span></a><span class='Delimiter'>, 
</span>                                <a href="zic.c.html#LN375"><span class='Ref_to_Global_Var'>gmtoffs</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN2205"><span class='Ref_To_Local'>tm</span></a><span class='Delimiter'>], 
</span>                                <a href="zic.c.html#LN376"><span class='Ref_to_Global_Var'>isdsts</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN2205"><span class='Ref_To_Local'>tm</span></a><span class='Delimiter'>] </span><span class='Operator'>? </span><span class='String'>"\tD"</span> <span class='Operator'>: </span><span class='String'>""</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>            <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN2032"><span class='Ref_To_Local'>thistimei</span></a><span class='Delimiter'>; </span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="zic.c.html#LN2034"><span class='Ref_To_Local'>thistimelim</span></a><span class='Delimiter'>; </span><span class='Operator'>++</span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN2219"></a>            <span class='Keyword'>unsigned char </span><span class='Declare_Local'>uc</span><span class='Delimiter'>; 
</span> 
            <a href="zic.c.html#LN2219"><span class='Ref_To_Local'>uc</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN2039"><span class='Ref_To_Local'>typemap</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1882"><span class='Ref_To_Local'>types</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]]; 
</span>            fwrite<span class='Parentheses'>(</span><span class='Operator'>&</span><a href="zic.c.html#LN2219"><span class='Ref_To_Local'>uc</span></a><span class='Delimiter'>, </span><span class='Keyword'>sizeof </span><a href="zic.c.html#LN2219"><span class='Ref_To_Local'>uc</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="zic.c.html#LN1866"><span class='Ref_To_Local'>fp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="zic.c.html#LN183"><span class='Ref_to_Global_Var'>typecnt</span></a><span class='Delimiter'>; </span><span class='Operator'>++</span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2038"><span class='Ref_To_Local'>writetype</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <a href="zic.c.html#LN1830"><span class='Ref_to_Func'>puttzcode</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN375"><span class='Ref_to_Global_Var'>gmtoffs</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>], </span><a href="zic.c.html#LN1866"><span class='Ref_To_Local'>fp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                putc<span class='Parentheses'>(</span><a href="zic.c.html#LN376"><span class='Ref_to_Global_Var'>isdsts</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>], </span><a href="zic.c.html#LN1866"><span class='Ref_To_Local'>fp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                putc<span class='Parentheses'>((</span><span class='Keyword'>unsigned char</span><span class='Parentheses'>) </span><a href="zic.c.html#LN2044"><span class='Ref_To_Local'>indmap</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN377"><span class='Ref_to_Global_Var'>abbrinds</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]], </span><a href="zic.c.html#LN1866"><span class='Ref_To_Local'>fp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2042"><span class='Ref_To_Local'>thischarcnt</span></a> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            fwrite<span class='Parentheses'>(</span><a href="zic.c.html#LN2041"><span class='Ref_To_Local'>thischars</span></a><span class='Delimiter'>, </span><span class='Keyword'>sizeof </span><a href="zic.c.html#LN2041"><span class='Ref_To_Local'>thischars</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>], 
</span>                   <a href="zic.c.html#LN2042"><span class='Ref_To_Local'>thischarcnt</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN1866"><span class='Ref_To_Local'>fp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN2035"><span class='Ref_To_Local'>thisleapi</span></a><span class='Delimiter'>; </span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="zic.c.html#LN2037"><span class='Ref_To_Local'>thisleaplim</span></a><span class='Delimiter'>; </span><span class='Operator'>++</span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN2236"></a>            <a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a>       <span class='Declare_Local'>todo</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN383"><span class='Ref_to_Global_Var'>roll</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN181"><span class='Ref_to_Global_Var'>timecnt</span></a> <span class='Operator'>== </span><span class='Number'>0</span> <span class='Operator'>|| </span><a href="zic.c.html#LN381"><span class='Ref_to_Global_Var'>trans</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>&LT; </span><a href="zic.c.html#LN1880"><span class='Ref_To_Local'>ats</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <a href="zic.c.html#LN1868"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>                    <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN376"><span class='Ref_to_Global_Var'>isdsts</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1868"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Parentheses'>) 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>++</span><a href="zic.c.html#LN1868"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>&GT;= </span><a href="zic.c.html#LN183"><span class='Ref_to_Global_Var'>typecnt</span></a><span class='Parentheses'>) 
</span>                        <span class='Delimiter'>{ 
</span>                            <a href="zic.c.html#LN1868"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>                            <span class='Control'>break</span><span class='Delimiter'>; 
</span>                        <span class='Delimiter'>} 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>else</span> 
                <span class='Delimiter'>{ 
</span>                    <a href="zic.c.html#LN1868"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>                    <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN1868"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>&LT; </span><a href="zic.c.html#LN181"><span class='Ref_to_Global_Var'>timecnt</span></a> <span class='Operator'>&& 
</span>                           <a href="zic.c.html#LN381"><span class='Ref_to_Global_Var'>trans</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>&GT;= </span><a href="zic.c.html#LN1880"><span class='Ref_To_Local'>ats</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1868"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Parentheses'>) 
</span>                        <span class='Operator'>++</span><a href="zic.c.html#LN1868"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>; 
</span>                    <a href="zic.c.html#LN1868"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN1882"><span class='Ref_To_Local'>types</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1868"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>]; 
</span>                <span class='Delimiter'>} 
</span>                <a href="zic.c.html#LN2236"><span class='Ref_To_Local'>todo</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN3450"><span class='Ref_to_Func'>tadd</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN381"><span class='Ref_to_Global_Var'>trans</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>], </span><span class='Operator'>-</span><a href="zic.c.html#LN375"><span class='Ref_to_Global_Var'>gmtoffs</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1868"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if roll[i] &raquo; </span> 
            <span class='Control'>else</span> 
                <a href="zic.c.html#LN2236"><span class='Ref_To_Local'>todo</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN381"><span class='Ref_to_Global_Var'>trans</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN1873"><span class='Ref_To_Local'>pass</span></a> <span class='Operator'>== </span><span class='Number'>1</span><span class='Parentheses'>) 
</span>                <a href="zic.c.html#LN1830"><span class='Ref_to_Func'>puttzcode</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN2236"><span class='Ref_To_Local'>todo</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN1866"><span class='Ref_To_Local'>fp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> 
                <a href="zic.c.html#LN1839"><span class='Ref_to_Func'>puttzcode64</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN2236"><span class='Ref_To_Local'>todo</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN1866"><span class='Ref_To_Local'>fp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="zic.c.html#LN1830"><span class='Ref_to_Func'>puttzcode</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN382"><span class='Ref_to_Global_Var'>corr</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>], </span><a href="zic.c.html#LN1866"><span class='Ref_To_Local'>fp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=thisleapi;i&LT;thislea... &raquo; </span> 
        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="zic.c.html#LN183"><span class='Ref_to_Global_Var'>typecnt</span></a><span class='Delimiter'>; </span><span class='Operator'>++</span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2038"><span class='Ref_To_Local'>writetype</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Parentheses'>) 
</span>                putc<span class='Parentheses'>(</span><a href="zic.c.html#LN378"><span class='Ref_to_Global_Var'>ttisstds</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>], </span><a href="zic.c.html#LN1866"><span class='Ref_To_Local'>fp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="zic.c.html#LN183"><span class='Ref_to_Global_Var'>typecnt</span></a><span class='Delimiter'>; </span><span class='Operator'>++</span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2038"><span class='Ref_To_Local'>writetype</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Parentheses'>) 
</span>                putc<span class='Parentheses'>(</span><a href="zic.c.html#LN379"><span class='Ref_to_Global_Var'>ttisgmts</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN1867"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>], </span><a href="zic.c.html#LN1866"><span class='Ref_To_Local'>fp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for pass=1;pass&LT;=2;++pass &raquo; </span> 
    <a href="../../contrib/seg/segscan.l.html#LN10"><span class='Ref_to_Macro'>fprintf</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN1866"><span class='Ref_To_Local'>fp</span></a><span class='Delimiter'>, </span><span class='String'>"\n%s\n"</span><span class='Delimiter'>, </span><a href="zic.c.html#LN1864"><span class='Ref_to_Parameter'>string</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN504"><span class='Ref_to_Func'>close_file</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN1866"><span class='Ref_To_Local'>fp</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN560"><span class='Ref_to_Global_Var'>directory</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN1864"><span class='Ref_to_Parameter'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN1880"><span class='Ref_To_Local'>ats</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end writezone &raquo; </span> 
 
<span class='Keyword'>static char const </span><span class='Operator'>* 
</span><a name="LN2281"></a><span class='Declare_Function'>abbroffset</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>buf</span><span class='Delimiter'>, </span><a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a> <span class='Declare_Parameter'>offset</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2283"></a>    <span class='Keyword'>char</span>        <span class='Declare_Local'>sign</span> <span class='Operator'>= </span><span class='String'>'+'</span><span class='Delimiter'>; 
</span><a name="LN2284"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>seconds</span><span class='Delimiter'>, 
</span><a name="LN2285"></a>                <span class='Declare_Local'>minutes</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2281"><span class='Ref_to_Parameter'>offset</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="zic.c.html#LN2281"><span class='Ref_to_Parameter'>offset</span></a> <span class='Operator'>= -</span><a href="zic.c.html#LN2281"><span class='Ref_to_Parameter'>offset</span></a><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN2283"><span class='Ref_To_Local'>sign</span></a> <span class='Operator'>= </span><span class='String'>'-'</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="zic.c.html#LN2284"><span class='Ref_To_Local'>seconds</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN2281"><span class='Ref_to_Parameter'>offset</span></a> <span class='Operator'>% </span><a href="private.h.html#LN106"><span class='Ref_to_Const'>SECSPERMIN</span></a><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN2281"><span class='Ref_to_Parameter'>offset</span></a> <span class='Operator'>/= </span><a href="private.h.html#LN106"><span class='Ref_to_Const'>SECSPERMIN</span></a><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN2285"><span class='Ref_To_Local'>minutes</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN2281"><span class='Ref_to_Parameter'>offset</span></a> <span class='Operator'>% </span><a href="private.h.html#LN107"><span class='Ref_to_Const'>MINSPERHOUR</span></a><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN2281"><span class='Ref_to_Parameter'>offset</span></a> <span class='Operator'>/= </span><a href="private.h.html#LN107"><span class='Ref_to_Const'>MINSPERHOUR</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Number'>100</span> <span class='Operator'>&LT;= </span><a href="zic.c.html#LN2281"><span class='Ref_to_Parameter'>offset</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../interfaces/ecpg/test/expected/sql-dyntest.c.html#LN145"><span class='Ref_to_Func'>error</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"%%z UTC offset magnitude exceeds 99:59:59"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <span class='String'>"%z"</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span><a name="LN2304"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>p</span> <span class='Operator'>= </span><a href="zic.c.html#LN2281"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>; 
</span> 
        <span class='Operator'>*</span><a href="zic.c.html#LN2304"><span class='Ref_To_Local'>p</span></a><span class='Operator'>++ = </span><a href="zic.c.html#LN2283"><span class='Ref_To_Local'>sign</span></a><span class='Delimiter'>; 
</span>        <span class='Operator'>*</span><a href="zic.c.html#LN2304"><span class='Ref_To_Local'>p</span></a><span class='Operator'>++ = </span><span class='String'>'0'</span> <span class='Operator'>+ </span><a href="zic.c.html#LN2281"><span class='Ref_to_Parameter'>offset</span></a> <span class='Operator'>/ </span><span class='Number'>10</span><span class='Delimiter'>; 
</span>        <span class='Operator'>*</span><a href="zic.c.html#LN2304"><span class='Ref_To_Local'>p</span></a><span class='Operator'>++ = </span><span class='String'>'0'</span> <span class='Operator'>+ </span><a href="zic.c.html#LN2281"><span class='Ref_to_Parameter'>offset</span></a> <span class='Operator'>% </span><span class='Number'>10</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2285"><span class='Ref_To_Local'>minutes</span></a> <span class='Operator'>| </span><a href="zic.c.html#LN2284"><span class='Ref_To_Local'>seconds</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Operator'>*</span><a href="zic.c.html#LN2304"><span class='Ref_To_Local'>p</span></a><span class='Operator'>++ = </span><span class='String'>'0'</span> <span class='Operator'>+ </span><a href="zic.c.html#LN2285"><span class='Ref_To_Local'>minutes</span></a> <span class='Operator'>/ </span><span class='Number'>10</span><span class='Delimiter'>; 
</span>            <span class='Operator'>*</span><a href="zic.c.html#LN2304"><span class='Ref_To_Local'>p</span></a><span class='Operator'>++ = </span><span class='String'>'0'</span> <span class='Operator'>+ </span><a href="zic.c.html#LN2285"><span class='Ref_To_Local'>minutes</span></a> <span class='Operator'>% </span><span class='Number'>10</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2284"><span class='Ref_To_Local'>seconds</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Operator'>*</span><a href="zic.c.html#LN2304"><span class='Ref_To_Local'>p</span></a><span class='Operator'>++ = </span><span class='String'>'0'</span> <span class='Operator'>+ </span><a href="zic.c.html#LN2284"><span class='Ref_To_Local'>seconds</span></a> <span class='Operator'>/ </span><span class='Number'>10</span><span class='Delimiter'>; 
</span>                <span class='Operator'>*</span><a href="zic.c.html#LN2304"><span class='Ref_To_Local'>p</span></a><span class='Operator'>++ = </span><span class='String'>'0'</span> <span class='Operator'>+ </span><a href="zic.c.html#LN2284"><span class='Ref_To_Local'>seconds</span></a> <span class='Operator'>% </span><span class='Number'>10</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>} 
</span>        <span class='Operator'>*</span><a href="zic.c.html#LN2304"><span class='Ref_To_Local'>p</span></a> <span class='Operator'>= </span><span class='String'>'\0'</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <a href="zic.c.html#LN2281"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
<span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end abbroffset &raquo; </span> 
 
<span class='Keyword'>static </span>size_t 
<a name="LN2325"></a><span class='Declare_Function'>doabbr</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>abbr</span><span class='Delimiter'>, </span><span class='Control'>struct</span> <a href="zic.c.html#LN89"><span class='Ref_to_Struct'>zone</span></a> <span class='Keyword'>const </span><span class='Operator'>* </span><span class='Declare_Parameter'>zp</span><span class='Delimiter'>, </span><span class='Keyword'>char const </span><span class='Operator'>* </span><span class='Declare_Parameter'>letters</span><span class='Delimiter'>, 
</span><a name="LN2326"></a>       <a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a> <span class='Declare_Parameter'>stdoff</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>doquotes</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2328"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>cp</span><span class='Delimiter'>; 
</span><a name="LN2329"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>slashp</span><span class='Delimiter'>; 
</span><a name="LN2330"></a>    size_t      <span class='Declare_Local'>len</span><span class='Delimiter'>; 
</span><a name="LN2331"></a>    <span class='Keyword'>char const </span><span class='Operator'>*</span><span class='Declare_Local'>format</span> <span class='Operator'>= </span><a href="zic.c.html#LN2325"><span class='Ref_to_Parameter'>zp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN97"><span class='Ref_to_Member'>z_format</span></a><span class='Delimiter'>; 
</span> 
    <a href="zic.c.html#LN2329"><span class='Ref_To_Local'>slashp</span></a> <span class='Operator'>= </span>strchr<span class='Parentheses'>(</span><a href="zic.c.html#LN2331"><span class='Ref_To_Local'>format</span></a><span class='Delimiter'>, </span><span class='String'>'/'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2329"><span class='Ref_To_Local'>slashp</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN2336"></a>        <span class='Keyword'>char</span>        <span class='Declare_Local'>letterbuf</span><span class='Delimiter'>[</span>PERCENT_Z_LEN_BOUND <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>]; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2325"><span class='Ref_to_Parameter'>zp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN98"><span class='Ref_to_Member'>z_format_specifier</span></a> <span class='Operator'>== </span><span class='String'>'z'</span><span class='Parentheses'>) 
</span>            <a href="zic.c.html#LN2325"><span class='Ref_to_Parameter'>letters</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN2280"><span class='Ref_to_Func'>abbroffset</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN2336"><span class='Ref_To_Local'>letterbuf</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN2325"><span class='Ref_to_Parameter'>zp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN95"><span class='Ref_to_Member'>z_gmtoff</span></a> <span class='Operator'>+ </span><a href="zic.c.html#LN2326"><span class='Ref_to_Parameter'>stdoff</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="zic.c.html#LN2325"><span class='Ref_to_Parameter'>letters</span></a><span class='Parentheses'>) 
</span>            <a href="zic.c.html#LN2325"><span class='Ref_to_Parameter'>letters</span></a> <span class='Operator'>= </span><span class='String'>"%s"</span><span class='Delimiter'>; 
</span>        <a href="../include/port.h.html#LN170"><span class='Ref_to_Macro'>sprintf</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN2325"><span class='Ref_to_Parameter'>abbr</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN2331"><span class='Ref_To_Local'>format</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN2325"><span class='Ref_to_Parameter'>letters</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2326"><span class='Ref_to_Parameter'>stdoff</span></a> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../contrib/cube/cubeparse.y.html#LN150"><span class='Ref_to_Proto'>strcpy</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN2325"><span class='Ref_to_Parameter'>abbr</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN2329"><span class='Ref_To_Local'>slashp</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        memcpy<span class='Parentheses'>(</span><a href="zic.c.html#LN2325"><span class='Ref_to_Parameter'>abbr</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN2331"><span class='Ref_To_Local'>format</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN2329"><span class='Ref_To_Local'>slashp</span></a> <span class='Operator'>- </span><a href="zic.c.html#LN2331"><span class='Ref_To_Local'>format</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN2325"><span class='Ref_to_Parameter'>abbr</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN2329"><span class='Ref_To_Local'>slashp</span></a> <span class='Operator'>- </span><a href="zic.c.html#LN2331"><span class='Ref_To_Local'>format</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='String'>'\0'</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <a href="zic.c.html#LN2330"><span class='Ref_To_Local'>len</span></a> <span class='Operator'>= </span>strlen<span class='Parentheses'>(</span><a href="zic.c.html#LN2325"><span class='Ref_to_Parameter'>abbr</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="zic.c.html#LN2326"><span class='Ref_to_Parameter'>doquotes</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <a href="zic.c.html#LN2330"><span class='Ref_To_Local'>len</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2328"><span class='Ref_To_Local'>cp</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN2325"><span class='Ref_to_Parameter'>abbr</span></a><span class='Delimiter'>; </span><a href="zic.c.html#LN3212"><span class='Ref_to_Func'>is_alpha</span></a><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="zic.c.html#LN2328"><span class='Ref_To_Local'>cp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; </span><a href="zic.c.html#LN2328"><span class='Ref_To_Local'>cp</span></a><span class='Operator'>++</span><span class='Parentheses'>)</span> 
        <span class='Control'>continue</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2330"><span class='Ref_To_Local'>len</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span> <span class='Operator'>&& *</span><a href="zic.c.html#LN2328"><span class='Ref_To_Local'>cp</span></a> <span class='Operator'>== </span><span class='String'>'\0'</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <a href="zic.c.html#LN2330"><span class='Ref_To_Local'>len</span></a><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN2325"><span class='Ref_to_Parameter'>abbr</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN2330"><span class='Ref_To_Local'>len</span></a> <span class='Operator'>+ </span><span class='Number'>2</span><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='String'>'\0'</span><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN2325"><span class='Ref_to_Parameter'>abbr</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN2330"><span class='Ref_To_Local'>len</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='String'>'&GT;'</span><span class='Delimiter'>; 
</span>    <a href="../include/c.h.html#LN1057"><span class='Ref_to_Macro'>memmove</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN2325"><span class='Ref_to_Parameter'>abbr</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="zic.c.html#LN2325"><span class='Ref_to_Parameter'>abbr</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN2330"><span class='Ref_To_Local'>len</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN2325"><span class='Ref_to_Parameter'>abbr</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='String'>'&LT;'</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="zic.c.html#LN2330"><span class='Ref_To_Local'>len</span></a> <span class='Operator'>+ </span><span class='Number'>2</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end doabbr &raquo; </span> 
 
<span class='Keyword'>static void 
</span><a name="LN2368"></a><span class='Declare_Function'>updateminmax</span><span class='Parentheses'>(</span><span class='Keyword'>const </span><a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a> <span class='Declare_Parameter'>x</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN174"><span class='Ref_to_Global_Var'>min_year</span></a> <span class='Operator'>&GT; </span><a href="zic.c.html#LN2368"><span class='Ref_to_Parameter'>x</span></a><span class='Parentheses'>) 
</span>        <a href="zic.c.html#LN174"><span class='Ref_to_Global_Var'>min_year</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN2368"><span class='Ref_to_Parameter'>x</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN173"><span class='Ref_to_Global_Var'>max_year</span></a> <span class='Operator'>&LT; </span><a href="zic.c.html#LN2368"><span class='Ref_to_Parameter'>x</span></a><span class='Parentheses'>) 
</span>        <a href="zic.c.html#LN173"><span class='Ref_to_Global_Var'>max_year</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN2368"><span class='Ref_to_Parameter'>x</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Keyword'>static int 
</span><a name="LN2377"></a><span class='Declare_Function'>stringoffset</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>result</span><span class='Delimiter'>, </span><a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a> <span class='Declare_Parameter'>offset</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2379"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>hours</span><span class='Delimiter'>; 
</span><a name="LN2380"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>minutes</span><span class='Delimiter'>; 
</span><a name="LN2381"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>seconds</span><span class='Delimiter'>; 
</span><a name="LN2382"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>negative</span> <span class='Operator'>= </span><a href="zic.c.html#LN2377"><span class='Ref_to_Parameter'>offset</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Delimiter'>; 
</span><a name="LN2383"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>len</span> <span class='Operator'>= </span><a href="zic.c.html#LN2382"><span class='Ref_To_Local'>negative</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2382"><span class='Ref_To_Local'>negative</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="zic.c.html#LN2377"><span class='Ref_to_Parameter'>offset</span></a> <span class='Operator'>= -</span><a href="zic.c.html#LN2377"><span class='Ref_to_Parameter'>offset</span></a><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN2377"><span class='Ref_to_Parameter'>result</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='String'>'-'</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <a href="zic.c.html#LN2381"><span class='Ref_To_Local'>seconds</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN2377"><span class='Ref_to_Parameter'>offset</span></a> <span class='Operator'>% </span><a href="private.h.html#LN106"><span class='Ref_to_Const'>SECSPERMIN</span></a><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN2377"><span class='Ref_to_Parameter'>offset</span></a> <span class='Operator'>/= </span><a href="private.h.html#LN106"><span class='Ref_to_Const'>SECSPERMIN</span></a><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN2380"><span class='Ref_To_Local'>minutes</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN2377"><span class='Ref_to_Parameter'>offset</span></a> <span class='Operator'>% </span><a href="private.h.html#LN107"><span class='Ref_to_Const'>MINSPERHOUR</span></a><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN2377"><span class='Ref_to_Parameter'>offset</span></a> <span class='Operator'>/= </span><a href="private.h.html#LN107"><span class='Ref_to_Const'>MINSPERHOUR</span></a><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN2379"><span class='Ref_To_Local'>hours</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN2377"><span class='Ref_to_Parameter'>offset</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2379"><span class='Ref_To_Local'>hours</span></a> <span class='Operator'>&GT;= </span><a href="private.h.html#LN108"><span class='Ref_to_Const'>HOURSPERDAY</span></a> <span class='Operator'>* </span><a href="private.h.html#LN109"><span class='Ref_to_Const'>DAYSPERWEEK</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="zic.c.html#LN2377"><span class='Ref_to_Parameter'>result</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='String'>'\0'</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <a href="zic.c.html#LN2383"><span class='Ref_To_Local'>len</span></a> <span class='Operator'>+= </span><a href="../include/port.h.html#LN170"><span class='Ref_to_Macro'>sprintf</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN2377"><span class='Ref_to_Parameter'>result</span></a> <span class='Operator'>+ </span><a href="zic.c.html#LN2383"><span class='Ref_To_Local'>len</span></a><span class='Delimiter'>, </span><span class='String'>"%d"</span><span class='Delimiter'>, </span><a href="zic.c.html#LN2379"><span class='Ref_To_Local'>hours</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2380"><span class='Ref_To_Local'>minutes</span></a> <span class='Operator'>!= </span><span class='Number'>0</span> <span class='Operator'>|| </span><a href="zic.c.html#LN2381"><span class='Ref_To_Local'>seconds</span></a> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="zic.c.html#LN2383"><span class='Ref_To_Local'>len</span></a> <span class='Operator'>+= </span><a href="../include/port.h.html#LN170"><span class='Ref_to_Macro'>sprintf</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN2377"><span class='Ref_to_Parameter'>result</span></a> <span class='Operator'>+ </span><a href="zic.c.html#LN2383"><span class='Ref_To_Local'>len</span></a><span class='Delimiter'>, </span><span class='String'>":%02d"</span><span class='Delimiter'>, </span><a href="zic.c.html#LN2380"><span class='Ref_To_Local'>minutes</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2381"><span class='Ref_To_Local'>seconds</span></a> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <a href="zic.c.html#LN2383"><span class='Ref_To_Local'>len</span></a> <span class='Operator'>+= </span><a href="../include/port.h.html#LN170"><span class='Ref_to_Macro'>sprintf</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN2377"><span class='Ref_to_Parameter'>result</span></a> <span class='Operator'>+ </span><a href="zic.c.html#LN2383"><span class='Ref_To_Local'>len</span></a><span class='Delimiter'>, </span><span class='String'>":%02d"</span><span class='Delimiter'>, </span><a href="zic.c.html#LN2381"><span class='Ref_To_Local'>seconds</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>return</span> <a href="zic.c.html#LN2383"><span class='Ref_To_Local'>len</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end stringoffset &raquo; </span> 
 
<span class='Keyword'>static int 
</span><a name="LN2411"></a><span class='Declare_Function'>stringrule</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>result</span><span class='Delimiter'>, </span><span class='Keyword'>const </span><span class='Control'>struct</span> <a href="localtime.c.html#LN81"><span class='Ref_to_Struct'>rule</span></a> <span class='Operator'>* </span><span class='Keyword'>const </span><span class='Declare_Parameter'>rp</span><span class='Delimiter'>, </span><span class='Keyword'>const </span><a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a> <span class='Declare_Parameter'>dstoff</span><span class='Delimiter'>, 
</span><a name="LN2412"></a>           <span class='Keyword'>const </span><a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a> <span class='Declare_Parameter'>gmtoff</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2414"></a>    <a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a>       <span class='Declare_Local'>tod</span> <span class='Operator'>= </span><a href="zic.c.html#LN2411"><span class='Ref_to_Parameter'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN70"><span class='Ref_to_Member'>r_tod</span></a><span class='Delimiter'>; 
</span><a name="LN2415"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>compat</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2411"><span class='Ref_to_Parameter'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN66"><span class='Ref_to_Member'>r_dycode</span></a> <span class='Operator'>== </span><a href="zic.c.html#LN85"><span class='Ref_to_Const'>DC_DOM</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN2419"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>month</span><span class='Delimiter'>, 
</span><a name="LN2420"></a>                    <span class='Declare_Local'>total</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2411"><span class='Ref_to_Parameter'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN67"><span class='Ref_to_Member'>r_dayofmonth</span></a> <span class='Operator'>== </span><span class='Number'>29</span> <span class='Operator'>&& </span><a href="zic.c.html#LN2411"><span class='Ref_to_Parameter'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN64"><span class='Ref_to_Member'>r_month</span></a> <span class='Operator'>== </span><a href="private.h.html#LN125"><span class='Ref_to_Const'>TM_FEBRUARY</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN2420"><span class='Ref_To_Local'>total</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2419"><span class='Ref_To_Local'>month</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="zic.c.html#LN2419"><span class='Ref_To_Local'>month</span></a> <span class='Operator'>&LT; </span><a href="zic.c.html#LN2411"><span class='Ref_to_Parameter'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN64"><span class='Ref_to_Member'>r_month</span></a><span class='Delimiter'>; </span><span class='Operator'>++</span><a href="zic.c.html#LN2419"><span class='Ref_To_Local'>month</span></a><span class='Parentheses'>) 
</span>            <a href="zic.c.html#LN2420"><span class='Ref_To_Local'>total</span></a> <span class='Operator'>+= </span><a href="zic.c.html#LN360"><span class='Ref_to_Global_Var'>len_months</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>][</span><a href="zic.c.html#LN2419"><span class='Ref_To_Local'>month</span></a><span class='Delimiter'>]; 
</span>        <span class='Comment_Multi_Line'>/* Omit the "J" in Jan and Feb, as that's shorter.  */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2411"><span class='Ref_to_Parameter'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN64"><span class='Ref_to_Member'>r_month</span></a> <span class='Operator'>&LT;= </span><span class='Number'>1</span><span class='Parentheses'>) 
</span>            <a href="zic.c.html#LN2411"><span class='Ref_to_Parameter'>result</span></a> <span class='Operator'>+= </span><a href="../include/port.h.html#LN170"><span class='Ref_to_Macro'>sprintf</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN2411"><span class='Ref_to_Parameter'>result</span></a><span class='Delimiter'>, </span><span class='String'>"%d"</span><span class='Delimiter'>, </span><a href="zic.c.html#LN2420"><span class='Ref_To_Local'>total</span></a> <span class='Operator'>+ </span><a href="zic.c.html#LN2411"><span class='Ref_to_Parameter'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN67"><span class='Ref_to_Member'>r_dayofmonth</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <a href="zic.c.html#LN2411"><span class='Ref_to_Parameter'>result</span></a> <span class='Operator'>+= </span><a href="../include/port.h.html#LN170"><span class='Ref_to_Macro'>sprintf</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN2411"><span class='Ref_to_Parameter'>result</span></a><span class='Delimiter'>, </span><span class='String'>"J%d"</span><span class='Delimiter'>, </span><a href="zic.c.html#LN2420"><span class='Ref_To_Local'>total</span></a> <span class='Operator'>+ </span><a href="zic.c.html#LN2411"><span class='Ref_to_Parameter'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN67"><span class='Ref_to_Member'>r_dayofmonth</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span><a name="LN2435"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>week</span><span class='Delimiter'>; 
</span><a name="LN2436"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>wday</span> <span class='Operator'>= </span><a href="zic.c.html#LN2411"><span class='Ref_to_Parameter'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN68"><span class='Ref_to_Member'>r_wday</span></a><span class='Delimiter'>; 
</span><a name="LN2437"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>wdayoff</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2411"><span class='Ref_to_Parameter'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN66"><span class='Ref_to_Member'>r_dycode</span></a> <span class='Operator'>== </span><a href="zic.c.html#LN86"><span class='Ref_to_Const'>DC_DOWGEQ</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="zic.c.html#LN2437"><span class='Ref_To_Local'>wdayoff</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="zic.c.html#LN2411"><span class='Ref_to_Parameter'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN67"><span class='Ref_to_Member'>r_dayofmonth</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Parentheses'>) </span><span class='Operator'>% </span><a href="private.h.html#LN109"><span class='Ref_to_Const'>DAYSPERWEEK</span></a><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2437"><span class='Ref_To_Local'>wdayoff</span></a><span class='Parentheses'>) 
</span>                <a href="zic.c.html#LN2415"><span class='Ref_To_Local'>compat</span></a> <span class='Operator'>= </span><span class='Number'>2013</span><span class='Delimiter'>; 
</span>            <a href="zic.c.html#LN2436"><span class='Ref_To_Local'>wday</span></a> <span class='Operator'>-= </span><a href="zic.c.html#LN2437"><span class='Ref_To_Local'>wdayoff</span></a><span class='Delimiter'>; 
</span>            <a href="zic.c.html#LN2414"><span class='Ref_To_Local'>tod</span></a> <span class='Operator'>+= </span><a href="zic.c.html#LN2437"><span class='Ref_To_Local'>wdayoff</span></a> <span class='Operator'>* </span><a href="private.h.html#LN113"><span class='Ref_to_Const'>SECSPERDAY</span></a><span class='Delimiter'>; 
</span>            <a href="zic.c.html#LN2435"><span class='Ref_To_Local'>week</span></a> <span class='Operator'>= </span><span class='Number'>1</span> <span class='Operator'>+ </span><span class='Parentheses'>(</span><a href="zic.c.html#LN2411"><span class='Ref_to_Parameter'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN67"><span class='Ref_to_Member'>r_dayofmonth</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Parentheses'>) </span><span class='Operator'>/ </span><a href="private.h.html#LN109"><span class='Ref_to_Const'>DAYSPERWEEK</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2411"><span class='Ref_to_Parameter'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN66"><span class='Ref_to_Member'>r_dycode</span></a> <span class='Operator'>== </span><a href="zic.c.html#LN87"><span class='Ref_to_Const'>DC_DOWLEQ</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2411"><span class='Ref_to_Parameter'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN67"><span class='Ref_to_Member'>r_dayofmonth</span></a> <span class='Operator'>== </span><a href="zic.c.html#LN360"><span class='Ref_to_Global_Var'>len_months</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>][</span><a href="zic.c.html#LN2411"><span class='Ref_to_Parameter'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN64"><span class='Ref_to_Member'>r_month</span></a><span class='Delimiter'>]</span><span class='Parentheses'>) 
</span>                <a href="zic.c.html#LN2435"><span class='Ref_To_Local'>week</span></a> <span class='Operator'>= </span><span class='Number'>5</span><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> 
            <span class='Delimiter'>{ 
</span>                <a href="zic.c.html#LN2437"><span class='Ref_To_Local'>wdayoff</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN2411"><span class='Ref_to_Parameter'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN67"><span class='Ref_to_Member'>r_dayofmonth</span></a> <span class='Operator'>% </span><a href="private.h.html#LN109"><span class='Ref_to_Const'>DAYSPERWEEK</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2437"><span class='Ref_To_Local'>wdayoff</span></a><span class='Parentheses'>) 
</span>                    <a href="zic.c.html#LN2415"><span class='Ref_To_Local'>compat</span></a> <span class='Operator'>= </span><span class='Number'>2013</span><span class='Delimiter'>; 
</span>                <a href="zic.c.html#LN2436"><span class='Ref_To_Local'>wday</span></a> <span class='Operator'>-= </span><a href="zic.c.html#LN2437"><span class='Ref_To_Local'>wdayoff</span></a><span class='Delimiter'>; 
</span>                <a href="zic.c.html#LN2414"><span class='Ref_To_Local'>tod</span></a> <span class='Operator'>+= </span><a href="zic.c.html#LN2437"><span class='Ref_To_Local'>wdayoff</span></a> <span class='Operator'>* </span><a href="private.h.html#LN113"><span class='Ref_to_Const'>SECSPERDAY</span></a><span class='Delimiter'>; 
</span>                <a href="zic.c.html#LN2435"><span class='Ref_To_Local'>week</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN2411"><span class='Ref_to_Parameter'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN67"><span class='Ref_to_Member'>r_dayofmonth</span></a> <span class='Operator'>/ </span><a href="private.h.html#LN109"><span class='Ref_to_Const'>DAYSPERWEEK</span></a><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
            <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>;</span>          <span class='Comment_Single_Line'>/* "cannot happen" */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2436"><span class='Ref_To_Local'>wday</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <a href="zic.c.html#LN2436"><span class='Ref_To_Local'>wday</span></a> <span class='Operator'>+= </span><a href="private.h.html#LN109"><span class='Ref_to_Const'>DAYSPERWEEK</span></a><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN2411"><span class='Ref_to_Parameter'>result</span></a> <span class='Operator'>+= </span><a href="../include/port.h.html#LN170"><span class='Ref_to_Macro'>sprintf</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN2411"><span class='Ref_to_Parameter'>result</span></a><span class='Delimiter'>, </span><span class='String'>"M%d.%d.%d"</span><span class='Delimiter'>, 
</span>                          <a href="zic.c.html#LN2411"><span class='Ref_to_Parameter'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN64"><span class='Ref_to_Member'>r_month</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="zic.c.html#LN2435"><span class='Ref_To_Local'>week</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN2436"><span class='Ref_To_Local'>wday</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2411"><span class='Ref_to_Parameter'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN73"><span class='Ref_to_Member'>r_todisgmt</span></a><span class='Parentheses'>) 
</span>        <a href="zic.c.html#LN2414"><span class='Ref_To_Local'>tod</span></a> <span class='Operator'>+= </span><a href="zic.c.html#LN2412"><span class='Ref_to_Parameter'>gmtoff</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2411"><span class='Ref_to_Parameter'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN71"><span class='Ref_to_Member'>r_todisstd</span></a> <span class='Operator'>&& </span><a href="zic.c.html#LN2411"><span class='Ref_to_Parameter'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN74"><span class='Ref_to_Member'>r_stdoff</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <a href="zic.c.html#LN2414"><span class='Ref_To_Local'>tod</span></a> <span class='Operator'>+= </span><a href="zic.c.html#LN2411"><span class='Ref_to_Parameter'>dstoff</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2414"><span class='Ref_To_Local'>tod</span></a> <span class='Operator'>!= </span><span class='Number'>2</span> <span class='Operator'>* </span><a href="private.h.html#LN106"><span class='Ref_to_Const'>SECSPERMIN</span></a> <span class='Operator'>* </span><a href="private.h.html#LN107"><span class='Ref_to_Const'>MINSPERHOUR</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Operator'>*</span><a href="zic.c.html#LN2411"><span class='Ref_to_Parameter'>result</span></a><span class='Operator'>++ = </span><span class='String'>'/'</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="zic.c.html#LN2376"><span class='Ref_to_Func'>stringoffset</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN2411"><span class='Ref_to_Parameter'>result</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN2414"><span class='Ref_To_Local'>tod</span></a><span class='Parentheses'>))</span> 
            <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2414"><span class='Ref_To_Local'>tod</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2415"><span class='Ref_To_Local'>compat</span></a> <span class='Operator'>&LT; </span><span class='Number'>2013</span><span class='Parentheses'>) 
</span>                <a href="zic.c.html#LN2415"><span class='Ref_To_Local'>compat</span></a> <span class='Operator'>= </span><span class='Number'>2013</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="private.h.html#LN113"><span class='Ref_to_Const'>SECSPERDAY</span></a> <span class='Operator'>&LT;= </span><a href="zic.c.html#LN2414"><span class='Ref_To_Local'>tod</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2415"><span class='Ref_To_Local'>compat</span></a> <span class='Operator'>&LT; </span><span class='Number'>1994</span><span class='Parentheses'>) 
</span>                <a href="zic.c.html#LN2415"><span class='Ref_To_Local'>compat</span></a> <span class='Operator'>= </span><span class='Number'>1994</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>return</span> <a href="zic.c.html#LN2415"><span class='Ref_To_Local'>compat</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end stringrule &raquo; </span> 
 
<span class='Keyword'>static int 
</span><a name="LN2493"></a><span class='Declare_Function'>rule_cmp</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="localtime.c.html#LN81"><span class='Ref_to_Struct'>rule</span></a> <span class='Keyword'>const </span><span class='Operator'>* </span><span class='Declare_Parameter'>a</span><span class='Delimiter'>, </span><span class='Control'>struct</span> <a href="localtime.c.html#LN81"><span class='Ref_to_Struct'>rule</span></a> <span class='Keyword'>const </span><span class='Operator'>* </span><span class='Declare_Parameter'>b</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="zic.c.html#LN2493"><span class='Ref_to_Parameter'>a</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Operator'>-!!</span><a href="zic.c.html#LN2493"><span class='Ref_to_Parameter'>b</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="zic.c.html#LN2493"><span class='Ref_to_Parameter'>b</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2493"><span class='Ref_to_Parameter'>a</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN59"><span class='Ref_to_Member'>r_hiyear</span></a> <span class='Operator'>!= </span><a href="zic.c.html#LN2493"><span class='Ref_to_Parameter'>b</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN59"><span class='Ref_to_Member'>r_hiyear</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <a href="zic.c.html#LN2493"><span class='Ref_to_Parameter'>a</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN59"><span class='Ref_to_Member'>r_hiyear</span></a> <span class='Operator'>&LT; </span><a href="zic.c.html#LN2493"><span class='Ref_to_Parameter'>b</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN59"><span class='Ref_to_Member'>r_hiyear</span></a> <span class='Operator'>? -</span><span class='Number'>1</span> <span class='Operator'>: </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2493"><span class='Ref_to_Parameter'>a</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN64"><span class='Ref_to_Member'>r_month</span></a> <span class='Operator'>- </span><a href="zic.c.html#LN2493"><span class='Ref_to_Parameter'>b</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN64"><span class='Ref_to_Member'>r_month</span></a> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <a href="zic.c.html#LN2493"><span class='Ref_to_Parameter'>a</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN64"><span class='Ref_to_Member'>r_month</span></a> <span class='Operator'>- </span><a href="zic.c.html#LN2493"><span class='Ref_to_Parameter'>b</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN64"><span class='Ref_to_Member'>r_month</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="zic.c.html#LN2493"><span class='Ref_to_Parameter'>a</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN67"><span class='Ref_to_Member'>r_dayofmonth</span></a> <span class='Operator'>- </span><a href="zic.c.html#LN2493"><span class='Ref_to_Parameter'>b</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN67"><span class='Ref_to_Member'>r_dayofmonth</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Control'>enum</span> 
<span class='Delimiter'>{ 
</span><a name="LN2508"></a><span class='Declare_Enum_Const'>YEAR_BY_YEAR_ZONE</span> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>}; 
</span> 
<span class='Keyword'>static int 
</span><a name="LN2511"></a><span class='Declare_Function'>stringzone</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>result</span><span class='Delimiter'>, </span><span class='Control'>struct</span> <a href="zic.c.html#LN89"><span class='Ref_to_Struct'>zone</span></a> <span class='Keyword'>const </span><span class='Operator'>* </span><span class='Declare_Parameter'>zpfirst</span><span class='Delimiter'>, </span>ptrdiff_t <span class='Declare_Parameter'>zonecount</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2513"></a>    <span class='Keyword'>const </span><span class='Control'>struct</span> <a href="zic.c.html#LN89"><span class='Ref_to_Struct'>zone</span></a> <span class='Operator'>*</span><span class='Declare_Local'>zp</span><span class='Delimiter'>; 
</span><a name="LN2514"></a>    <span class='Control'>struct</span> <a href="localtime.c.html#LN81"><span class='Ref_to_Struct'>rule</span></a> <span class='Operator'>*</span><span class='Declare_Local'>rp</span><span class='Delimiter'>; 
</span><a name="LN2515"></a>    <span class='Control'>struct</span> <a href="localtime.c.html#LN81"><span class='Ref_to_Struct'>rule</span></a> <span class='Operator'>*</span><span class='Declare_Local'>stdrp</span><span class='Delimiter'>; 
</span><a name="LN2516"></a>    <span class='Control'>struct</span> <a href="localtime.c.html#LN81"><span class='Ref_to_Struct'>rule</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dstrp</span><span class='Delimiter'>; 
</span><a name="LN2517"></a>    ptrdiff_t   <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN2518"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>abbrvar</span><span class='Delimiter'>; 
</span><a name="LN2519"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>compat</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span><a name="LN2520"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>c</span><span class='Delimiter'>; 
</span><a name="LN2521"></a>    size_t      <span class='Declare_Local'>len</span><span class='Delimiter'>; 
</span><a name="LN2522"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>offsetlen</span><span class='Delimiter'>; 
</span><a name="LN2523"></a>    <span class='Control'>struct</span> <a href="localtime.c.html#LN81"><span class='Ref_to_Struct'>rule</span></a> <span class='Declare_Local'>stdr</span><span class='Delimiter'>, 
</span><a name="LN2524"></a>                <span class='Declare_Local'>dstr</span><span class='Delimiter'>; 
</span> 
    <a href="zic.c.html#LN2511"><span class='Ref_to_Parameter'>result</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='String'>'\0'</span><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN2513"><span class='Ref_To_Local'>zp</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN2511"><span class='Ref_to_Parameter'>zpfirst</span></a> <span class='Operator'>+ </span><a href="zic.c.html#LN2511"><span class='Ref_to_Parameter'>zonecount</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN2515"><span class='Ref_To_Local'>stdrp</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN2516"><span class='Ref_To_Local'>dstrp</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2517"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="zic.c.html#LN2517"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="zic.c.html#LN2513"><span class='Ref_To_Local'>zp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN103"><span class='Ref_to_Member'>z_nrules</span></a><span class='Delimiter'>; </span><span class='Operator'>++</span><a href="zic.c.html#LN2517"><span class='Ref_To_Local'>i</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="zic.c.html#LN2514"><span class='Ref_To_Local'>rp</span></a> <span class='Operator'>= &</span><a href="zic.c.html#LN2513"><span class='Ref_To_Local'>zp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN102"><span class='Ref_to_Member'>z_rules</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN2517"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2514"><span class='Ref_To_Local'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN62"><span class='Ref_to_Member'>r_hiwasnum</span></a> <span class='Operator'>|| </span><a href="zic.c.html#LN2514"><span class='Ref_To_Local'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN59"><span class='Ref_to_Member'>r_hiyear</span></a> <span class='Operator'>!= </span><a href="zic.c.html#LN25"><span class='Ref_to_Const'>ZIC_MAX</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>continue</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2514"><span class='Ref_To_Local'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN60"><span class='Ref_to_Member'>r_yrtype</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>            <span class='Control'>continue</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2514"><span class='Ref_To_Local'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN74"><span class='Ref_to_Member'>r_stdoff</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2515"><span class='Ref_To_Local'>stdrp</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>                <a href="zic.c.html#LN2515"><span class='Ref_To_Local'>stdrp</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN2514"><span class='Ref_To_Local'>rp</span></a><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> 
                <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2516"><span class='Ref_To_Local'>dstrp</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>                <a href="zic.c.html#LN2516"><span class='Ref_To_Local'>dstrp</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN2514"><span class='Ref_To_Local'>rp</span></a><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> 
                <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=0;i&LT;zp-&GT;z_nrules;++... &raquo; </span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2515"><span class='Ref_To_Local'>stdrp</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL </span><span class='Operator'>&& </span><a href="zic.c.html#LN2516"><span class='Ref_To_Local'>dstrp</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * There are no rules running through "max". Find the latest std rule 
         * in stdabbrrp and latest rule of any type in stdrp. 
         */ 
</span><a name="LN2557"></a>        <span class='Control'>struct</span> <a href="localtime.c.html#LN81"><span class='Ref_to_Struct'>rule</span></a> <span class='Operator'>*</span><span class='Declare_Local'>stdabbrrp</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2517"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="zic.c.html#LN2517"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="zic.c.html#LN2513"><span class='Ref_To_Local'>zp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN103"><span class='Ref_to_Member'>z_nrules</span></a><span class='Delimiter'>; </span><span class='Operator'>++</span><a href="zic.c.html#LN2517"><span class='Ref_To_Local'>i</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="zic.c.html#LN2514"><span class='Ref_To_Local'>rp</span></a> <span class='Operator'>= &</span><a href="zic.c.html#LN2513"><span class='Ref_To_Local'>zp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN102"><span class='Ref_to_Member'>z_rules</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN2517"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2514"><span class='Ref_To_Local'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN74"><span class='Ref_to_Member'>r_stdoff</span></a> <span class='Operator'>== </span><span class='Number'>0</span> <span class='Operator'>&& </span><a href="zic.c.html#LN2492"><span class='Ref_to_Func'>rule_cmp</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN2557"><span class='Ref_To_Local'>stdabbrrp</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN2514"><span class='Ref_To_Local'>rp</span></a><span class='Parentheses'>) </span><span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
                <a href="zic.c.html#LN2557"><span class='Ref_To_Local'>stdabbrrp</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN2514"><span class='Ref_To_Local'>rp</span></a><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2492"><span class='Ref_to_Func'>rule_cmp</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN2515"><span class='Ref_To_Local'>stdrp</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN2514"><span class='Ref_To_Local'>rp</span></a><span class='Parentheses'>) </span><span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
                <a href="zic.c.html#LN2515"><span class='Ref_To_Local'>stdrp</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN2514"><span class='Ref_To_Local'>rp</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Horrid special case: if year is 2037, presume this is a zone 
         * handled on a year-by-year basis; do not try to apply a rule to the 
         * zone. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2515"><span class='Ref_To_Local'>stdrp</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL </span><span class='Operator'>&& </span><a href="zic.c.html#LN2515"><span class='Ref_To_Local'>stdrp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN59"><span class='Ref_to_Member'>r_hiyear</span></a> <span class='Operator'>== </span><span class='Number'>2037</span><span class='Parentheses'>) 
</span>            <span class='Control'>return</span> <a href="zic.c.html#LN2508"><span class='Ref_to_EnumConst'>YEAR_BY_YEAR_ZONE</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2515"><span class='Ref_To_Local'>stdrp</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL </span><span class='Operator'>&& </span><a href="zic.c.html#LN2515"><span class='Ref_To_Local'>stdrp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN74"><span class='Ref_to_Member'>r_stdoff</span></a> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* Perpetual DST.  */ 
</span>            <a href="zic.c.html#LN2524"><span class='Ref_To_Local'>dstr</span></a><span class='Operator'>.</span><a href="zic.c.html#LN64"><span class='Ref_to_Member'>r_month</span></a> <span class='Operator'>= </span><a href="private.h.html#LN124"><span class='Ref_to_Const'>TM_JANUARY</span></a><span class='Delimiter'>; 
</span>            <a href="zic.c.html#LN2524"><span class='Ref_To_Local'>dstr</span></a><span class='Operator'>.</span><a href="zic.c.html#LN66"><span class='Ref_to_Member'>r_dycode</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN85"><span class='Ref_to_Const'>DC_DOM</span></a><span class='Delimiter'>; 
</span>            <a href="zic.c.html#LN2524"><span class='Ref_To_Local'>dstr</span></a><span class='Operator'>.</span><a href="zic.c.html#LN67"><span class='Ref_to_Member'>r_dayofmonth</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>            <a href="zic.c.html#LN2524"><span class='Ref_To_Local'>dstr</span></a><span class='Operator'>.</span><a href="zic.c.html#LN70"><span class='Ref_to_Member'>r_tod</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>            <a href="zic.c.html#LN2524"><span class='Ref_To_Local'>dstr</span></a><span class='Operator'>.</span><a href="zic.c.html#LN71"><span class='Ref_to_Member'>r_todisstd</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN2524"><span class='Ref_To_Local'>dstr</span></a><span class='Operator'>.</span><a href="zic.c.html#LN73"><span class='Ref_to_Member'>r_todisgmt</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>            <a href="zic.c.html#LN2524"><span class='Ref_To_Local'>dstr</span></a><span class='Operator'>.</span><a href="zic.c.html#LN74"><span class='Ref_to_Member'>r_stdoff</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN2515"><span class='Ref_To_Local'>stdrp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN74"><span class='Ref_to_Member'>r_stdoff</span></a><span class='Delimiter'>; 
</span>            <a href="zic.c.html#LN2524"><span class='Ref_To_Local'>dstr</span></a><span class='Operator'>.</span><a href="zic.c.html#LN75"><span class='Ref_to_Member'>r_abbrvar</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN2515"><span class='Ref_To_Local'>stdrp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN75"><span class='Ref_to_Member'>r_abbrvar</span></a><span class='Delimiter'>; 
</span>            <a href="zic.c.html#LN2523"><span class='Ref_To_Local'>stdr</span></a><span class='Operator'>.</span><a href="zic.c.html#LN64"><span class='Ref_to_Member'>r_month</span></a> <span class='Operator'>= </span><a href="private.h.html#LN135"><span class='Ref_to_Const'>TM_DECEMBER</span></a><span class='Delimiter'>; 
</span>            <a href="zic.c.html#LN2523"><span class='Ref_To_Local'>stdr</span></a><span class='Operator'>.</span><a href="zic.c.html#LN66"><span class='Ref_to_Member'>r_dycode</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN85"><span class='Ref_to_Const'>DC_DOM</span></a><span class='Delimiter'>; 
</span>            <a href="zic.c.html#LN2523"><span class='Ref_To_Local'>stdr</span></a><span class='Operator'>.</span><a href="zic.c.html#LN67"><span class='Ref_to_Member'>r_dayofmonth</span></a> <span class='Operator'>= </span><span class='Number'>31</span><span class='Delimiter'>; 
</span>            <a href="zic.c.html#LN2523"><span class='Ref_To_Local'>stdr</span></a><span class='Operator'>.</span><a href="zic.c.html#LN70"><span class='Ref_to_Member'>r_tod</span></a> <span class='Operator'>= </span><a href="private.h.html#LN113"><span class='Ref_to_Const'>SECSPERDAY</span></a> <span class='Operator'>+ </span><a href="zic.c.html#LN2515"><span class='Ref_To_Local'>stdrp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN74"><span class='Ref_to_Member'>r_stdoff</span></a><span class='Delimiter'>; 
</span>            <a href="zic.c.html#LN2523"><span class='Ref_To_Local'>stdr</span></a><span class='Operator'>.</span><a href="zic.c.html#LN71"><span class='Ref_to_Member'>r_todisstd</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN2523"><span class='Ref_To_Local'>stdr</span></a><span class='Operator'>.</span><a href="zic.c.html#LN73"><span class='Ref_to_Member'>r_todisgmt</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>            <a href="zic.c.html#LN2523"><span class='Ref_To_Local'>stdr</span></a><span class='Operator'>.</span><a href="zic.c.html#LN74"><span class='Ref_to_Member'>r_stdoff</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>            <a href="zic.c.html#LN2523"><span class='Ref_To_Local'>stdr</span></a><span class='Operator'>.</span><a href="zic.c.html#LN75"><span class='Ref_to_Member'>r_abbrvar</span></a> 
                <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="zic.c.html#LN2557"><span class='Ref_To_Local'>stdabbrrp</span></a> <span class='Operator'>? </span><a href="zic.c.html#LN2557"><span class='Ref_To_Local'>stdabbrrp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN75"><span class='Ref_to_Member'>r_abbrvar</span></a> <span class='Operator'>: </span><span class='String'>""</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="zic.c.html#LN2516"><span class='Ref_To_Local'>dstrp</span></a> <span class='Operator'>= &</span><a href="zic.c.html#LN2524"><span class='Ref_To_Local'>dstr</span></a><span class='Delimiter'>; 
</span>            <a href="zic.c.html#LN2515"><span class='Ref_To_Local'>stdrp</span></a> <span class='Operator'>= &</span><a href="zic.c.html#LN2523"><span class='Ref_To_Local'>stdr</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if stdrp!=NULL&&stdrp-&GT;r... &raquo; </span> 
    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if stdrp==NULL&&dstrp==N... &raquo; </span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2515"><span class='Ref_To_Local'>stdrp</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL </span><span class='Operator'>&& </span><span class='Parentheses'>(</span><a href="zic.c.html#LN2513"><span class='Ref_To_Local'>zp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN103"><span class='Ref_to_Member'>z_nrules</span></a> <span class='Operator'>!= </span><span class='Number'>0</span> <span class='Operator'>|| </span><a href="zic.c.html#LN2513"><span class='Ref_To_Local'>zp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN100"><span class='Ref_to_Member'>z_stdoff</span></a> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>))</span> 
        <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN2518"><span class='Ref_To_Local'>abbrvar</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="zic.c.html#LN2515"><span class='Ref_To_Local'>stdrp</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='String'>""</span> <span class='Operator'>: </span><a href="zic.c.html#LN2515"><span class='Ref_To_Local'>stdrp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN75"><span class='Ref_to_Member'>r_abbrvar</span></a><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN2521"><span class='Ref_To_Local'>len</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN2324"><span class='Ref_to_Func'>doabbr</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN2511"><span class='Ref_to_Parameter'>result</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN2513"><span class='Ref_To_Local'>zp</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN2518"><span class='Ref_To_Local'>abbrvar</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN2522"><span class='Ref_To_Local'>offsetlen</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN2376"><span class='Ref_to_Func'>stringoffset</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN2511"><span class='Ref_to_Parameter'>result</span></a> <span class='Operator'>+ </span><a href="zic.c.html#LN2521"><span class='Ref_To_Local'>len</span></a><span class='Delimiter'>, </span><span class='Operator'>-</span><a href="zic.c.html#LN2513"><span class='Ref_To_Local'>zp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN95"><span class='Ref_to_Member'>z_gmtoff</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="zic.c.html#LN2522"><span class='Ref_To_Local'>offsetlen</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="zic.c.html#LN2511"><span class='Ref_to_Parameter'>result</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='String'>'\0'</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <a href="zic.c.html#LN2521"><span class='Ref_To_Local'>len</span></a> <span class='Operator'>+= </span><a href="zic.c.html#LN2522"><span class='Ref_To_Local'>offsetlen</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2516"><span class='Ref_To_Local'>dstrp</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <a href="zic.c.html#LN2519"><span class='Ref_To_Local'>compat</span></a><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN2521"><span class='Ref_To_Local'>len</span></a> <span class='Operator'>+= </span><a href="zic.c.html#LN2324"><span class='Ref_to_Func'>doabbr</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN2511"><span class='Ref_to_Parameter'>result</span></a> <span class='Operator'>+ </span><a href="zic.c.html#LN2521"><span class='Ref_To_Local'>len</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN2513"><span class='Ref_To_Local'>zp</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN2516"><span class='Ref_To_Local'>dstrp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN75"><span class='Ref_to_Member'>r_abbrvar</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN2516"><span class='Ref_To_Local'>dstrp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN74"><span class='Ref_to_Member'>r_stdoff</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2516"><span class='Ref_To_Local'>dstrp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN74"><span class='Ref_to_Member'>r_stdoff</span></a> <span class='Operator'>!= </span><a href="private.h.html#LN106"><span class='Ref_to_Const'>SECSPERMIN</span></a> <span class='Operator'>* </span><a href="private.h.html#LN107"><span class='Ref_to_Const'>MINSPERHOUR</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="zic.c.html#LN2522"><span class='Ref_To_Local'>offsetlen</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN2376"><span class='Ref_to_Func'>stringoffset</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN2511"><span class='Ref_to_Parameter'>result</span></a> <span class='Operator'>+ </span><a href="zic.c.html#LN2521"><span class='Ref_To_Local'>len</span></a><span class='Delimiter'>, 
</span>                                 <span class='Operator'>-</span><span class='Parentheses'>(</span><a href="zic.c.html#LN2513"><span class='Ref_To_Local'>zp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN95"><span class='Ref_to_Member'>z_gmtoff</span></a> <span class='Operator'>+ </span><a href="zic.c.html#LN2516"><span class='Ref_To_Local'>dstrp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN74"><span class='Ref_to_Member'>r_stdoff</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="zic.c.html#LN2522"><span class='Ref_To_Local'>offsetlen</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="zic.c.html#LN2511"><span class='Ref_to_Parameter'>result</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='String'>'\0'</span><span class='Delimiter'>; 
</span>            <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <a href="zic.c.html#LN2521"><span class='Ref_To_Local'>len</span></a> <span class='Operator'>+= </span><a href="zic.c.html#LN2522"><span class='Ref_To_Local'>offsetlen</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <a href="zic.c.html#LN2511"><span class='Ref_to_Parameter'>result</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN2521"><span class='Ref_To_Local'>len</span></a><span class='Operator'>++</span><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='String'>','</span><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN2520"><span class='Ref_To_Local'>c</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN2410"><span class='Ref_to_Func'>stringrule</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN2511"><span class='Ref_to_Parameter'>result</span></a> <span class='Operator'>+ </span><a href="zic.c.html#LN2521"><span class='Ref_To_Local'>len</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN2516"><span class='Ref_To_Local'>dstrp</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN2516"><span class='Ref_To_Local'>dstrp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN74"><span class='Ref_to_Member'>r_stdoff</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN2513"><span class='Ref_To_Local'>zp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN95"><span class='Ref_to_Member'>z_gmtoff</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2520"><span class='Ref_To_Local'>c</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="zic.c.html#LN2511"><span class='Ref_to_Parameter'>result</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='String'>'\0'</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2519"><span class='Ref_To_Local'>compat</span></a> <span class='Operator'>&LT; </span><a href="zic.c.html#LN2520"><span class='Ref_To_Local'>c</span></a><span class='Parentheses'>) 
</span>        <a href="zic.c.html#LN2519"><span class='Ref_To_Local'>compat</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN2520"><span class='Ref_To_Local'>c</span></a><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN2521"><span class='Ref_To_Local'>len</span></a> <span class='Operator'>+= </span>strlen<span class='Parentheses'>(</span><a href="zic.c.html#LN2511"><span class='Ref_to_Parameter'>result</span></a> <span class='Operator'>+ </span><a href="zic.c.html#LN2521"><span class='Ref_To_Local'>len</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN2511"><span class='Ref_to_Parameter'>result</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN2521"><span class='Ref_To_Local'>len</span></a><span class='Operator'>++</span><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='String'>','</span><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN2520"><span class='Ref_To_Local'>c</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN2410"><span class='Ref_to_Func'>stringrule</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN2511"><span class='Ref_to_Parameter'>result</span></a> <span class='Operator'>+ </span><a href="zic.c.html#LN2521"><span class='Ref_To_Local'>len</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN2515"><span class='Ref_To_Local'>stdrp</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN2516"><span class='Ref_To_Local'>dstrp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN74"><span class='Ref_to_Member'>r_stdoff</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN2513"><span class='Ref_To_Local'>zp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN95"><span class='Ref_to_Member'>z_gmtoff</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2520"><span class='Ref_To_Local'>c</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="zic.c.html#LN2511"><span class='Ref_to_Parameter'>result</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='String'>'\0'</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2519"><span class='Ref_To_Local'>compat</span></a> <span class='Operator'>&LT; </span><a href="zic.c.html#LN2520"><span class='Ref_To_Local'>c</span></a><span class='Parentheses'>) 
</span>        <a href="zic.c.html#LN2519"><span class='Ref_To_Local'>compat</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN2520"><span class='Ref_To_Local'>c</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="zic.c.html#LN2519"><span class='Ref_To_Local'>compat</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end stringzone &raquo; </span> 
 
<span class='Keyword'>static void 
</span><a name="LN2646"></a><span class='Declare_Function'>outzone</span><span class='Parentheses'>(</span><span class='Keyword'>const </span><span class='Control'>struct</span> <a href="zic.c.html#LN89"><span class='Ref_to_Struct'>zone</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>zpfirst</span><span class='Delimiter'>, </span>ptrdiff_t <span class='Declare_Parameter'>zonecount</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2648"></a>    <span class='Keyword'>const </span><span class='Control'>struct</span> <a href="zic.c.html#LN89"><span class='Ref_to_Struct'>zone</span></a> <span class='Operator'>*</span><span class='Declare_Local'>zp</span><span class='Delimiter'>; 
</span><a name="LN2649"></a>    <span class='Control'>struct</span> <a href="localtime.c.html#LN81"><span class='Ref_to_Struct'>rule</span></a> <span class='Operator'>*</span><span class='Declare_Local'>rp</span><span class='Delimiter'>; 
</span><a name="LN2650"></a>    ptrdiff_t   <span class='Declare_Local'>i</span><span class='Delimiter'>, 
</span><a name="LN2651"></a>                <span class='Declare_Local'>j</span><span class='Delimiter'>; 
</span><a name="LN2652"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>usestart</span><span class='Delimiter'>, 
</span><a name="LN2653"></a>                <span class='Declare_Local'>useuntil</span><span class='Delimiter'>; 
</span><a name="LN2654"></a>    <a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a>       <span class='Declare_Local'>starttime</span><span class='Delimiter'>, 
</span><a name="LN2655"></a>                <span class='Declare_Local'>untiltime</span><span class='Delimiter'>; 
</span><a name="LN2656"></a>    <a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a>       <span class='Declare_Local'>gmtoff</span><span class='Delimiter'>; 
</span><a name="LN2657"></a>    <a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a>       <span class='Declare_Local'>stdoff</span><span class='Delimiter'>; 
</span><a name="LN2658"></a>    <a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a>       <span class='Declare_Local'>year</span><span class='Delimiter'>; 
</span><a name="LN2659"></a>    <a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a>       <span class='Declare_Local'>startoff</span><span class='Delimiter'>; 
</span><a name="LN2660"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>startttisstd</span><span class='Delimiter'>; 
</span><a name="LN2661"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>startttisgmt</span><span class='Delimiter'>; 
</span><a name="LN2662"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>type</span><span class='Delimiter'>; 
</span><a name="LN2663"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>startbuf</span><span class='Delimiter'>; 
</span><a name="LN2664"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>ab</span><span class='Delimiter'>; 
</span><a name="LN2665"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>envvar</span><span class='Delimiter'>; 
</span><a name="LN2666"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>max_abbr_len</span><span class='Delimiter'>; 
</span><a name="LN2667"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>max_envvar_len</span><span class='Delimiter'>; 
</span><a name="LN2668"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>prodstic</span><span class='Delimiter'>;</span>       <span class='Comment_Single_Line'>/* all rules are min to max */ 
</span><a name="LN2669"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>compat</span><span class='Delimiter'>; 
</span><a name="LN2670"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>do_extend</span><span class='Delimiter'>; 
</span><a name="LN2671"></a>    <span class='Keyword'>char</span>        <span class='Declare_Local'>version</span><span class='Delimiter'>; 
</span><a name="LN2672"></a>    ptrdiff_t   <span class='Declare_Local'>lastatmax</span> <span class='Operator'>= -</span><span class='Number'>1</span><span class='Delimiter'>; 
</span><a name="LN2673"></a>    <a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a>       <span class='Declare_Local'>one</span> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span><a name="LN2674"></a>    <a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a>       <span class='Declare_Local'>y2038_boundary</span> <span class='Operator'>= </span><a href="zic.c.html#LN2673"><span class='Ref_To_Local'>one</span></a> <span class='Operator'>&LT;&LT; </span><span class='Number'>31</span><span class='Delimiter'>; 
</span><a name="LN2675"></a>    <a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a>       <span class='Declare_Local'>max_year0</span><span class='Delimiter'>; 
</span> 
    <a href="zic.c.html#LN2666"><span class='Ref_To_Local'>max_abbr_len</span></a> <span class='Operator'>= </span><span class='Number'>2</span> <span class='Operator'>+ </span><a href="zic.c.html#LN172"><span class='Ref_to_Global_Var'>max_format_len</span></a> <span class='Operator'>+ </span><a href="zic.c.html#LN171"><span class='Ref_to_Global_Var'>max_abbrvar_len</span></a><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN2667"><span class='Ref_To_Local'>max_envvar_len</span></a> <span class='Operator'>= </span><span class='Number'>2</span> <span class='Operator'>* </span><a href="zic.c.html#LN2666"><span class='Ref_To_Local'>max_abbr_len</span></a> <span class='Operator'>+ </span><span class='Number'>5</span> <span class='Operator'>* </span><span class='Number'>9</span><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN2663"><span class='Ref_To_Local'>startbuf</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN412"><span class='Ref_to_Func'>emalloc</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN2666"><span class='Ref_To_Local'>max_abbr_len</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN2664"><span class='Ref_To_Local'>ab</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN412"><span class='Ref_to_Func'>emalloc</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN2666"><span class='Ref_To_Local'>max_abbr_len</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN2665"><span class='Ref_To_Local'>envvar</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN412"><span class='Ref_to_Func'>emalloc</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN2667"><span class='Ref_To_Local'>max_envvar_len</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="private.h.html#LN97"><span class='Ref_to_Macro'>INITIALIZE</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN2655"><span class='Ref_To_Local'>untiltime</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="private.h.html#LN97"><span class='Ref_to_Macro'>INITIALIZE</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN2654"><span class='Ref_To_Local'>starttime</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Now. . .finally. . .generate some useful data! 
     */ 
</span>    <a href="zic.c.html#LN181"><span class='Ref_to_Global_Var'>timecnt</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN183"><span class='Ref_to_Global_Var'>typecnt</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN162"><span class='Ref_to_Global_Var'>charcnt</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN2668"><span class='Ref_To_Local'>prodstic</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN2646"><span class='Ref_to_Parameter'>zonecount</span></a> <span class='Operator'>== </span><span class='Number'>1</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Thanks to Earl Chew for noting the need to unconditionally initialize 
     * startttisstd. 
     */ 
</span>    <a href="zic.c.html#LN2660"><span class='Ref_To_Local'>startttisstd</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN2661"><span class='Ref_To_Local'>startttisgmt</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN174"><span class='Ref_to_Global_Var'>min_year</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN173"><span class='Ref_to_Global_Var'>max_year</span></a> <span class='Operator'>= </span><a href="private.h.html#LN139"><span class='Ref_to_Const'>EPOCH_YEAR</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN167"><span class='Ref_to_Global_Var'>leapseen</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="zic.c.html#LN2367"><span class='Ref_to_Func'>updateminmax</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN168"><span class='Ref_to_Global_Var'>leapminyear</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN2367"><span class='Ref_to_Func'>updateminmax</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN169"><span class='Ref_to_Global_Var'>leapmaxyear</span></a> <span class='Operator'>+ </span><span class='Parentheses'>(</span><a href="zic.c.html#LN169"><span class='Ref_to_Global_Var'>leapmaxyear</span></a> <span class='Operator'>&LT; </span><a href="zic.c.html#LN25"><span class='Ref_to_Const'>ZIC_MAX</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2650"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="zic.c.html#LN2650"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="zic.c.html#LN2646"><span class='Ref_to_Parameter'>zonecount</span></a><span class='Delimiter'>; </span><span class='Operator'>++</span><a href="zic.c.html#LN2650"><span class='Ref_To_Local'>i</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="zic.c.html#LN2648"><span class='Ref_To_Local'>zp</span></a> <span class='Operator'>= &</span><a href="zic.c.html#LN2646"><span class='Ref_to_Parameter'>zpfirst</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN2650"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2650"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="zic.c.html#LN2646"><span class='Ref_to_Parameter'>zonecount</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Parentheses'>) 
</span>            <a href="zic.c.html#LN2367"><span class='Ref_to_Func'>updateminmax</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN2648"><span class='Ref_To_Local'>zp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN105"><span class='Ref_to_Member'>z_untilrule</span></a><span class='Operator'>.</span><a href="zic.c.html#LN58"><span class='Ref_to_Member'>r_loyear</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2651"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="zic.c.html#LN2651"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>&LT; </span><a href="zic.c.html#LN2648"><span class='Ref_To_Local'>zp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN103"><span class='Ref_to_Member'>z_nrules</span></a><span class='Delimiter'>; </span><span class='Operator'>++</span><a href="zic.c.html#LN2651"><span class='Ref_To_Local'>j</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="zic.c.html#LN2649"><span class='Ref_To_Local'>rp</span></a> <span class='Operator'>= &</span><a href="zic.c.html#LN2648"><span class='Ref_To_Local'>zp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN102"><span class='Ref_to_Member'>z_rules</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN2651"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2649"><span class='Ref_To_Local'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN61"><span class='Ref_to_Member'>r_lowasnum</span></a><span class='Parentheses'>) 
</span>                <a href="zic.c.html#LN2367"><span class='Ref_to_Func'>updateminmax</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN2649"><span class='Ref_To_Local'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN58"><span class='Ref_to_Member'>r_loyear</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2649"><span class='Ref_To_Local'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN62"><span class='Ref_to_Member'>r_hiwasnum</span></a><span class='Parentheses'>) 
</span>                <a href="zic.c.html#LN2367"><span class='Ref_to_Func'>updateminmax</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN2649"><span class='Ref_To_Local'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN59"><span class='Ref_to_Member'>r_hiyear</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2649"><span class='Ref_To_Local'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN61"><span class='Ref_to_Member'>r_lowasnum</span></a> <span class='Operator'>|| </span><a href="zic.c.html#LN2649"><span class='Ref_To_Local'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN62"><span class='Ref_to_Member'>r_hiwasnum</span></a><span class='Parentheses'>) 
</span>                <a href="zic.c.html#LN2668"><span class='Ref_To_Local'>prodstic</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Generate lots of data if a rule can't cover all future times. 
     */ 
</span>    <a href="zic.c.html#LN2669"><span class='Ref_To_Local'>compat</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN2510"><span class='Ref_to_Func'>stringzone</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN2665"><span class='Ref_To_Local'>envvar</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN2646"><span class='Ref_to_Parameter'>zpfirst</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN2646"><span class='Ref_to_Parameter'>zonecount</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN2671"><span class='Ref_To_Local'>version</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN2669"><span class='Ref_To_Local'>compat</span></a> <span class='Operator'>&LT; </span><span class='Number'>2013</span> <span class='Operator'>? </span><a href="zic.c.html#LN20"><span class='Ref_to_Const'>ZIC_VERSION_PRE_2013</span></a> <span class='Operator'>: </span><a href="zic.c.html#LN21"><span class='Ref_to_Const'>ZIC_VERSION</span></a><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN2670"><span class='Ref_To_Local'>do_extend</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN2669"><span class='Ref_To_Local'>compat</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span> <span class='Operator'>|| </span><a href="zic.c.html#LN2669"><span class='Ref_To_Local'>compat</span></a> <span class='Operator'>== </span><a href="zic.c.html#LN2508"><span class='Ref_to_EnumConst'>YEAR_BY_YEAR_ZONE</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN175"><span class='Ref_to_Global_Var'>noise</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!*</span><a href="zic.c.html#LN2665"><span class='Ref_To_Local'>envvar</span></a><span class='Parentheses'>) 
</span>            <a href="zic.c.html#LN492"><span class='Ref_to_Func'>warning</span></a><span class='Parentheses'>(</span><span class='String'>"%s %s"</span><span class='Delimiter'>, 
</span>                    _<span class='Parentheses'>(</span><span class='String'>"no POSIX environment variable for zone"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                    <a href="zic.c.html#LN2646"><span class='Ref_to_Parameter'>zpfirst</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN94"><span class='Ref_to_Member'>z_name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2669"><span class='Ref_To_Local'>compat</span></a> <span class='Operator'>!= </span><span class='Number'>0</span> <span class='Operator'>&& </span><a href="zic.c.html#LN2669"><span class='Ref_To_Local'>compat</span></a> <span class='Operator'>!= </span><a href="zic.c.html#LN2508"><span class='Ref_to_EnumConst'>YEAR_BY_YEAR_ZONE</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* 
             * Circa-COMPAT clients, and earlier clients, might not work for 
             * this zone when given dates before 1970 or after 2038. 
             */ 
</span>            <a href="zic.c.html#LN492"><span class='Ref_to_Func'>warning</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"%s: pre-%d clients may mishandle"</span> 
                      <span class='String'>" distant timestamps"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                    <a href="zic.c.html#LN2646"><span class='Ref_to_Parameter'>zpfirst</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN94"><span class='Ref_to_Member'>z_name</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN2669"><span class='Ref_To_Local'>compat</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2670"><span class='Ref_To_Local'>do_extend</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * Search through a couple of extra years past the obvious 400, to 
         * avoid edge cases.  For example, suppose a non-POSIX rule applies 
         * from 2012 onwards and has transitions in March and September, plus 
         * some one-off transitions in November 2013.  If zic looked only at 
         * the last 400 years, it would set max_year=2413, with the intent 
         * that the 400 years 2014 through 2413 will be repeated.  The last 
         * transition listed in the tzfile would be in 2413-09, less than 400 
         * years after the last one-off transition in 2013-11.  Two years 
         * might be overkill, but with the kind of edge cases available we're 
         * not sure that one year would suffice. 
         */ 
</span>        <span class='Control'>enum</span> 
        <span class='Delimiter'>{ 
</span><a name="LN2761"></a>        <span class='Declare_Local'>years_of_observations</span> <span class='Operator'>= </span><a href="private.h.html#LN104"><span class='Ref_to_Const'>YEARSPERREPEAT</span></a> <span class='Operator'>+ </span><span class='Number'>2</span><span class='Delimiter'>}; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN174"><span class='Ref_to_Global_Var'>min_year</span></a> <span class='Operator'>&GT;= </span><a href="zic.c.html#LN24"><span class='Ref_to_Const'>ZIC_MIN</span></a> <span class='Operator'>+ </span><a href="zic.c.html#LN2761"><span class='Ref_to_EnumConst'>years_of_observations</span></a><span class='Parentheses'>) 
</span>            <a href="zic.c.html#LN174"><span class='Ref_to_Global_Var'>min_year</span></a> <span class='Operator'>-= </span><a href="zic.c.html#LN2761"><span class='Ref_to_EnumConst'>years_of_observations</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <a href="zic.c.html#LN174"><span class='Ref_to_Global_Var'>min_year</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN24"><span class='Ref_to_Const'>ZIC_MIN</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN173"><span class='Ref_to_Global_Var'>max_year</span></a> <span class='Operator'>&LT;= </span><a href="zic.c.html#LN25"><span class='Ref_to_Const'>ZIC_MAX</span></a> <span class='Operator'>- </span><a href="zic.c.html#LN2761"><span class='Ref_to_EnumConst'>years_of_observations</span></a><span class='Parentheses'>) 
</span>            <a href="zic.c.html#LN173"><span class='Ref_to_Global_Var'>max_year</span></a> <span class='Operator'>+= </span><a href="zic.c.html#LN2761"><span class='Ref_to_EnumConst'>years_of_observations</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <a href="zic.c.html#LN173"><span class='Ref_to_Global_Var'>max_year</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN25"><span class='Ref_to_Const'>ZIC_MAX</span></a><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Regardless of any of the above, for a "proDSTic" zone which 
         * specifies that its rules always have and always will be in effect, 
         * we only need one cycle to define the zone. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2668"><span class='Ref_To_Local'>prodstic</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="zic.c.html#LN174"><span class='Ref_to_Global_Var'>min_year</span></a> <span class='Operator'>= </span><span class='Number'>1900</span><span class='Delimiter'>; 
</span>            <a href="zic.c.html#LN173"><span class='Ref_to_Global_Var'>max_year</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN174"><span class='Ref_to_Global_Var'>min_year</span></a> <span class='Operator'>+ </span><a href="zic.c.html#LN2761"><span class='Ref_to_EnumConst'>years_of_observations</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if do_extend &raquo; </span> 
 
    <span class='Comment_Multi_Line'>/* 
     * For the benefit of older systems, generate data from 1900 through 2038. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN174"><span class='Ref_to_Global_Var'>min_year</span></a> <span class='Operator'>&GT; </span><span class='Number'>1900</span><span class='Parentheses'>) 
</span>        <a href="zic.c.html#LN174"><span class='Ref_to_Global_Var'>min_year</span></a> <span class='Operator'>= </span><span class='Number'>1900</span><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN2675"><span class='Ref_To_Local'>max_year0</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN173"><span class='Ref_to_Global_Var'>max_year</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN173"><span class='Ref_to_Global_Var'>max_year</span></a> <span class='Operator'>&LT; </span><span class='Number'>2038</span><span class='Parentheses'>) 
</span>        <a href="zic.c.html#LN173"><span class='Ref_to_Global_Var'>max_year</span></a> <span class='Operator'>= </span><span class='Number'>2038</span><span class='Delimiter'>; 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2650"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="zic.c.html#LN2650"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="zic.c.html#LN2646"><span class='Ref_to_Parameter'>zonecount</span></a><span class='Delimiter'>; </span><span class='Operator'>++</span><a href="zic.c.html#LN2650"><span class='Ref_To_Local'>i</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * A guess that may well be corrected later. 
         */ 
</span>        <a href="zic.c.html#LN2657"><span class='Ref_To_Local'>stdoff</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN2648"><span class='Ref_To_Local'>zp</span></a> <span class='Operator'>= &</span><a href="zic.c.html#LN2646"><span class='Ref_to_Parameter'>zpfirst</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN2650"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; 
</span>        <a href="zic.c.html#LN2652"><span class='Ref_To_Local'>usestart</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN2650"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span> <span class='Operator'>&& </span><span class='Parentheses'>(</span><a href="zic.c.html#LN2648"><span class='Ref_To_Local'>zp</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>z_untiltime <span class='Operator'>&GT; </span><a href="zic.c.html#LN1005"><span class='Ref_to_Global_Var'>early_time</span></a><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN2653"><span class='Ref_To_Local'>useuntil</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN2650"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><span class='Parentheses'>(</span><a href="zic.c.html#LN2646"><span class='Ref_to_Parameter'>zonecount</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2653"><span class='Ref_To_Local'>useuntil</span></a> <span class='Operator'>&& </span><a href="zic.c.html#LN2648"><span class='Ref_To_Local'>zp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN106"><span class='Ref_to_Member'>z_untiltime</span></a> <span class='Operator'>&LT;= </span><a href="zic.c.html#LN1005"><span class='Ref_to_Global_Var'>early_time</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>continue</span><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN2656"><span class='Ref_To_Local'>gmtoff</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN2648"><span class='Ref_To_Local'>zp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN95"><span class='Ref_to_Member'>z_gmtoff</span></a><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN459"><span class='Ref_to_Func'>eat</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN2648"><span class='Ref_To_Local'>zp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN91"><span class='Ref_to_Member'>z_filename</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN2648"><span class='Ref_To_Local'>zp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN92"><span class='Ref_to_Member'>z_linenum</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Operator'>*</span><a href="zic.c.html#LN2663"><span class='Ref_To_Local'>startbuf</span></a> <span class='Operator'>= </span><span class='String'>'\0'</span><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN2659"><span class='Ref_To_Local'>startoff</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN2648"><span class='Ref_To_Local'>zp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN95"><span class='Ref_to_Member'>z_gmtoff</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2648"><span class='Ref_To_Local'>zp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN103"><span class='Ref_to_Member'>z_nrules</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="zic.c.html#LN2657"><span class='Ref_To_Local'>stdoff</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN2648"><span class='Ref_To_Local'>zp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN100"><span class='Ref_to_Member'>z_stdoff</span></a><span class='Delimiter'>; 
</span>            <a href="zic.c.html#LN2324"><span class='Ref_to_Func'>doabbr</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN2663"><span class='Ref_To_Local'>startbuf</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN2648"><span class='Ref_To_Local'>zp</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><a href="zic.c.html#LN2657"><span class='Ref_To_Local'>stdoff</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="zic.c.html#LN2662"><span class='Ref_To_Local'>type</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN3046"><span class='Ref_to_Func'>addtype</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN3442"><span class='Ref_to_Func'>oadd</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN2648"><span class='Ref_To_Local'>zp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN95"><span class='Ref_to_Member'>z_gmtoff</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN2657"><span class='Ref_To_Local'>stdoff</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                           <a href="zic.c.html#LN2663"><span class='Ref_To_Local'>startbuf</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN2657"><span class='Ref_To_Local'>stdoff</span></a> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="zic.c.html#LN2660"><span class='Ref_To_Local'>startttisstd</span></a><span class='Delimiter'>, 
</span>                           <a href="zic.c.html#LN2661"><span class='Ref_To_Local'>startttisgmt</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2652"><span class='Ref_To_Local'>usestart</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <a href="zic.c.html#LN3021"><span class='Ref_to_Func'>addtt</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN2654"><span class='Ref_To_Local'>starttime</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN2662"><span class='Ref_To_Local'>type</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="zic.c.html#LN2652"><span class='Ref_To_Local'>usestart</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>else</span> 
                <a href="zic.c.html#LN3021"><span class='Ref_to_Func'>addtt</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN1005"><span class='Ref_to_Global_Var'>early_time</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN2662"><span class='Ref_To_Local'>type</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
            <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2658"><span class='Ref_To_Local'>year</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN174"><span class='Ref_to_Global_Var'>min_year</span></a><span class='Delimiter'>; </span><a href="zic.c.html#LN2658"><span class='Ref_To_Local'>year</span></a> <span class='Operator'>&LT;= </span><a href="zic.c.html#LN173"><span class='Ref_to_Global_Var'>max_year</span></a><span class='Delimiter'>; </span><span class='Operator'>++</span><a href="zic.c.html#LN2658"><span class='Ref_To_Local'>year</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2653"><span class='Ref_To_Local'>useuntil</span></a> <span class='Operator'>&& </span><a href="zic.c.html#LN2658"><span class='Ref_To_Local'>year</span></a> <span class='Operator'>&GT; </span><a href="zic.c.html#LN2648"><span class='Ref_To_Local'>zp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN105"><span class='Ref_to_Member'>z_untilrule</span></a><span class='Operator'>.</span><a href="zic.c.html#LN59"><span class='Ref_to_Member'>r_hiyear</span></a><span class='Parentheses'>) 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * Mark which rules to do in the current year. For those to 
                 * do, calculate rpytime(rp, year); 
                 */ 
</span>                <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2651"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="zic.c.html#LN2651"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>&LT; </span><a href="zic.c.html#LN2648"><span class='Ref_To_Local'>zp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN103"><span class='Ref_to_Member'>z_nrules</span></a><span class='Delimiter'>; </span><span class='Operator'>++</span><a href="zic.c.html#LN2651"><span class='Ref_To_Local'>j</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <a href="zic.c.html#LN2649"><span class='Ref_To_Local'>rp</span></a> <span class='Operator'>= &</span><a href="zic.c.html#LN2648"><span class='Ref_To_Local'>zp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN102"><span class='Ref_to_Member'>z_rules</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN2651"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]; 
</span>                    <a href="zic.c.html#LN450"><span class='Ref_to_Func'>eats</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN2648"><span class='Ref_To_Local'>zp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN91"><span class='Ref_to_Member'>z_filename</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN2648"><span class='Ref_To_Local'>zp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN92"><span class='Ref_to_Member'>z_linenum</span></a><span class='Delimiter'>, 
</span>                         <a href="zic.c.html#LN2649"><span class='Ref_To_Local'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN54"><span class='Ref_to_Member'>r_filename</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN2649"><span class='Ref_To_Local'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN55"><span class='Ref_to_Member'>r_linenum</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="zic.c.html#LN2649"><span class='Ref_To_Local'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN77"><span class='Ref_to_Member'>r_todo</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN2658"><span class='Ref_To_Local'>year</span></a> <span class='Operator'>&GT;= </span><a href="zic.c.html#LN2649"><span class='Ref_To_Local'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN58"><span class='Ref_to_Member'>r_loyear</span></a> <span class='Operator'>&& 
</span>                        <a href="zic.c.html#LN2658"><span class='Ref_To_Local'>year</span></a> <span class='Operator'>&LT;= </span><a href="zic.c.html#LN2649"><span class='Ref_To_Local'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN59"><span class='Ref_to_Member'>r_hiyear</span></a> <span class='Operator'>&& 
</span>                        <a href="zic.c.html#LN3159"><span class='Ref_to_Func'>yearistype</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN2658"><span class='Ref_To_Local'>year</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN2649"><span class='Ref_To_Local'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN60"><span class='Ref_to_Member'>r_yrtype</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2649"><span class='Ref_To_Local'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN77"><span class='Ref_to_Member'>r_todo</span></a><span class='Parentheses'>) 
</span>                    <span class='Delimiter'>{ 
</span>                        <a href="zic.c.html#LN2649"><span class='Ref_To_Local'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN78"><span class='Ref_to_Member'>r_temp</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN3479"><span class='Ref_to_Func'>rpytime</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN2649"><span class='Ref_To_Local'>rp</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN2658"><span class='Ref_To_Local'>year</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <a href="zic.c.html#LN2649"><span class='Ref_To_Local'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN77"><span class='Ref_to_Member'>r_todo</span></a> 
                            <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="zic.c.html#LN2649"><span class='Ref_To_Local'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN78"><span class='Ref_to_Member'>r_temp</span></a> <span class='Operator'>&LT; </span><a href="zic.c.html#LN2674"><span class='Ref_To_Local'>y2038_boundary</span></a> 
                               <span class='Operator'>|| </span><a href="zic.c.html#LN2658"><span class='Ref_To_Local'>year</span></a> <span class='Operator'>&LT;= </span><a href="zic.c.html#LN2675"><span class='Ref_To_Local'>max_year0</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>for</span> <span class='Parentheses'>(</span><span class='Delimiter'>;;</span><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span><a name="LN2850"></a>                    ptrdiff_t   <span class='Declare_Local'>k</span><span class='Delimiter'>; 
</span><a name="LN2851"></a>                    <a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a>       <span class='Declare_Local'>jtime</span><span class='Delimiter'>, 
</span><a name="LN2852"></a>                                <span class='Declare_Local'>ktime</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span><a name="LN2853"></a>                    <a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a>       <span class='Declare_Local'>offset</span><span class='Delimiter'>; 
</span> 
                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2653"><span class='Ref_To_Local'>useuntil</span></a><span class='Parentheses'>) 
</span>                    <span class='Delimiter'>{ 
</span>                        <span class='Comment_Multi_Line'>/* 
                         * Turn untiltime into UT assuming the current gmtoff 
                         * and stdoff values. 
                         */ 
</span>                        <a href="zic.c.html#LN2655"><span class='Ref_To_Local'>untiltime</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN2648"><span class='Ref_To_Local'>zp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN106"><span class='Ref_to_Member'>z_untiltime</span></a><span class='Delimiter'>; 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="zic.c.html#LN2648"><span class='Ref_To_Local'>zp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN105"><span class='Ref_to_Member'>z_untilrule</span></a><span class='Operator'>.</span><a href="zic.c.html#LN73"><span class='Ref_to_Member'>r_todisgmt</span></a><span class='Parentheses'>) 
</span>                            <a href="zic.c.html#LN2655"><span class='Ref_To_Local'>untiltime</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN3450"><span class='Ref_to_Func'>tadd</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN2655"><span class='Ref_To_Local'>untiltime</span></a><span class='Delimiter'>, 
</span>                                             <span class='Operator'>-</span><a href="zic.c.html#LN2656"><span class='Ref_To_Local'>gmtoff</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="zic.c.html#LN2648"><span class='Ref_To_Local'>zp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN105"><span class='Ref_to_Member'>z_untilrule</span></a><span class='Operator'>.</span><a href="zic.c.html#LN71"><span class='Ref_to_Member'>r_todisstd</span></a><span class='Parentheses'>) 
</span>                            <a href="zic.c.html#LN2655"><span class='Ref_To_Local'>untiltime</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN3450"><span class='Ref_to_Func'>tadd</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN2655"><span class='Ref_To_Local'>untiltime</span></a><span class='Delimiter'>, 
</span>                                             <span class='Operator'>-</span><a href="zic.c.html#LN2657"><span class='Ref_To_Local'>stdoff</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span> 
                    <span class='Comment_Multi_Line'>/* 
                     * Find the rule (of those to do, if any) that takes 
                     * effect earliest in the year. 
                     */ 
</span>                    <a href="zic.c.html#LN2850"><span class='Ref_To_Local'>k</span></a> <span class='Operator'>= -</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>                    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2651"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="zic.c.html#LN2651"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>&LT; </span><a href="zic.c.html#LN2648"><span class='Ref_To_Local'>zp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN103"><span class='Ref_to_Member'>z_nrules</span></a><span class='Delimiter'>; </span><span class='Operator'>++</span><a href="zic.c.html#LN2651"><span class='Ref_To_Local'>j</span></a><span class='Parentheses'>) 
</span>                    <span class='Delimiter'>{ 
</span>                        <a href="zic.c.html#LN2649"><span class='Ref_To_Local'>rp</span></a> <span class='Operator'>= &</span><a href="zic.c.html#LN2648"><span class='Ref_To_Local'>zp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN102"><span class='Ref_to_Member'>z_rules</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN2651"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]; 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="zic.c.html#LN2649"><span class='Ref_To_Local'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN77"><span class='Ref_to_Member'>r_todo</span></a><span class='Parentheses'>) 
</span>                            <span class='Control'>continue</span><span class='Delimiter'>; 
</span>                        <a href="zic.c.html#LN450"><span class='Ref_to_Func'>eats</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN2648"><span class='Ref_To_Local'>zp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN91"><span class='Ref_to_Member'>z_filename</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN2648"><span class='Ref_To_Local'>zp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN92"><span class='Ref_to_Member'>z_linenum</span></a><span class='Delimiter'>, 
</span>                             <a href="zic.c.html#LN2649"><span class='Ref_To_Local'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN54"><span class='Ref_to_Member'>r_filename</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN2649"><span class='Ref_To_Local'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN55"><span class='Ref_to_Member'>r_linenum</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <a href="zic.c.html#LN2853"><span class='Ref_To_Local'>offset</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN2649"><span class='Ref_To_Local'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN73"><span class='Ref_to_Member'>r_todisgmt</span></a> <span class='Operator'>? </span><span class='Number'>0</span> <span class='Operator'>: </span><a href="zic.c.html#LN2656"><span class='Ref_To_Local'>gmtoff</span></a><span class='Delimiter'>; 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="zic.c.html#LN2649"><span class='Ref_To_Local'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN71"><span class='Ref_to_Member'>r_todisstd</span></a><span class='Parentheses'>) 
</span>                            <a href="zic.c.html#LN2853"><span class='Ref_To_Local'>offset</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN3442"><span class='Ref_to_Func'>oadd</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN2853"><span class='Ref_To_Local'>offset</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN2657"><span class='Ref_To_Local'>stdoff</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <a href="zic.c.html#LN2851"><span class='Ref_To_Local'>jtime</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN2649"><span class='Ref_To_Local'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN78"><span class='Ref_to_Member'>r_temp</span></a><span class='Delimiter'>; 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2851"><span class='Ref_To_Local'>jtime</span></a> <span class='Operator'>== </span><a href="zic.c.html#LN964"><span class='Ref_to_Global_Var'>min_time</span></a> <span class='Operator'>|| 
</span>                            <a href="zic.c.html#LN2851"><span class='Ref_To_Local'>jtime</span></a> <span class='Operator'>== </span><a href="zic.c.html#LN965"><span class='Ref_to_Global_Var'>max_time</span></a><span class='Parentheses'>) 
</span>                            <span class='Control'>continue</span><span class='Delimiter'>; 
</span>                        <a href="zic.c.html#LN2851"><span class='Ref_To_Local'>jtime</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN3450"><span class='Ref_to_Func'>tadd</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN2851"><span class='Ref_To_Local'>jtime</span></a><span class='Delimiter'>, </span><span class='Operator'>-</span><a href="zic.c.html#LN2853"><span class='Ref_To_Local'>offset</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2850"><span class='Ref_To_Local'>k</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span> <span class='Operator'>|| </span><a href="zic.c.html#LN2851"><span class='Ref_To_Local'>jtime</span></a> <span class='Operator'>&LT; </span><a href="zic.c.html#LN2852"><span class='Ref_To_Local'>ktime</span></a><span class='Parentheses'>) 
</span>                        <span class='Delimiter'>{ 
</span>                            <a href="zic.c.html#LN2850"><span class='Ref_To_Local'>k</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN2651"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>; 
</span>                            <a href="zic.c.html#LN2852"><span class='Ref_To_Local'>ktime</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN2851"><span class='Ref_To_Local'>jtime</span></a><span class='Delimiter'>; 
</span>                        <span class='Delimiter'>} 
</span>                        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2851"><span class='Ref_To_Local'>jtime</span></a> <span class='Operator'>== </span><a href="zic.c.html#LN2852"><span class='Ref_To_Local'>ktime</span></a><span class='Parentheses'>) 
</span>                        <span class='Delimiter'>{ 
</span><a name="LN2897"></a>                            <span class='Keyword'>char const </span><span class='Operator'>*</span><span class='Declare_Local'>dup_rules_msg</span> <span class='Operator'>= 
</span>                            _<span class='Parentheses'>(</span><span class='String'>"two rules for same instant"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                            <a href="zic.c.html#LN450"><span class='Ref_to_Func'>eats</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN2648"><span class='Ref_To_Local'>zp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN91"><span class='Ref_to_Member'>z_filename</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN2648"><span class='Ref_To_Local'>zp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN92"><span class='Ref_to_Member'>z_linenum</span></a><span class='Delimiter'>, 
</span>                                 <a href="zic.c.html#LN2649"><span class='Ref_To_Local'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN54"><span class='Ref_to_Member'>r_filename</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN2649"><span class='Ref_To_Local'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN55"><span class='Ref_to_Member'>r_linenum</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                            <a href="zic.c.html#LN492"><span class='Ref_to_Func'>warning</span></a><span class='Parentheses'>(</span><span class='String'>"%s"</span><span class='Delimiter'>, </span><a href="zic.c.html#LN2897"><span class='Ref_To_Local'>dup_rules_msg</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                            <a href="zic.c.html#LN2649"><span class='Ref_To_Local'>rp</span></a> <span class='Operator'>= &</span><a href="zic.c.html#LN2648"><span class='Ref_To_Local'>zp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN102"><span class='Ref_to_Member'>z_rules</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN2850"><span class='Ref_To_Local'>k</span></a><span class='Delimiter'>]; 
</span>                            <a href="zic.c.html#LN450"><span class='Ref_to_Func'>eats</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN2648"><span class='Ref_To_Local'>zp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN91"><span class='Ref_to_Member'>z_filename</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN2648"><span class='Ref_To_Local'>zp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN92"><span class='Ref_to_Member'>z_linenum</span></a><span class='Delimiter'>, 
</span>                                 <a href="zic.c.html#LN2649"><span class='Ref_To_Local'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN54"><span class='Ref_to_Member'>r_filename</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN2649"><span class='Ref_To_Local'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN55"><span class='Ref_to_Member'>r_linenum</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                            <a href="../interfaces/ecpg/test/expected/sql-dyntest.c.html#LN145"><span class='Ref_to_Func'>error</span></a><span class='Parentheses'>(</span><span class='String'>"%s"</span><span class='Delimiter'>, </span><a href="zic.c.html#LN2897"><span class='Ref_To_Local'>dup_rules_msg</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Delimiter'>} 
</span>                    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for j=0;j&LT;zp-&GT;z_nrules;++... &raquo; </span> 
                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2850"><span class='Ref_To_Local'>k</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                        <span class='Control'>break</span><span class='Delimiter'>;</span>  <span class='Comment_Single_Line'>/* go on to next year */ 
</span>                    <a href="zic.c.html#LN2649"><span class='Ref_To_Local'>rp</span></a> <span class='Operator'>= &</span><a href="zic.c.html#LN2648"><span class='Ref_To_Local'>zp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN102"><span class='Ref_to_Member'>z_rules</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN2850"><span class='Ref_To_Local'>k</span></a><span class='Delimiter'>]; 
</span>                    <a href="zic.c.html#LN2649"><span class='Ref_To_Local'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN77"><span class='Ref_to_Member'>r_todo</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2653"><span class='Ref_To_Local'>useuntil</span></a> <span class='Operator'>&& </span><a href="zic.c.html#LN2852"><span class='Ref_To_Local'>ktime</span></a> <span class='Operator'>&GT;= </span><a href="zic.c.html#LN2655"><span class='Ref_To_Local'>untiltime</span></a><span class='Parentheses'>) 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <a href="zic.c.html#LN2657"><span class='Ref_To_Local'>stdoff</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN2649"><span class='Ref_To_Local'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN74"><span class='Ref_to_Member'>r_stdoff</span></a><span class='Delimiter'>; 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2652"><span class='Ref_To_Local'>usestart</span></a> <span class='Operator'>&& </span><a href="zic.c.html#LN2852"><span class='Ref_To_Local'>ktime</span></a> <span class='Operator'>== </span><a href="zic.c.html#LN2654"><span class='Ref_To_Local'>starttime</span></a><span class='Parentheses'>) 
</span>                        <a href="zic.c.html#LN2652"><span class='Ref_To_Local'>usestart</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2652"><span class='Ref_To_Local'>usestart</span></a><span class='Parentheses'>) 
</span>                    <span class='Delimiter'>{ 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2852"><span class='Ref_To_Local'>ktime</span></a> <span class='Operator'>&LT; </span><a href="zic.c.html#LN2654"><span class='Ref_To_Local'>starttime</span></a><span class='Parentheses'>) 
</span>                        <span class='Delimiter'>{ 
</span>                            <a href="zic.c.html#LN2659"><span class='Ref_To_Local'>startoff</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN3442"><span class='Ref_to_Func'>oadd</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN2648"><span class='Ref_To_Local'>zp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN95"><span class='Ref_to_Member'>z_gmtoff</span></a><span class='Delimiter'>, 
</span>                                            <a href="zic.c.html#LN2657"><span class='Ref_To_Local'>stdoff</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                            <a href="zic.c.html#LN2324"><span class='Ref_to_Func'>doabbr</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN2663"><span class='Ref_To_Local'>startbuf</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN2648"><span class='Ref_To_Local'>zp</span></a><span class='Delimiter'>, 
</span>                                   <a href="zic.c.html#LN2649"><span class='Ref_To_Local'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN75"><span class='Ref_to_Member'>r_abbrvar</span></a><span class='Delimiter'>, 
</span>                                   <a href="zic.c.html#LN2649"><span class='Ref_To_Local'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN74"><span class='Ref_to_Member'>r_stdoff</span></a><span class='Delimiter'>, 
</span>                                   <span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                            <span class='Control'>continue</span><span class='Delimiter'>; 
</span>                        <span class='Delimiter'>} 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="zic.c.html#LN2663"><span class='Ref_To_Local'>startbuf</span></a> <span class='Operator'>== </span><span class='String'>'\0'</span> <span class='Operator'>&& 
</span>                            <a href="zic.c.html#LN2659"><span class='Ref_To_Local'>startoff</span></a> <span class='Operator'>== </span><a href="zic.c.html#LN3442"><span class='Ref_to_Func'>oadd</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN2648"><span class='Ref_To_Local'>zp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN95"><span class='Ref_to_Member'>z_gmtoff</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN2657"><span class='Ref_To_Local'>stdoff</span></a><span class='Parentheses'>))</span> 
                        <span class='Delimiter'>{ 
</span>                            <a href="zic.c.html#LN2324"><span class='Ref_to_Func'>doabbr</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN2663"><span class='Ref_To_Local'>startbuf</span></a><span class='Delimiter'>, 
</span>                                   <a href="zic.c.html#LN2648"><span class='Ref_To_Local'>zp</span></a><span class='Delimiter'>, 
</span>                                   <a href="zic.c.html#LN2649"><span class='Ref_To_Local'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN75"><span class='Ref_to_Member'>r_abbrvar</span></a><span class='Delimiter'>, 
</span>                                   <a href="zic.c.html#LN2649"><span class='Ref_To_Local'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN74"><span class='Ref_to_Member'>r_stdoff</span></a><span class='Delimiter'>, 
</span>                                   <span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Delimiter'>} 
</span>                    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if usestart &raquo; </span> 
                    <a href="zic.c.html#LN450"><span class='Ref_to_Func'>eats</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN2648"><span class='Ref_To_Local'>zp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN91"><span class='Ref_to_Member'>z_filename</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN2648"><span class='Ref_To_Local'>zp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN92"><span class='Ref_to_Member'>z_linenum</span></a><span class='Delimiter'>, 
</span>                         <a href="zic.c.html#LN2649"><span class='Ref_To_Local'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN54"><span class='Ref_to_Member'>r_filename</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN2649"><span class='Ref_To_Local'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN55"><span class='Ref_to_Member'>r_linenum</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="zic.c.html#LN2324"><span class='Ref_to_Func'>doabbr</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN2664"><span class='Ref_To_Local'>ab</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN2648"><span class='Ref_To_Local'>zp</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN2649"><span class='Ref_To_Local'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN75"><span class='Ref_to_Member'>r_abbrvar</span></a><span class='Delimiter'>, 
</span>                           <a href="zic.c.html#LN2649"><span class='Ref_To_Local'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN74"><span class='Ref_to_Member'>r_stdoff</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="zic.c.html#LN2853"><span class='Ref_To_Local'>offset</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN3442"><span class='Ref_to_Func'>oadd</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN2648"><span class='Ref_To_Local'>zp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN95"><span class='Ref_to_Member'>z_gmtoff</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN2649"><span class='Ref_To_Local'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN74"><span class='Ref_to_Member'>r_stdoff</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="zic.c.html#LN2662"><span class='Ref_To_Local'>type</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN3046"><span class='Ref_to_Func'>addtype</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN2853"><span class='Ref_To_Local'>offset</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN2664"><span class='Ref_To_Local'>ab</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN2649"><span class='Ref_To_Local'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN74"><span class='Ref_to_Member'>r_stdoff</span></a> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                                   <a href="zic.c.html#LN2649"><span class='Ref_To_Local'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN71"><span class='Ref_to_Member'>r_todisstd</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN2649"><span class='Ref_To_Local'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN73"><span class='Ref_to_Member'>r_todisgmt</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2649"><span class='Ref_To_Local'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN59"><span class='Ref_to_Member'>r_hiyear</span></a> <span class='Operator'>== </span><a href="zic.c.html#LN25"><span class='Ref_to_Const'>ZIC_MAX</span></a> 
                        <span class='Operator'>&& !</span><span class='Parentheses'>(</span><span class='Number'>0</span> <span class='Operator'>&LT;= </span><a href="zic.c.html#LN2672"><span class='Ref_To_Local'>lastatmax</span></a> 
                             <span class='Operator'>&& </span><a href="zic.c.html#LN2852"><span class='Ref_To_Local'>ktime</span></a> <span class='Operator'>&LT; </span><a href="zic.c.html#LN374"><span class='Ref_to_Global_Var'>attypes</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN2672"><span class='Ref_To_Local'>lastatmax</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="zic.c.html#LN371"><span class='Ref_to_Member'>at</span></a><span class='Parentheses'>))</span> 
                        <a href="zic.c.html#LN2672"><span class='Ref_To_Local'>lastatmax</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN181"><span class='Ref_to_Global_Var'>timecnt</span></a><span class='Delimiter'>; 
</span>                    <a href="zic.c.html#LN3021"><span class='Ref_to_Func'>addtt</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN2852"><span class='Ref_To_Local'>ktime</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN2662"><span class='Ref_To_Local'>type</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for ;; &raquo; </span> 
            <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for year=min_year;year&LT;=m... &raquo; </span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2652"><span class='Ref_To_Local'>usestart</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="zic.c.html#LN2663"><span class='Ref_To_Local'>startbuf</span></a> <span class='Operator'>== </span><span class='String'>'\0'</span> <span class='Operator'>&& 
</span>                <a href="zic.c.html#LN2648"><span class='Ref_To_Local'>zp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN97"><span class='Ref_to_Member'>z_format</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL </span><span class='Operator'>&& 
</span>                strchr<span class='Parentheses'>(</span><a href="zic.c.html#LN2648"><span class='Ref_To_Local'>zp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN97"><span class='Ref_to_Member'>z_format</span></a><span class='Delimiter'>, </span><span class='String'>'%'</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Null_Value'>NULL </span><span class='Operator'>&& 
</span>                strchr<span class='Parentheses'>(</span><a href="zic.c.html#LN2648"><span class='Ref_To_Local'>zp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN97"><span class='Ref_to_Member'>z_format</span></a><span class='Delimiter'>, </span><span class='String'>'/'</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> 
                <a href="../../contrib/cube/cubeparse.y.html#LN150"><span class='Ref_to_Proto'>strcpy</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN2663"><span class='Ref_To_Local'>startbuf</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN2648"><span class='Ref_To_Local'>zp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN97"><span class='Ref_to_Member'>z_format</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="zic.c.html#LN459"><span class='Ref_to_Func'>eat</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN2648"><span class='Ref_To_Local'>zp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN91"><span class='Ref_to_Member'>z_filename</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN2648"><span class='Ref_To_Local'>zp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN92"><span class='Ref_to_Member'>z_linenum</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="zic.c.html#LN2663"><span class='Ref_To_Local'>startbuf</span></a> <span class='Operator'>== </span><span class='String'>'\0'</span><span class='Parentheses'>) 
</span>                <a href="../interfaces/ecpg/test/expected/sql-dyntest.c.html#LN145"><span class='Ref_to_Func'>error</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"cannot determine time zone abbreviation to use just after until time"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> 
                <a href="zic.c.html#LN3021"><span class='Ref_to_Func'>addtt</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN2654"><span class='Ref_To_Local'>starttime</span></a><span class='Delimiter'>, 
</span>                      <a href="zic.c.html#LN3046"><span class='Ref_to_Func'>addtype</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN2659"><span class='Ref_To_Local'>startoff</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN2663"><span class='Ref_To_Local'>startbuf</span></a><span class='Delimiter'>, 
</span>                              <a href="zic.c.html#LN2659"><span class='Ref_To_Local'>startoff</span></a> <span class='Operator'>!= </span><a href="zic.c.html#LN2648"><span class='Ref_To_Local'>zp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN95"><span class='Ref_to_Member'>z_gmtoff</span></a><span class='Delimiter'>, 
</span>                              <a href="zic.c.html#LN2660"><span class='Ref_To_Local'>startttisstd</span></a><span class='Delimiter'>, 
</span>                              <a href="zic.c.html#LN2661"><span class='Ref_To_Local'>startttisgmt</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Now we may get to set starttime for the next zone line. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2653"><span class='Ref_To_Local'>useuntil</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="zic.c.html#LN2660"><span class='Ref_To_Local'>startttisstd</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN2648"><span class='Ref_To_Local'>zp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN105"><span class='Ref_to_Member'>z_untilrule</span></a><span class='Operator'>.</span><a href="zic.c.html#LN71"><span class='Ref_to_Member'>r_todisstd</span></a><span class='Delimiter'>; 
</span>            <a href="zic.c.html#LN2661"><span class='Ref_To_Local'>startttisgmt</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN2648"><span class='Ref_To_Local'>zp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN105"><span class='Ref_to_Member'>z_untilrule</span></a><span class='Operator'>.</span><a href="zic.c.html#LN73"><span class='Ref_to_Member'>r_todisgmt</span></a><span class='Delimiter'>; 
</span>            <a href="zic.c.html#LN2654"><span class='Ref_To_Local'>starttime</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN2648"><span class='Ref_To_Local'>zp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN106"><span class='Ref_to_Member'>z_untiltime</span></a><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="zic.c.html#LN2660"><span class='Ref_To_Local'>startttisstd</span></a><span class='Parentheses'>) 
</span>                <a href="zic.c.html#LN2654"><span class='Ref_To_Local'>starttime</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN3450"><span class='Ref_to_Func'>tadd</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN2654"><span class='Ref_To_Local'>starttime</span></a><span class='Delimiter'>, </span><span class='Operator'>-</span><a href="zic.c.html#LN2657"><span class='Ref_To_Local'>stdoff</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="zic.c.html#LN2661"><span class='Ref_To_Local'>startttisgmt</span></a><span class='Parentheses'>) 
</span>                <a href="zic.c.html#LN2654"><span class='Ref_To_Local'>starttime</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN3450"><span class='Ref_to_Func'>tadd</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN2654"><span class='Ref_To_Local'>starttime</span></a><span class='Delimiter'>, </span><span class='Operator'>-</span><a href="zic.c.html#LN2656"><span class='Ref_To_Local'>gmtoff</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=0;i&LT;zonecount;++i &raquo; </span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Number'>0</span> <span class='Operator'>&LT;= </span><a href="zic.c.html#LN2672"><span class='Ref_To_Local'>lastatmax</span></a><span class='Parentheses'>) 
</span>        <a href="zic.c.html#LN374"><span class='Ref_to_Global_Var'>attypes</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN2672"><span class='Ref_To_Local'>lastatmax</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="zic.c.html#LN372"><span class='Ref_to_Member'>dontmerge</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN2670"><span class='Ref_To_Local'>do_extend</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * If we're extending the explicitly listed observations for 400 years 
         * because we can't fill the POSIX-TZ field, check whether we actually 
         * ended up explicitly listing observations through that period.  If 
         * there aren't any near the end of the 400-year period, add a 
         * redundant one at the end of the final year, to make it clear that 
         * we are claiming to have definite knowledge of the lack of 
         * transitions up to that point. 
         */ 
</span><a name="LN2999"></a>        <span class='Control'>struct</span> <a href="localtime.c.html#LN81"><span class='Ref_to_Struct'>rule</span></a> <span class='Declare_Local'>xr</span><span class='Delimiter'>; 
</span><a name="LN3000"></a>        <span class='Control'>struct</span> <a href="zic.c.html#LN369"><span class='Ref_to_Struct'>attype</span></a> <span class='Operator'>*</span><span class='Declare_Local'>lastat</span><span class='Delimiter'>; 
</span> 
        <a href="zic.c.html#LN2999"><span class='Ref_To_Local'>xr</span></a><span class='Operator'>.</span><a href="zic.c.html#LN64"><span class='Ref_to_Member'>r_month</span></a> <span class='Operator'>= </span><a href="private.h.html#LN124"><span class='Ref_to_Const'>TM_JANUARY</span></a><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN2999"><span class='Ref_To_Local'>xr</span></a><span class='Operator'>.</span><a href="zic.c.html#LN66"><span class='Ref_to_Member'>r_dycode</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN85"><span class='Ref_to_Const'>DC_DOM</span></a><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN2999"><span class='Ref_To_Local'>xr</span></a><span class='Operator'>.</span><a href="zic.c.html#LN67"><span class='Ref_to_Member'>r_dayofmonth</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN2999"><span class='Ref_To_Local'>xr</span></a><span class='Operator'>.</span><a href="zic.c.html#LN70"><span class='Ref_to_Member'>r_tod</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN3000"><span class='Ref_To_Local'>lastat</span></a> <span class='Operator'>= &</span><a href="zic.c.html#LN374"><span class='Ref_to_Global_Var'>attypes</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>], </span><a href="zic.c.html#LN2650"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; </span><a href="zic.c.html#LN2650"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="zic.c.html#LN181"><span class='Ref_to_Global_Var'>timecnt</span></a><span class='Delimiter'>; </span><a href="zic.c.html#LN2650"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN374"><span class='Ref_to_Global_Var'>attypes</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN2650"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="zic.c.html#LN371"><span class='Ref_to_Member'>at</span></a> <span class='Operator'>&GT; </span><a href="zic.c.html#LN3000"><span class='Ref_To_Local'>lastat</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN371"><span class='Ref_to_Member'>at</span></a><span class='Parentheses'>) 
</span>                <a href="zic.c.html#LN3000"><span class='Ref_To_Local'>lastat</span></a> <span class='Operator'>= &</span><a href="zic.c.html#LN374"><span class='Ref_to_Global_Var'>attypes</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN2650"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN3000"><span class='Ref_To_Local'>lastat</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN371"><span class='Ref_to_Member'>at</span></a> <span class='Operator'>&LT; </span><a href="zic.c.html#LN3479"><span class='Ref_to_Func'>rpytime</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="zic.c.html#LN2999"><span class='Ref_To_Local'>xr</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN173"><span class='Ref_to_Global_Var'>max_year</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span>            <a href="zic.c.html#LN3021"><span class='Ref_to_Func'>addtt</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN3479"><span class='Ref_to_Func'>rpytime</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="zic.c.html#LN2999"><span class='Ref_To_Local'>xr</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN173"><span class='Ref_to_Global_Var'>max_year</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="zic.c.html#LN183"><span class='Ref_to_Global_Var'>typecnt</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="zic.c.html#LN374"><span class='Ref_to_Global_Var'>attypes</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN181"><span class='Ref_to_Global_Var'>timecnt</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="zic.c.html#LN372"><span class='Ref_to_Member'>dontmerge</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if do_extend &raquo; </span> 
    <a href="zic.c.html#LN1863"><span class='Ref_to_Func'>writezone</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN2646"><span class='Ref_to_Parameter'>zpfirst</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN94"><span class='Ref_to_Member'>z_name</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN2665"><span class='Ref_To_Local'>envvar</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN2671"><span class='Ref_To_Local'>version</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN2663"><span class='Ref_To_Local'>startbuf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN2664"><span class='Ref_To_Local'>ab</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN2665"><span class='Ref_To_Local'>envvar</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end outzone &raquo; </span> 
 
<span class='Keyword'>static void 
</span><a name="LN3022"></a><span class='Declare_Function'>addtt</span><span class='Parentheses'>(</span><a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a> <span class='Declare_Parameter'>starttime</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>type</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN3022"><span class='Ref_to_Parameter'>starttime</span></a> <span class='Operator'>&LT;= </span><a href="zic.c.html#LN1005"><span class='Ref_to_Global_Var'>early_time</span></a> 
        <span class='Operator'>|| </span><span class='Parentheses'>(</span><a href="zic.c.html#LN181"><span class='Ref_to_Global_Var'>timecnt</span></a> <span class='Operator'>== </span><span class='Number'>1</span> <span class='Operator'>&& </span><a href="zic.c.html#LN374"><span class='Ref_to_Global_Var'>attypes</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="zic.c.html#LN371"><span class='Ref_to_Member'>at</span></a> <span class='Operator'>&LT; </span><a href="zic.c.html#LN1005"><span class='Ref_to_Global_Var'>early_time</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="zic.c.html#LN375"><span class='Ref_to_Global_Var'>gmtoffs</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="zic.c.html#LN375"><span class='Ref_to_Global_Var'>gmtoffs</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN3022"><span class='Ref_to_Parameter'>type</span></a><span class='Delimiter'>]; 
</span>        <a href="zic.c.html#LN376"><span class='Ref_to_Global_Var'>isdsts</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="zic.c.html#LN376"><span class='Ref_to_Global_Var'>isdsts</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN3022"><span class='Ref_to_Parameter'>type</span></a><span class='Delimiter'>]; 
</span>        <a href="zic.c.html#LN378"><span class='Ref_to_Global_Var'>ttisstds</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="zic.c.html#LN378"><span class='Ref_to_Global_Var'>ttisstds</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN3022"><span class='Ref_to_Parameter'>type</span></a><span class='Delimiter'>]; 
</span>        <a href="zic.c.html#LN379"><span class='Ref_to_Global_Var'>ttisgmts</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="zic.c.html#LN379"><span class='Ref_to_Global_Var'>ttisgmts</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN3022"><span class='Ref_to_Parameter'>type</span></a><span class='Delimiter'>]; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN377"><span class='Ref_to_Global_Var'>abbrinds</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN3022"><span class='Ref_to_Parameter'>type</span></a><span class='Delimiter'>] </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <a href="../../contrib/cube/cubeparse.y.html#LN150"><span class='Ref_to_Proto'>strcpy</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN380"><span class='Ref_to_Global_Var'>chars</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="zic.c.html#LN380"><span class='Ref_to_Global_Var'>chars</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN377"><span class='Ref_to_Global_Var'>abbrinds</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN3022"><span class='Ref_to_Parameter'>type</span></a><span class='Delimiter'>]]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN377"><span class='Ref_to_Global_Var'>abbrinds</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN162"><span class='Ref_to_Global_Var'>charcnt</span></a> <span class='Operator'>= </span>strlen<span class='Parentheses'>(</span><a href="zic.c.html#LN380"><span class='Ref_to_Global_Var'>chars</span></a><span class='Parentheses'>) </span><span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN183"><span class='Ref_to_Global_Var'>typecnt</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN181"><span class='Ref_to_Global_Var'>timecnt</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN3022"><span class='Ref_to_Parameter'>type</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <a href="zic.c.html#LN374"><span class='Ref_to_Global_Var'>attypes</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN430"><span class='Ref_to_Func'>growalloc</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN374"><span class='Ref_to_Global_Var'>attypes</span></a><span class='Delimiter'>, </span><span class='Keyword'>sizeof </span><span class='Operator'>*</span><a href="zic.c.html#LN374"><span class='Ref_to_Global_Var'>attypes</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN181"><span class='Ref_to_Global_Var'>timecnt</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="zic.c.html#LN182"><span class='Ref_to_Global_Var'>timecnt_alloc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN374"><span class='Ref_to_Global_Var'>attypes</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN181"><span class='Ref_to_Global_Var'>timecnt</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="zic.c.html#LN371"><span class='Ref_to_Member'>at</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN3022"><span class='Ref_to_Parameter'>starttime</span></a><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN374"><span class='Ref_to_Global_Var'>attypes</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN181"><span class='Ref_to_Global_Var'>timecnt</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="zic.c.html#LN372"><span class='Ref_to_Member'>dontmerge</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN374"><span class='Ref_to_Global_Var'>attypes</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN181"><span class='Ref_to_Global_Var'>timecnt</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="zic.c.html#LN373"><span class='Ref_to_Member'>type</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN3022"><span class='Ref_to_Parameter'>type</span></a><span class='Delimiter'>; 
</span>    <span class='Operator'>++</span><a href="zic.c.html#LN181"><span class='Ref_to_Global_Var'>timecnt</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end addtt &raquo; </span> 
 
<span class='Keyword'>static int 
</span><a name="LN3047"></a><span class='Declare_Function'>addtype</span><span class='Parentheses'>(</span><a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a> <span class='Declare_Parameter'>gmtoff</span><span class='Delimiter'>, </span><span class='Keyword'>char const </span><span class='Operator'>* </span><span class='Declare_Parameter'>abbr</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>isdst</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>ttisstd</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>ttisgmt</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3049"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>, 
</span><a name="LN3050"></a>                <span class='Declare_Local'>j</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * See if there's already an entry for this zone type. If so, just return 
     * its index. 
     */ 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN3049"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="zic.c.html#LN3049"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="zic.c.html#LN183"><span class='Ref_to_Global_Var'>typecnt</span></a><span class='Delimiter'>; </span><span class='Operator'>++</span><a href="zic.c.html#LN3049"><span class='Ref_To_Local'>i</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN3047"><span class='Ref_to_Parameter'>gmtoff</span></a> <span class='Operator'>== </span><a href="zic.c.html#LN375"><span class='Ref_to_Global_Var'>gmtoffs</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN3049"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>&& </span><a href="zic.c.html#LN3047"><span class='Ref_to_Parameter'>isdst</span></a> <span class='Operator'>== </span><a href="zic.c.html#LN376"><span class='Ref_to_Global_Var'>isdsts</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN3049"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>&& 
</span>            strcmp<span class='Parentheses'>(</span><a href="zic.c.html#LN3047"><span class='Ref_to_Parameter'>abbr</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="zic.c.html#LN380"><span class='Ref_to_Global_Var'>chars</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN377"><span class='Ref_to_Global_Var'>abbrinds</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN3049"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]]</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span> <span class='Operator'>&& 
</span>            <a href="zic.c.html#LN3047"><span class='Ref_to_Parameter'>ttisstd</span></a> <span class='Operator'>== </span><a href="zic.c.html#LN378"><span class='Ref_to_Global_Var'>ttisstds</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN3049"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>&& 
</span>            <a href="zic.c.html#LN3047"><span class='Ref_to_Parameter'>ttisgmt</span></a> <span class='Operator'>== </span><a href="zic.c.html#LN379"><span class='Ref_to_Global_Var'>ttisgmts</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN3049"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span> 
            <span class='Control'>return</span> <a href="zic.c.html#LN3049"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * There isn't one; add a new one, unless there are already too many. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN183"><span class='Ref_to_Global_Var'>typecnt</span></a> <span class='Operator'>&GT;= </span><a href="tzfile.h.html#LN95"><span class='Ref_to_Const'>TZ_MAX_TYPES</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../interfaces/ecpg/test/expected/sql-dyntest.c.html#LN145"><span class='Ref_to_Func'>error</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"too many local time types"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="../test/isolation/specscanner.l.html#LN91"><span class='Ref_to_Proto'>exit</span></a><span class='Parentheses'>(</span><a href="../bin/psql/settings.h.html#LN150"><span class='Ref_to_Const'>EXIT_FAILURE</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><span class='Parentheses'>(</span><span class='Operator'>-</span><span class='Number'>1L</span> <span class='Operator'>- </span><span class='Number'>2147483647L</span> <span class='Operator'>&LT;= </span><a href="zic.c.html#LN3047"><span class='Ref_to_Parameter'>gmtoff</span></a> <span class='Operator'>&& </span><a href="zic.c.html#LN3047"><span class='Ref_to_Parameter'>gmtoff</span></a> <span class='Operator'>&LT;= </span><span class='Number'>2147483647L</span><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../interfaces/ecpg/test/expected/sql-dyntest.c.html#LN145"><span class='Ref_to_Func'>error</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"UT offset out of range"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="../test/isolation/specscanner.l.html#LN91"><span class='Ref_to_Proto'>exit</span></a><span class='Parentheses'>(</span><a href="../bin/psql/settings.h.html#LN150"><span class='Ref_to_Const'>EXIT_FAILURE</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <a href="zic.c.html#LN375"><span class='Ref_to_Global_Var'>gmtoffs</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN3049"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="zic.c.html#LN3047"><span class='Ref_to_Parameter'>gmtoff</span></a><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN376"><span class='Ref_to_Global_Var'>isdsts</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN3049"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="zic.c.html#LN3047"><span class='Ref_to_Parameter'>isdst</span></a><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN378"><span class='Ref_to_Global_Var'>ttisstds</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN3049"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="zic.c.html#LN3047"><span class='Ref_to_Parameter'>ttisstd</span></a><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN379"><span class='Ref_to_Global_Var'>ttisgmts</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN3049"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="zic.c.html#LN3047"><span class='Ref_to_Parameter'>ttisgmt</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN3050"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="zic.c.html#LN3050"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>&LT; </span><a href="zic.c.html#LN162"><span class='Ref_to_Global_Var'>charcnt</span></a><span class='Delimiter'>; </span><span class='Operator'>++</span><a href="zic.c.html#LN3050"><span class='Ref_To_Local'>j</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><span class='Operator'>&</span><a href="zic.c.html#LN380"><span class='Ref_to_Global_Var'>chars</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN3050"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>], </span><a href="zic.c.html#LN3047"><span class='Ref_to_Parameter'>abbr</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
            <span class='Control'>break</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN3050"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>== </span><a href="zic.c.html#LN162"><span class='Ref_to_Global_Var'>charcnt</span></a><span class='Parentheses'>) 
</span>        <a href="zic.c.html#LN3577"><span class='Ref_to_Func'>newabbr</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN3047"><span class='Ref_to_Parameter'>abbr</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN377"><span class='Ref_to_Global_Var'>abbrinds</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN3049"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="zic.c.html#LN3050"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>; 
</span>    <span class='Operator'>++</span><a href="zic.c.html#LN183"><span class='Ref_to_Global_Var'>typecnt</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="zic.c.html#LN3049"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end addtype &raquo; </span> 
 
<span class='Keyword'>static void 
</span><a name="LN3094"></a><span class='Declare_Function'>leapadd</span><span class='Parentheses'>(</span><a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a> <span class='Declare_Parameter'>t</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>positive</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>rolling</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>count</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3096"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>, 
</span><a name="LN3097"></a>                <span class='Declare_Local'>j</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN166"><span class='Ref_to_Global_Var'>leapcnt</span></a> <span class='Operator'>+ </span><span class='Parentheses'>(</span><a href="zic.c.html#LN3094"><span class='Ref_to_Parameter'>positive</span></a> <span class='Operator'>? </span><a href="zic.c.html#LN3094"><span class='Ref_to_Parameter'>count</span></a> <span class='Operator'>: </span><span class='Number'>1</span><span class='Parentheses'>) </span><span class='Operator'>&GT; </span><a href="tzfile.h.html#LN100"><span class='Ref_to_Const'>TZ_MAX_LEAPS</span></a><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../interfaces/ecpg/test/expected/sql-dyntest.c.html#LN145"><span class='Ref_to_Func'>error</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"too many leap seconds"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="../test/isolation/specscanner.l.html#LN91"><span class='Ref_to_Proto'>exit</span></a><span class='Parentheses'>(</span><a href="../bin/psql/settings.h.html#LN150"><span class='Ref_to_Const'>EXIT_FAILURE</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN3096"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="zic.c.html#LN3096"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="zic.c.html#LN166"><span class='Ref_to_Global_Var'>leapcnt</span></a><span class='Delimiter'>; </span><span class='Operator'>++</span><a href="zic.c.html#LN3096"><span class='Ref_To_Local'>i</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN3094"><span class='Ref_to_Parameter'>t</span></a> <span class='Operator'>&LT;= </span><a href="zic.c.html#LN381"><span class='Ref_to_Global_Var'>trans</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN3096"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN3094"><span class='Ref_to_Parameter'>t</span></a> <span class='Operator'>== </span><a href="zic.c.html#LN381"><span class='Ref_to_Global_Var'>trans</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN3096"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <a href="../interfaces/ecpg/test/expected/sql-dyntest.c.html#LN145"><span class='Ref_to_Func'>error</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"repeated leap second moment"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="../test/isolation/specscanner.l.html#LN91"><span class='Ref_to_Proto'>exit</span></a><span class='Parentheses'>(</span><a href="../bin/psql/settings.h.html#LN150"><span class='Ref_to_Const'>EXIT_FAILURE</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Control'>do</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN3097"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN166"><span class='Ref_to_Global_Var'>leapcnt</span></a><span class='Delimiter'>; </span><a href="zic.c.html#LN3097"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>&GT; </span><a href="zic.c.html#LN3096"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>; </span><span class='Operator'>--</span><a href="zic.c.html#LN3097"><span class='Ref_To_Local'>j</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="zic.c.html#LN381"><span class='Ref_to_Global_Var'>trans</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN3097"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="zic.c.html#LN381"><span class='Ref_to_Global_Var'>trans</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN3097"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>]; 
</span>            <a href="zic.c.html#LN382"><span class='Ref_to_Global_Var'>corr</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN3097"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="zic.c.html#LN382"><span class='Ref_to_Global_Var'>corr</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN3097"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>]; 
</span>            <a href="zic.c.html#LN383"><span class='Ref_to_Global_Var'>roll</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN3097"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="zic.c.html#LN383"><span class='Ref_to_Global_Var'>roll</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN3097"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>]; 
</span>        <span class='Delimiter'>} 
</span>        <a href="zic.c.html#LN381"><span class='Ref_to_Global_Var'>trans</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN3096"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="zic.c.html#LN3094"><span class='Ref_to_Parameter'>t</span></a><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN382"><span class='Ref_to_Global_Var'>corr</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN3096"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="zic.c.html#LN3094"><span class='Ref_to_Parameter'>positive</span></a> <span class='Operator'>? </span><span class='Number'>1</span> <span class='Operator'>: -</span><a href="zic.c.html#LN3094"><span class='Ref_to_Parameter'>count</span></a><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN383"><span class='Ref_to_Global_Var'>roll</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN3096"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="zic.c.html#LN3094"><span class='Ref_to_Parameter'>rolling</span></a><span class='Delimiter'>; 
</span>        <span class='Operator'>++</span><a href="zic.c.html#LN166"><span class='Ref_to_Global_Var'>leapcnt</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} </span><span class='Control'>while</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN3094"><span class='Ref_to_Parameter'>positive</span></a> <span class='Operator'>&& --</span><a href="zic.c.html#LN3094"><span class='Ref_to_Parameter'>count</span></a> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end leapadd &raquo; </span> 
 
<span class='Keyword'>static void 
</span><a name="LN3130"></a><span class='Declare_Function'>adjleap</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3132"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN3133"></a>    <a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a>       <span class='Declare_Local'>last</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * propagate leap seconds forward 
     */ 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN3132"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="zic.c.html#LN3132"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="zic.c.html#LN166"><span class='Ref_to_Global_Var'>leapcnt</span></a><span class='Delimiter'>; </span><span class='Operator'>++</span><a href="zic.c.html#LN3132"><span class='Ref_To_Local'>i</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="zic.c.html#LN381"><span class='Ref_to_Global_Var'>trans</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN3132"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="zic.c.html#LN3450"><span class='Ref_to_Func'>tadd</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN381"><span class='Ref_to_Global_Var'>trans</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN3132"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>], </span><a href="zic.c.html#LN3133"><span class='Ref_To_Local'>last</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN3133"><span class='Ref_To_Local'>last</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN382"><span class='Ref_to_Global_Var'>corr</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN3132"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>+= </span><a href="zic.c.html#LN3133"><span class='Ref_To_Local'>last</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
} 
</span> 
<span class='Keyword'>static char </span><span class='Operator'>* 
</span><a name="LN3146"></a><span class='Declare_Function'>shellquote</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>b</span><span class='Delimiter'>, </span><span class='Keyword'>char const </span><span class='Operator'>* </span><span class='Declare_Parameter'>s</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Operator'>*</span><a href="zic.c.html#LN3146"><span class='Ref_to_Parameter'>b</span></a><span class='Operator'>++ = </span><span class='String'>'\''</span><span class='Delimiter'>; 
</span>    <span class='Control'>while</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="zic.c.html#LN3146"><span class='Ref_to_Parameter'>s</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="zic.c.html#LN3146"><span class='Ref_to_Parameter'>s</span></a> <span class='Operator'>== </span><span class='String'>'\''</span><span class='Parentheses'>) 
</span>            <span class='Operator'>*</span><a href="zic.c.html#LN3146"><span class='Ref_to_Parameter'>b</span></a><span class='Operator'>++ = </span><span class='String'>'\''</span><span class='Delimiter'>, </span><span class='Operator'>*</span><a href="zic.c.html#LN3146"><span class='Ref_to_Parameter'>b</span></a><span class='Operator'>++ = </span><span class='String'>'\\'</span><span class='Delimiter'>, </span><span class='Operator'>*</span><a href="zic.c.html#LN3146"><span class='Ref_to_Parameter'>b</span></a><span class='Operator'>++ = </span><span class='String'>'\''</span><span class='Delimiter'>; 
</span>        <span class='Operator'>*</span><a href="zic.c.html#LN3146"><span class='Ref_to_Parameter'>b</span></a><span class='Operator'>++ = *</span><a href="zic.c.html#LN3146"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Operator'>*</span><a href="zic.c.html#LN3146"><span class='Ref_to_Parameter'>b</span></a><span class='Operator'>++ = </span><span class='String'>'\''</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="zic.c.html#LN3146"><span class='Ref_to_Parameter'>b</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Keyword'>static bool 
</span><a name="LN3160"></a><span class='Declare_Function'>yearistype</span><span class='Parentheses'>(</span><a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a> <span class='Declare_Parameter'>year</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>type</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3162"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>buf</span><span class='Delimiter'>; 
</span><a name="LN3163"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>b</span><span class='Delimiter'>; 
</span><a name="LN3164"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN3160"><span class='Ref_to_Parameter'>type</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL </span><span class='Operator'>|| *</span><a href="zic.c.html#LN3160"><span class='Ref_to_Parameter'>type</span></a> <span class='Operator'>== </span><span class='String'>'\0'</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Boolean'>true</span><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN3162"><span class='Ref_To_Local'>buf</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN412"><span class='Ref_to_Func'>emalloc</span></a><span class='Parentheses'>(</span><span class='Number'>1</span> <span class='Operator'>+ </span><span class='Number'>4</span> <span class='Operator'>* </span>strlen<span class='Parentheses'>(</span><a href="zic.c.html#LN562"><span class='Ref_to_Global_Var'>yitcommand</span></a><span class='Parentheses'>) </span><span class='Operator'>+ </span><span class='Number'>2</span> 
                  <span class='Operator'>+ </span><a href="private.h.html#LN90"><span class='Ref_to_Macro'>INT_STRLEN_MAXIMUM</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a><span class='Parentheses'>) </span><span class='Operator'>+</span><span class='Number'>2</span> <span class='Operator'>+ </span><span class='Number'>4</span> <span class='Operator'>* </span>strlen<span class='Parentheses'>(</span><a href="zic.c.html#LN3160"><span class='Ref_to_Parameter'>type</span></a><span class='Parentheses'>) </span><span class='Operator'>+ </span><span class='Number'>2</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN3163"><span class='Ref_To_Local'>b</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN3145"><span class='Ref_to_Func'>shellquote</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN3162"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN562"><span class='Ref_to_Global_Var'>yitcommand</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Operator'>*</span><a href="zic.c.html#LN3163"><span class='Ref_To_Local'>b</span></a><span class='Operator'>++ = </span><span class='String'>' '</span><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN3163"><span class='Ref_To_Local'>b</span></a> <span class='Operator'>+= </span><a href="../include/port.h.html#LN170"><span class='Ref_to_Macro'>sprintf</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN3163"><span class='Ref_To_Local'>b</span></a><span class='Delimiter'>, </span><a href="../include/c.h.html#LN314"><span class='Ref_to_Const'>INT64_FORMAT</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN3160"><span class='Ref_to_Parameter'>year</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Operator'>*</span><a href="zic.c.html#LN3163"><span class='Ref_To_Local'>b</span></a><span class='Operator'>++ = </span><span class='String'>' '</span><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN3163"><span class='Ref_To_Local'>b</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN3145"><span class='Ref_to_Func'>shellquote</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN3163"><span class='Ref_To_Local'>b</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN3160"><span class='Ref_to_Parameter'>type</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Operator'>*</span><a href="zic.c.html#LN3163"><span class='Ref_To_Local'>b</span></a> <span class='Operator'>= </span><span class='String'>'\0'</span><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN3164"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../include/port.h.html#LN312"><span class='Ref_to_Macro'>system</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN3162"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="private.h.html#LN41"><span class='Ref_to_Macro'>WIFEXITED</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN3164"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN3179"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>status</span> <span class='Operator'>= </span><a href="private.h.html#LN44"><span class='Ref_to_Macro'>WEXITSTATUS</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN3164"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN3179"><span class='Ref_To_Local'>status</span></a> <span class='Operator'>&LT;= </span><span class='Number'>1</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN3162"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>return</span> <a href="zic.c.html#LN3179"><span class='Ref_To_Local'>status</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span>    <a href="../interfaces/ecpg/test/expected/sql-dyntest.c.html#LN145"><span class='Ref_to_Func'>error</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"Wild result from command execution"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../contrib/seg/segscan.l.html#LN10"><span class='Ref_to_Macro'>fprintf</span></a><span class='Parentheses'>(</span>stderr<span class='Delimiter'>, </span>_<span class='Parentheses'>(</span><span class='String'>"%s: command was '%s', result was %d\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>            <a href="../bin/pg_test_timing/pg_test_timing.c.html#LN11"><span class='Ref_to_Global_Var'>progname</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN3162"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN3164"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../test/isolation/specscanner.l.html#LN91"><span class='Ref_to_Proto'>exit</span></a><span class='Parentheses'>(</span><a href="../bin/psql/settings.h.html#LN150"><span class='Ref_to_Const'>EXIT_FAILURE</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end yearistype &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* Is A a space character in the C locale?  */ 
</span><span class='Keyword'>static bool 
</span><a name="LN3195"></a><span class='Declare_Function'>is_space</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Declare_Parameter'>a</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN3195"><span class='Ref_to_Parameter'>a</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>default</span><span class='Operator'>: 
</span>            <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <span class='String'>' '</span><span class='Operator'>: 
</span>        <span class='Control'>case</span> <span class='String'>'\f'</span><span class='Operator'>: 
</span>        <span class='Control'>case</span> <span class='String'>'\n'</span><span class='Operator'>: 
</span>        <span class='Control'>case</span> <span class='String'>'\r'</span><span class='Operator'>: 
</span>        <span class='Control'>case</span> <span class='String'>'\t'</span><span class='Operator'>: 
</span>        <span class='Control'>case</span> <span class='String'>'\v'</span><span class='Operator'>: 
</span>            <span class='Control'>return</span> <span class='Boolean'>true</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
} 
</span> 
<span class='Comment_Multi_Line'>/* Is A an alphabetic character in the C locale?  */ 
</span><span class='Keyword'>static bool 
</span><a name="LN3213"></a><span class='Declare_Function'>is_alpha</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Declare_Parameter'>a</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN3213"><span class='Ref_to_Parameter'>a</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>default</span><span class='Operator'>: 
</span>            <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <span class='String'>'A'</span><span class='Operator'>: 
</span>        <span class='Control'>case</span> <span class='String'>'B'</span><span class='Operator'>: 
</span>        <span class='Control'>case</span> <span class='String'>'C'</span><span class='Operator'>: 
</span>        <span class='Control'>case</span> <span class='String'>'D'</span><span class='Operator'>: 
</span>        <span class='Control'>case</span> <span class='String'>'E'</span><span class='Operator'>: 
</span>        <span class='Control'>case</span> <span class='String'>'F'</span><span class='Operator'>: 
</span>        <span class='Control'>case</span> <span class='String'>'G'</span><span class='Operator'>: 
</span>        <span class='Control'>case</span> <span class='String'>'H'</span><span class='Operator'>: 
</span>        <span class='Control'>case</span> <span class='String'>'I'</span><span class='Operator'>: 
</span>        <span class='Control'>case</span> <span class='String'>'J'</span><span class='Operator'>: 
</span>        <span class='Control'>case</span> <span class='String'>'K'</span><span class='Operator'>: 
</span>        <span class='Control'>case</span> <span class='String'>'L'</span><span class='Operator'>: 
</span>        <span class='Control'>case</span> <span class='String'>'M'</span><span class='Operator'>: 
</span>        <span class='Control'>case</span> <span class='String'>'N'</span><span class='Operator'>: 
</span>        <span class='Control'>case</span> <span class='String'>'O'</span><span class='Operator'>: 
</span>        <span class='Control'>case</span> <span class='String'>'P'</span><span class='Operator'>: 
</span>        <span class='Control'>case</span> <span class='String'>'Q'</span><span class='Operator'>: 
</span>        <span class='Control'>case</span> <span class='String'>'R'</span><span class='Operator'>: 
</span>        <span class='Control'>case</span> <span class='String'>'S'</span><span class='Operator'>: 
</span>        <span class='Control'>case</span> <span class='String'>'T'</span><span class='Operator'>: 
</span>        <span class='Control'>case</span> <span class='String'>'U'</span><span class='Operator'>: 
</span>        <span class='Control'>case</span> <span class='String'>'V'</span><span class='Operator'>: 
</span>        <span class='Control'>case</span> <span class='String'>'W'</span><span class='Operator'>: 
</span>        <span class='Control'>case</span> <span class='String'>'X'</span><span class='Operator'>: 
</span>        <span class='Control'>case</span> <span class='String'>'Y'</span><span class='Operator'>: 
</span>        <span class='Control'>case</span> <span class='String'>'Z'</span><span class='Operator'>: 
</span>        <span class='Control'>case</span> <span class='String'>'a'</span><span class='Operator'>: 
</span>        <span class='Control'>case</span> <span class='String'>'b'</span><span class='Operator'>: 
</span>        <span class='Control'>case</span> <span class='String'>'c'</span><span class='Operator'>: 
</span>        <span class='Control'>case</span> <span class='String'>'d'</span><span class='Operator'>: 
</span>        <span class='Control'>case</span> <span class='String'>'e'</span><span class='Operator'>: 
</span>        <span class='Control'>case</span> <span class='String'>'f'</span><span class='Operator'>: 
</span>        <span class='Control'>case</span> <span class='String'>'g'</span><span class='Operator'>: 
</span>        <span class='Control'>case</span> <span class='String'>'h'</span><span class='Operator'>: 
</span>        <span class='Control'>case</span> <span class='String'>'i'</span><span class='Operator'>: 
</span>        <span class='Control'>case</span> <span class='String'>'j'</span><span class='Operator'>: 
</span>        <span class='Control'>case</span> <span class='String'>'k'</span><span class='Operator'>: 
</span>        <span class='Control'>case</span> <span class='String'>'l'</span><span class='Operator'>: 
</span>        <span class='Control'>case</span> <span class='String'>'m'</span><span class='Operator'>: 
</span>        <span class='Control'>case</span> <span class='String'>'n'</span><span class='Operator'>: 
</span>        <span class='Control'>case</span> <span class='String'>'o'</span><span class='Operator'>: 
</span>        <span class='Control'>case</span> <span class='String'>'p'</span><span class='Operator'>: 
</span>        <span class='Control'>case</span> <span class='String'>'q'</span><span class='Operator'>: 
</span>        <span class='Control'>case</span> <span class='String'>'r'</span><span class='Operator'>: 
</span>        <span class='Control'>case</span> <span class='String'>'s'</span><span class='Operator'>: 
</span>        <span class='Control'>case</span> <span class='String'>'t'</span><span class='Operator'>: 
</span>        <span class='Control'>case</span> <span class='String'>'u'</span><span class='Operator'>: 
</span>        <span class='Control'>case</span> <span class='String'>'v'</span><span class='Operator'>: 
</span>        <span class='Control'>case</span> <span class='String'>'w'</span><span class='Operator'>: 
</span>        <span class='Control'>case</span> <span class='String'>'x'</span><span class='Operator'>: 
</span>        <span class='Control'>case</span> <span class='String'>'y'</span><span class='Operator'>: 
</span>        <span class='Control'>case</span> <span class='String'>'z'</span><span class='Operator'>: 
</span>            <span class='Control'>return</span> <span class='Boolean'>true</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch a &raquo; </span> 
<span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end is_alpha &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* If A is an uppercase character in the C locale, return its lowercase 
 * counterpart.  Otherwise, return A.  */ 
</span><span class='Keyword'>static char 
</span><a name="LN3278"></a><span class='Declare_Function'>lowerit</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Declare_Parameter'>a</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN3278"><span class='Ref_to_Parameter'>a</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>default</span><span class='Operator'>: 
</span>            <span class='Control'>return</span> <a href="zic.c.html#LN3278"><span class='Ref_to_Parameter'>a</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <span class='String'>'A'</span><span class='Operator'>: 
</span>            <span class='Control'>return</span> <span class='String'>'a'</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <span class='String'>'B'</span><span class='Operator'>: 
</span>            <span class='Control'>return</span> <span class='String'>'b'</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <span class='String'>'C'</span><span class='Operator'>: 
</span>            <span class='Control'>return</span> <span class='String'>'c'</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <span class='String'>'D'</span><span class='Operator'>: 
</span>            <span class='Control'>return</span> <span class='String'>'d'</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <span class='String'>'E'</span><span class='Operator'>: 
</span>            <span class='Control'>return</span> <span class='String'>'e'</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <span class='String'>'F'</span><span class='Operator'>: 
</span>            <span class='Control'>return</span> <span class='String'>'f'</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <span class='String'>'G'</span><span class='Operator'>: 
</span>            <span class='Control'>return</span> <span class='String'>'g'</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <span class='String'>'H'</span><span class='Operator'>: 
</span>            <span class='Control'>return</span> <span class='String'>'h'</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <span class='String'>'I'</span><span class='Operator'>: 
</span>            <span class='Control'>return</span> <span class='String'>'i'</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <span class='String'>'J'</span><span class='Operator'>: 
</span>            <span class='Control'>return</span> <span class='String'>'j'</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <span class='String'>'K'</span><span class='Operator'>: 
</span>            <span class='Control'>return</span> <span class='String'>'k'</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <span class='String'>'L'</span><span class='Operator'>: 
</span>            <span class='Control'>return</span> <span class='String'>'l'</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <span class='String'>'M'</span><span class='Operator'>: 
</span>            <span class='Control'>return</span> <span class='String'>'m'</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <span class='String'>'N'</span><span class='Operator'>: 
</span>            <span class='Control'>return</span> <span class='String'>'n'</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <span class='String'>'O'</span><span class='Operator'>: 
</span>            <span class='Control'>return</span> <span class='String'>'o'</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <span class='String'>'P'</span><span class='Operator'>: 
</span>            <span class='Control'>return</span> <span class='String'>'p'</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <span class='String'>'Q'</span><span class='Operator'>: 
</span>            <span class='Control'>return</span> <span class='String'>'q'</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <span class='String'>'R'</span><span class='Operator'>: 
</span>            <span class='Control'>return</span> <span class='String'>'r'</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <span class='String'>'S'</span><span class='Operator'>: 
</span>            <span class='Control'>return</span> <span class='String'>'s'</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <span class='String'>'T'</span><span class='Operator'>: 
</span>            <span class='Control'>return</span> <span class='String'>'t'</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <span class='String'>'U'</span><span class='Operator'>: 
</span>            <span class='Control'>return</span> <span class='String'>'u'</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <span class='String'>'V'</span><span class='Operator'>: 
</span>            <span class='Control'>return</span> <span class='String'>'v'</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <span class='String'>'W'</span><span class='Operator'>: 
</span>            <span class='Control'>return</span> <span class='String'>'w'</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <span class='String'>'X'</span><span class='Operator'>: 
</span>            <span class='Control'>return</span> <span class='String'>'x'</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <span class='String'>'Y'</span><span class='Operator'>: 
</span>            <span class='Control'>return</span> <span class='String'>'y'</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <span class='String'>'Z'</span><span class='Operator'>: 
</span>            <span class='Control'>return</span> <span class='String'>'z'</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch a &raquo; </span> 
<span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end lowerit &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* case-insensitive equality */ 
</span><span class='Keyword'>static bool 
</span><a name="LN3341"></a><span class='Declare_Function'>ciequal</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>ap</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>bp</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN3277"><span class='Ref_to_Func'>lowerit</span></a><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="zic.c.html#LN3341"><span class='Ref_to_Parameter'>ap</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><a href="zic.c.html#LN3277"><span class='Ref_to_Func'>lowerit</span></a><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="zic.c.html#LN3341"><span class='Ref_to_Parameter'>bp</span></a><span class='Operator'>++</span><span class='Parentheses'>))</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="zic.c.html#LN3341"><span class='Ref_to_Parameter'>ap</span></a><span class='Operator'>++ == </span><span class='String'>'\0'</span><span class='Parentheses'>) 
</span>            <span class='Control'>return</span> <span class='Boolean'>true</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
} 
</span> 
<span class='Keyword'>static bool 
</span><a name="LN3350"></a><span class='Declare_Function'>itsabbr</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>abbr</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>word</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN3277"><span class='Ref_to_Func'>lowerit</span></a><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="zic.c.html#LN3350"><span class='Ref_to_Parameter'>abbr</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><a href="zic.c.html#LN3277"><span class='Ref_to_Func'>lowerit</span></a><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="zic.c.html#LN3350"><span class='Ref_to_Parameter'>word</span></a><span class='Parentheses'>))</span> 
        <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <span class='Operator'>++</span><a href="zic.c.html#LN3350"><span class='Ref_to_Parameter'>word</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>while</span> <span class='Parentheses'>(</span><span class='Operator'>*++</span><a href="zic.c.html#LN3350"><span class='Ref_to_Parameter'>abbr</span></a> <span class='Operator'>!= </span><span class='String'>'\0'</span><span class='Parentheses'>) 
</span>        <span class='Control'>do</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="zic.c.html#LN3350"><span class='Ref_to_Parameter'>word</span></a> <span class='Operator'>== </span><span class='String'>'\0'</span><span class='Parentheses'>) 
</span>                <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} </span><span class='Control'>while</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN3277"><span class='Ref_to_Func'>lowerit</span></a><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="zic.c.html#LN3350"><span class='Ref_to_Parameter'>word</span></a><span class='Operator'>++</span><span class='Parentheses'>) </span><span class='Operator'>!= </span><a href="zic.c.html#LN3277"><span class='Ref_to_Func'>lowerit</span></a><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="zic.c.html#LN3350"><span class='Ref_to_Parameter'>abbr</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <span class='Boolean'>true</span><span class='Delimiter'>; 
} 
</span> 
<span class='Keyword'>static const </span><span class='Control'>struct</span> <a href="zic.c.html#LN286"><span class='Ref_to_Struct'>lookup</span></a> <span class='Operator'>* 
</span><a name="LN3365"></a><span class='Declare_Function'>byword</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>word</span><span class='Delimiter'>, </span><span class='Keyword'>const </span><span class='Control'>struct</span> <a href="zic.c.html#LN286"><span class='Ref_to_Struct'>lookup</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>table</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3367"></a>    <span class='Keyword'>const </span><span class='Control'>struct</span> <a href="zic.c.html#LN286"><span class='Ref_to_Struct'>lookup</span></a> <span class='Operator'>*</span><span class='Declare_Local'>foundlp</span><span class='Delimiter'>; 
</span><a name="LN3368"></a>    <span class='Keyword'>const </span><span class='Control'>struct</span> <a href="zic.c.html#LN286"><span class='Ref_to_Struct'>lookup</span></a> <span class='Operator'>*</span><span class='Declare_Local'>lp</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN3365"><span class='Ref_to_Parameter'>word</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL </span><span class='Operator'>|| </span><a href="zic.c.html#LN3365"><span class='Ref_to_Parameter'>table</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Look for exact match. 
     */ 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN3368"><span class='Ref_To_Local'>lp</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN3365"><span class='Ref_to_Parameter'>table</span></a><span class='Delimiter'>; </span><a href="zic.c.html#LN3368"><span class='Ref_To_Local'>lp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN288"><span class='Ref_to_Member'>l_word</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; </span><span class='Operator'>++</span><a href="zic.c.html#LN3368"><span class='Ref_To_Local'>lp</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN3340"><span class='Ref_to_Func'>ciequal</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN3365"><span class='Ref_to_Parameter'>word</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN3368"><span class='Ref_To_Local'>lp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN288"><span class='Ref_to_Member'>l_word</span></a><span class='Parentheses'>))</span> 
            <span class='Control'>return</span> <a href="zic.c.html#LN3368"><span class='Ref_To_Local'>lp</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Look for inexact match. 
     */ 
</span>    <a href="zic.c.html#LN3367"><span class='Ref_To_Local'>foundlp</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN3368"><span class='Ref_To_Local'>lp</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN3365"><span class='Ref_to_Parameter'>table</span></a><span class='Delimiter'>; </span><a href="zic.c.html#LN3368"><span class='Ref_To_Local'>lp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN288"><span class='Ref_to_Member'>l_word</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; </span><span class='Operator'>++</span><a href="zic.c.html#LN3368"><span class='Ref_To_Local'>lp</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN3349"><span class='Ref_to_Func'>itsabbr</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN3365"><span class='Ref_to_Parameter'>word</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN3368"><span class='Ref_To_Local'>lp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN288"><span class='Ref_to_Member'>l_word</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN3367"><span class='Ref_To_Local'>foundlp</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>                <a href="zic.c.html#LN3367"><span class='Ref_To_Local'>foundlp</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN3368"><span class='Ref_To_Local'>lp</span></a><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> 
                <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* multiple inexact matches */ 
</span>        <span class='Delimiter'>} 
</span>    <span class='Control'>return</span> <a href="zic.c.html#LN3367"><span class='Ref_To_Local'>foundlp</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end byword &raquo; </span> 
 
<span class='Keyword'>static char </span><span class='Operator'>** 
</span><a name="LN3396"></a><span class='Declare_Function'>getfields</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>cp</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3398"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>dp</span><span class='Delimiter'>; 
</span><a name="LN3399"></a>    <span class='Keyword'>char</span>      <span class='Operator'>**</span><span class='Declare_Local'>array</span><span class='Delimiter'>; 
</span><a name="LN3400"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>nsubs</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN3396"><span class='Ref_to_Parameter'>cp</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN3399"><span class='Ref_To_Local'>array</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN412"><span class='Ref_to_Func'>emalloc</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN396"><span class='Ref_to_Func'>size_product</span></a><span class='Parentheses'>(</span>strlen<span class='Parentheses'>(</span><a href="zic.c.html#LN3396"><span class='Ref_to_Parameter'>cp</span></a><span class='Parentheses'>) </span><span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Keyword'>sizeof </span><span class='Operator'>*</span><a href="zic.c.html#LN3399"><span class='Ref_To_Local'>array</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN3400"><span class='Ref_To_Local'>nsubs</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><span class='Delimiter'>;;</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN3194"><span class='Ref_to_Func'>is_space</span></a><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="zic.c.html#LN3396"><span class='Ref_to_Parameter'>cp</span></a><span class='Parentheses'>))</span> 
            <span class='Operator'>++</span><a href="zic.c.html#LN3396"><span class='Ref_to_Parameter'>cp</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="zic.c.html#LN3396"><span class='Ref_to_Parameter'>cp</span></a> <span class='Operator'>== </span><span class='String'>'\0'</span> <span class='Operator'>|| *</span><a href="zic.c.html#LN3396"><span class='Ref_to_Parameter'>cp</span></a> <span class='Operator'>== </span><span class='String'>'#'</span><span class='Parentheses'>) 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN3399"><span class='Ref_To_Local'>array</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN3400"><span class='Ref_To_Local'>nsubs</span></a><span class='Operator'>++</span><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="zic.c.html#LN3398"><span class='Ref_To_Local'>dp</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN3396"><span class='Ref_to_Parameter'>cp</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>do</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>((</span><span class='Operator'>*</span><a href="zic.c.html#LN3398"><span class='Ref_To_Local'>dp</span></a> <span class='Operator'>= *</span><a href="zic.c.html#LN3396"><span class='Ref_to_Parameter'>cp</span></a><span class='Operator'>++</span><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='String'>'"'</span><span class='Parentheses'>)</span> 
                <span class='Operator'>++</span><a href="zic.c.html#LN3398"><span class='Ref_To_Local'>dp</span></a><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> 
                <span class='Control'>while</span> <span class='Parentheses'>((</span><span class='Operator'>*</span><a href="zic.c.html#LN3398"><span class='Ref_To_Local'>dp</span></a> <span class='Operator'>= *</span><a href="zic.c.html#LN3396"><span class='Ref_to_Parameter'>cp</span></a><span class='Operator'>++</span><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='String'>'"'</span><span class='Parentheses'>)</span> 
                    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="zic.c.html#LN3398"><span class='Ref_To_Local'>dp</span></a> <span class='Operator'>!= </span><span class='String'>'\0'</span><span class='Parentheses'>) 
</span>                        <span class='Operator'>++</span><a href="zic.c.html#LN3398"><span class='Ref_To_Local'>dp</span></a><span class='Delimiter'>; 
</span>                    <span class='Control'>else</span> 
                    <span class='Delimiter'>{ 
</span>                        <a href="../interfaces/ecpg/test/expected/sql-dyntest.c.html#LN145"><span class='Ref_to_Func'>error</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"Odd number of quotation marks"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                        <a href="../test/isolation/specscanner.l.html#LN91"><span class='Ref_to_Proto'>exit</span></a><span class='Parentheses'>(</span><a href="../bin/psql/settings.h.html#LN150"><span class='Ref_to_Const'>EXIT_FAILURE</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>        <span class='Delimiter'>} </span><span class='Control'>while</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="zic.c.html#LN3396"><span class='Ref_to_Parameter'>cp</span></a> <span class='Operator'>&& *</span><a href="zic.c.html#LN3396"><span class='Ref_to_Parameter'>cp</span></a> <span class='Operator'>!= </span><span class='String'>'#'</span> <span class='Operator'>&& !</span><a href="zic.c.html#LN3194"><span class='Ref_to_Func'>is_space</span></a><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="zic.c.html#LN3396"><span class='Ref_to_Parameter'>cp</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN3194"><span class='Ref_to_Func'>is_space</span></a><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="zic.c.html#LN3396"><span class='Ref_to_Parameter'>cp</span></a><span class='Parentheses'>))</span> 
            <span class='Operator'>++</span><a href="zic.c.html#LN3396"><span class='Ref_to_Parameter'>cp</span></a><span class='Delimiter'>; 
</span>        <span class='Operator'>*</span><a href="zic.c.html#LN3398"><span class='Ref_To_Local'>dp</span></a> <span class='Operator'>= </span><span class='String'>'\0'</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for ;; &raquo; </span> 
    <a href="zic.c.html#LN3399"><span class='Ref_To_Local'>array</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN3400"><span class='Ref_To_Local'>nsubs</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="zic.c.html#LN3399"><span class='Ref_To_Local'>array</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end getfields &raquo; </span> 
 
<span class='Keyword'>static void 
</span><a name="LN3436"></a><span class='Declare_Function'>time_overflow</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <a href="../interfaces/ecpg/test/expected/sql-dyntest.c.html#LN145"><span class='Ref_to_Func'>error</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"time overflow"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../test/isolation/specscanner.l.html#LN91"><span class='Ref_to_Proto'>exit</span></a><span class='Parentheses'>(</span><a href="../bin/psql/settings.h.html#LN150"><span class='Ref_to_Const'>EXIT_FAILURE</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Keyword'>static </span><a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a> 
<a name="LN3443"></a><span class='Declare_Function'>oadd</span><span class='Parentheses'>(</span><a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a> <span class='Declare_Parameter'>t1</span><span class='Delimiter'>, </span><a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a> <span class='Declare_Parameter'>t2</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN3443"><span class='Ref_to_Parameter'>t1</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span> <span class='Operator'>? </span><a href="zic.c.html#LN3443"><span class='Ref_to_Parameter'>t2</span></a> <span class='Operator'>&LT; </span><a href="zic.c.html#LN24"><span class='Ref_to_Const'>ZIC_MIN</span></a> <span class='Operator'>- </span><a href="zic.c.html#LN3443"><span class='Ref_to_Parameter'>t1</span></a> <span class='Operator'>: </span><a href="zic.c.html#LN25"><span class='Ref_to_Const'>ZIC_MAX</span></a> <span class='Operator'>- </span><a href="zic.c.html#LN3443"><span class='Ref_to_Parameter'>t1</span></a> <span class='Operator'>&LT; </span><a href="zic.c.html#LN3443"><span class='Ref_to_Parameter'>t2</span></a><span class='Parentheses'>) 
</span>        <a href="zic.c.html#LN3435"><span class='Ref_to_Func'>time_overflow</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="zic.c.html#LN3443"><span class='Ref_to_Parameter'>t1</span></a> <span class='Operator'>+ </span><a href="zic.c.html#LN3443"><span class='Ref_to_Parameter'>t2</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Keyword'>static </span><a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a> 
<a name="LN3451"></a><span class='Declare_Function'>tadd</span><span class='Parentheses'>(</span><a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a> <span class='Declare_Parameter'>t1</span><span class='Delimiter'>, </span><a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a> <span class='Declare_Parameter'>t2</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN3451"><span class='Ref_to_Parameter'>t1</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN3451"><span class='Ref_to_Parameter'>t2</span></a> <span class='Operator'>&LT; </span><a href="zic.c.html#LN964"><span class='Ref_to_Global_Var'>min_time</span></a> <span class='Operator'>- </span><a href="zic.c.html#LN3451"><span class='Ref_to_Parameter'>t1</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN3451"><span class='Ref_to_Parameter'>t1</span></a> <span class='Operator'>!= </span><a href="zic.c.html#LN964"><span class='Ref_to_Global_Var'>min_time</span></a><span class='Parentheses'>) 
</span>                <a href="zic.c.html#LN3435"><span class='Ref_to_Func'>time_overflow</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>            <span class='Control'>return</span> <a href="zic.c.html#LN964"><span class='Ref_to_Global_Var'>min_time</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN965"><span class='Ref_to_Global_Var'>max_time</span></a> <span class='Operator'>- </span><a href="zic.c.html#LN3451"><span class='Ref_to_Parameter'>t1</span></a> <span class='Operator'>&LT; </span><a href="zic.c.html#LN3451"><span class='Ref_to_Parameter'>t2</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN3451"><span class='Ref_to_Parameter'>t1</span></a> <span class='Operator'>!= </span><a href="zic.c.html#LN965"><span class='Ref_to_Global_Var'>max_time</span></a><span class='Parentheses'>) 
</span>                <a href="zic.c.html#LN3435"><span class='Ref_to_Func'>time_overflow</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>            <span class='Control'>return</span> <a href="zic.c.html#LN965"><span class='Ref_to_Global_Var'>max_time</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>return</span> <a href="zic.c.html#LN3451"><span class='Ref_to_Parameter'>t1</span></a> <span class='Operator'>+ </span><a href="zic.c.html#LN3451"><span class='Ref_to_Parameter'>t2</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end tadd &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Given a rule, and a year, compute the date (in seconds since January 1, 
 * 1970, 00:00 LOCAL time) in that year that the rule refers to. 
 */ 
</span> 
<span class='Keyword'>static </span><a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a> 
<a name="LN3480"></a><span class='Declare_Function'>rpytime</span><span class='Parentheses'>(</span><span class='Keyword'>const </span><span class='Control'>struct</span> <a href="localtime.c.html#LN81"><span class='Ref_to_Struct'>rule</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>rp</span><span class='Delimiter'>, </span><a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a> <span class='Declare_Parameter'>wantedy</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3482"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>m</span><span class='Delimiter'>, 
</span><a name="LN3483"></a>                <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN3484"></a>    <a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a>       <span class='Declare_Local'>dayoff</span><span class='Delimiter'>;</span>         <span class='Comment_Single_Line'>/* with a nod to Margaret O. */ 
</span><a name="LN3485"></a>    <a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a>       <span class='Declare_Local'>t</span><span class='Delimiter'>, 
</span><a name="LN3486"></a>                <span class='Declare_Local'>y</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN3480"><span class='Ref_to_Parameter'>wantedy</span></a> <span class='Operator'>== </span><a href="zic.c.html#LN24"><span class='Ref_to_Const'>ZIC_MIN</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <a href="zic.c.html#LN964"><span class='Ref_to_Global_Var'>min_time</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN3480"><span class='Ref_to_Parameter'>wantedy</span></a> <span class='Operator'>== </span><a href="zic.c.html#LN25"><span class='Ref_to_Const'>ZIC_MAX</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <a href="zic.c.html#LN965"><span class='Ref_to_Global_Var'>max_time</span></a><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN3484"><span class='Ref_To_Local'>dayoff</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN3482"><span class='Ref_To_Local'>m</span></a> <span class='Operator'>= </span><a href="private.h.html#LN124"><span class='Ref_to_Const'>TM_JANUARY</span></a><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN3486"><span class='Ref_To_Local'>y</span></a> <span class='Operator'>= </span><a href="private.h.html#LN139"><span class='Ref_to_Const'>EPOCH_YEAR</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN3480"><span class='Ref_to_Parameter'>wantedy</span></a> <span class='Operator'>!= </span><a href="zic.c.html#LN3486"><span class='Ref_To_Local'>y</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN3480"><span class='Ref_to_Parameter'>wantedy</span></a> <span class='Operator'>&GT; </span><a href="zic.c.html#LN3486"><span class='Ref_To_Local'>y</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="zic.c.html#LN3483"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN365"><span class='Ref_to_Global_Var'>len_years</span></a><span class='Delimiter'>[</span><a href="private.h.html#LN142"><span class='Ref_to_Macro'>isleap</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN3486"><span class='Ref_To_Local'>y</span></a><span class='Parentheses'>)</span><span class='Delimiter'>]; 
</span>            <span class='Operator'>++</span><a href="zic.c.html#LN3486"><span class='Ref_To_Local'>y</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Operator'>--</span><a href="zic.c.html#LN3486"><span class='Ref_To_Local'>y</span></a><span class='Delimiter'>; 
</span>            <a href="zic.c.html#LN3483"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= -</span><a href="zic.c.html#LN365"><span class='Ref_to_Global_Var'>len_years</span></a><span class='Delimiter'>[</span><a href="private.h.html#LN142"><span class='Ref_to_Macro'>isleap</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN3486"><span class='Ref_To_Local'>y</span></a><span class='Parentheses'>)</span><span class='Delimiter'>]; 
</span>        <span class='Delimiter'>} 
</span>        <a href="zic.c.html#LN3484"><span class='Ref_To_Local'>dayoff</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN3442"><span class='Ref_to_Func'>oadd</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN3484"><span class='Ref_To_Local'>dayoff</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN3483"><span class='Ref_To_Local'>i</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN3482"><span class='Ref_To_Local'>m</span></a> <span class='Operator'>!= </span><a href="zic.c.html#LN3480"><span class='Ref_to_Parameter'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN64"><span class='Ref_to_Member'>r_month</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="zic.c.html#LN3483"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN360"><span class='Ref_to_Global_Var'>len_months</span></a><span class='Delimiter'>[</span><a href="private.h.html#LN142"><span class='Ref_to_Macro'>isleap</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN3486"><span class='Ref_To_Local'>y</span></a><span class='Parentheses'>)</span><span class='Delimiter'>][</span><a href="zic.c.html#LN3482"><span class='Ref_To_Local'>m</span></a><span class='Delimiter'>]; 
</span>        <a href="zic.c.html#LN3484"><span class='Ref_To_Local'>dayoff</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN3442"><span class='Ref_to_Func'>oadd</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN3484"><span class='Ref_To_Local'>dayoff</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN3483"><span class='Ref_To_Local'>i</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Operator'>++</span><a href="zic.c.html#LN3482"><span class='Ref_To_Local'>m</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <a href="zic.c.html#LN3483"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN3480"><span class='Ref_to_Parameter'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN67"><span class='Ref_to_Member'>r_dayofmonth</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN3482"><span class='Ref_To_Local'>m</span></a> <span class='Operator'>== </span><a href="private.h.html#LN125"><span class='Ref_to_Const'>TM_FEBRUARY</span></a> <span class='Operator'>&& </span><a href="zic.c.html#LN3483"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>== </span><span class='Number'>29</span> <span class='Operator'>&& !</span><a href="private.h.html#LN142"><span class='Ref_to_Macro'>isleap</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN3486"><span class='Ref_To_Local'>y</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN3480"><span class='Ref_to_Parameter'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN66"><span class='Ref_to_Member'>r_dycode</span></a> <span class='Operator'>== </span><a href="zic.c.html#LN87"><span class='Ref_to_Const'>DC_DOWLEQ</span></a><span class='Parentheses'>) 
</span>            <span class='Operator'>--</span><a href="zic.c.html#LN3483"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <a href="../interfaces/ecpg/test/expected/sql-dyntest.c.html#LN145"><span class='Ref_to_Func'>error</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"use of 2/29 in non leap-year"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="../test/isolation/specscanner.l.html#LN91"><span class='Ref_to_Proto'>exit</span></a><span class='Parentheses'>(</span><a href="../bin/psql/settings.h.html#LN150"><span class='Ref_to_Const'>EXIT_FAILURE</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span>    <span class='Operator'>--</span><a href="zic.c.html#LN3483"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN3484"><span class='Ref_To_Local'>dayoff</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN3442"><span class='Ref_to_Func'>oadd</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN3484"><span class='Ref_To_Local'>dayoff</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN3483"><span class='Ref_To_Local'>i</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN3480"><span class='Ref_to_Parameter'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN66"><span class='Ref_to_Member'>r_dycode</span></a> <span class='Operator'>== </span><a href="zic.c.html#LN86"><span class='Ref_to_Const'>DC_DOWGEQ</span></a> <span class='Operator'>|| </span><a href="zic.c.html#LN3480"><span class='Ref_to_Parameter'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN66"><span class='Ref_to_Member'>r_dycode</span></a> <span class='Operator'>== </span><a href="zic.c.html#LN87"><span class='Ref_to_Const'>DC_DOWLEQ</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN3530"></a>        <a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a>       <span class='Declare_Local'>wday</span><span class='Delimiter'>; 
</span> 
<a name="LN3532"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>LDAYSPERWEEK</span>    <span class='Parentheses'>((</span><a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a><span class='Parentheses'>) </span><a href="private.h.html#LN109"><span class='Ref_to_Const'>DAYSPERWEEK</span></a><span class='Parentheses'>)</span> 
        <a href="zic.c.html#LN3530"><span class='Ref_To_Local'>wday</span></a> <span class='Operator'>= </span><a href="private.h.html#LN140"><span class='Ref_to_Const'>EPOCH_WDAY</span></a><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Don't trust mod of negative numbers. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN3484"><span class='Ref_To_Local'>dayoff</span></a> <span class='Operator'>&GT;= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <a href="zic.c.html#LN3530"><span class='Ref_To_Local'>wday</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="zic.c.html#LN3530"><span class='Ref_To_Local'>wday</span></a> <span class='Operator'>+ </span><a href="zic.c.html#LN3484"><span class='Ref_To_Local'>dayoff</span></a><span class='Parentheses'>) </span><span class='Operator'>% </span><a href="zic.c.html#LN3532"><span class='Ref_to_Const'>LDAYSPERWEEK</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <a href="zic.c.html#LN3530"><span class='Ref_To_Local'>wday</span></a> <span class='Operator'>-= </span><span class='Parentheses'>((</span><span class='Operator'>-</span><a href="zic.c.html#LN3484"><span class='Ref_To_Local'>dayoff</span></a><span class='Parentheses'>) </span><span class='Operator'>% </span><a href="zic.c.html#LN3532"><span class='Ref_to_Const'>LDAYSPERWEEK</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN3530"><span class='Ref_To_Local'>wday</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                <a href="zic.c.html#LN3530"><span class='Ref_To_Local'>wday</span></a> <span class='Operator'>+= </span><a href="zic.c.html#LN3532"><span class='Ref_to_Const'>LDAYSPERWEEK</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN3530"><span class='Ref_To_Local'>wday</span></a> <span class='Operator'>!= </span><a href="zic.c.html#LN3480"><span class='Ref_to_Parameter'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN68"><span class='Ref_to_Member'>r_wday</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN3480"><span class='Ref_to_Parameter'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN66"><span class='Ref_to_Member'>r_dycode</span></a> <span class='Operator'>== </span><a href="zic.c.html#LN86"><span class='Ref_to_Const'>DC_DOWGEQ</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <a href="zic.c.html#LN3484"><span class='Ref_To_Local'>dayoff</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN3442"><span class='Ref_to_Func'>oadd</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN3484"><span class='Ref_To_Local'>dayoff</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>++</span><a href="zic.c.html#LN3530"><span class='Ref_To_Local'>wday</span></a> <span class='Operator'>&GT;= </span><a href="zic.c.html#LN3532"><span class='Ref_to_Const'>LDAYSPERWEEK</span></a><span class='Parentheses'>) 
</span>                    <a href="zic.c.html#LN3530"><span class='Ref_To_Local'>wday</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>                <span class='Operator'>++</span><a href="zic.c.html#LN3483"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>else</span> 
            <span class='Delimiter'>{ 
</span>                <a href="zic.c.html#LN3484"><span class='Ref_To_Local'>dayoff</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN3442"><span class='Ref_to_Func'>oadd</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN3484"><span class='Ref_To_Local'>dayoff</span></a><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>--</span><a href="zic.c.html#LN3530"><span class='Ref_To_Local'>wday</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                    <a href="zic.c.html#LN3530"><span class='Ref_To_Local'>wday</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN3532"><span class='Ref_to_Const'>LDAYSPERWEEK</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>                <span class='Operator'>--</span><a href="zic.c.html#LN3483"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN3483"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span> <span class='Operator'>|| </span><a href="zic.c.html#LN3483"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&GT;= </span><a href="zic.c.html#LN360"><span class='Ref_to_Global_Var'>len_months</span></a><span class='Delimiter'>[</span><a href="private.h.html#LN142"><span class='Ref_to_Macro'>isleap</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN3486"><span class='Ref_To_Local'>y</span></a><span class='Parentheses'>)</span><span class='Delimiter'>][</span><a href="zic.c.html#LN3482"><span class='Ref_To_Local'>m</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN175"><span class='Ref_to_Global_Var'>noise</span></a><span class='Parentheses'>) 
</span>                <a href="zic.c.html#LN492"><span class='Ref_to_Func'>warning</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"rule goes past start/end of month; \ 
will not work with pre-2004 versions of zic"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if rp-&GT;r_dycode==DC_DOWG... &raquo; </span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN3484"><span class='Ref_To_Local'>dayoff</span></a> <span class='Operator'>&LT; </span><a href="zic.c.html#LN964"><span class='Ref_to_Global_Var'>min_time</span></a> <span class='Operator'>/ </span><a href="private.h.html#LN113"><span class='Ref_to_Const'>SECSPERDAY</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <a href="zic.c.html#LN964"><span class='Ref_to_Global_Var'>min_time</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN3484"><span class='Ref_To_Local'>dayoff</span></a> <span class='Operator'>&GT; </span><a href="zic.c.html#LN965"><span class='Ref_to_Global_Var'>max_time</span></a> <span class='Operator'>/ </span><a href="private.h.html#LN113"><span class='Ref_to_Const'>SECSPERDAY</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <a href="zic.c.html#LN965"><span class='Ref_to_Global_Var'>max_time</span></a><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN3485"><span class='Ref_To_Local'>t</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="zic.c.html#LN23"><span class='Ref_to_Typedef'>zic_t</span></a><span class='Parentheses'>) </span><a href="zic.c.html#LN3484"><span class='Ref_To_Local'>dayoff</span></a> <span class='Operator'>*</span><a href="private.h.html#LN113"><span class='Ref_to_Const'>SECSPERDAY</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="zic.c.html#LN3450"><span class='Ref_to_Func'>tadd</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN3485"><span class='Ref_To_Local'>t</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN3480"><span class='Ref_to_Parameter'>rp</span></a><span class='Operator'>-&GT;</span><a href="zic.c.html#LN70"><span class='Ref_to_Member'>r_tod</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end rpytime &raquo; </span> 
 
<span class='Keyword'>static void 
</span><a name="LN3578"></a><span class='Declare_Function'>newabbr</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>string</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3580"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="zic.c.html#LN3578"><span class='Ref_to_Parameter'>string</span></a><span class='Delimiter'>, </span><a href="private.h.html#LN26"><span class='Ref_to_Const'>GRANDPARENTED</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span><a name="LN3584"></a>        <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>cp</span><span class='Delimiter'>; 
</span><a name="LN3585"></a>        <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>mp</span><span class='Delimiter'>; 
</span> 
        <a href="zic.c.html#LN3584"><span class='Ref_To_Local'>cp</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN3578"><span class='Ref_to_Parameter'>string</span></a><span class='Delimiter'>; 
</span>        <a href="zic.c.html#LN3585"><span class='Ref_To_Local'>mp</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>        <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN3212"><span class='Ref_to_Func'>is_alpha</span></a><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="zic.c.html#LN3584"><span class='Ref_To_Local'>cp</span></a><span class='Parentheses'>) </span><span class='Operator'>|| </span><span class='Parentheses'>(</span><span class='String'>'0'</span> <span class='Operator'>&LT;= *</span><a href="zic.c.html#LN3584"><span class='Ref_To_Local'>cp</span></a> <span class='Operator'>&& *</span><a href="zic.c.html#LN3584"><span class='Ref_To_Local'>cp</span></a> <span class='Operator'>&LT;= </span><span class='String'>'9'</span><span class='Parentheses'>) 
</span>               <span class='Operator'>|| *</span><a href="zic.c.html#LN3584"><span class='Ref_To_Local'>cp</span></a> <span class='Operator'>== </span><span class='String'>'-'</span> <span class='Operator'>|| *</span><a href="zic.c.html#LN3584"><span class='Ref_To_Local'>cp</span></a> <span class='Operator'>== </span><span class='String'>'+'</span><span class='Parentheses'>)</span> 
            <span class='Operator'>++</span><a href="zic.c.html#LN3584"><span class='Ref_To_Local'>cp</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN175"><span class='Ref_to_Global_Var'>noise</span></a> <span class='Operator'>&& </span><a href="zic.c.html#LN3584"><span class='Ref_To_Local'>cp</span></a> <span class='Operator'>- </span><a href="zic.c.html#LN3578"><span class='Ref_to_Parameter'>string</span></a> <span class='Operator'>&LT; </span><span class='Number'>3</span><span class='Parentheses'>) 
</span>            <a href="zic.c.html#LN3585"><span class='Ref_To_Local'>mp</span></a> <span class='Operator'>= </span>_<span class='Parentheses'>(</span><span class='String'>"time zone abbreviation has fewer than 3 characters"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN3584"><span class='Ref_To_Local'>cp</span></a> <span class='Operator'>- </span><a href="zic.c.html#LN3578"><span class='Ref_to_Parameter'>string</span></a> <span class='Operator'>&GT; </span><a href="zic.c.html#LN28"><span class='Ref_to_Const'>ZIC_MAX_ABBR_LEN_WO_WARN</span></a><span class='Parentheses'>) 
</span>            <a href="zic.c.html#LN3585"><span class='Ref_To_Local'>mp</span></a> <span class='Operator'>= </span>_<span class='Parentheses'>(</span><span class='String'>"time zone abbreviation has too many characters"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="zic.c.html#LN3584"><span class='Ref_To_Local'>cp</span></a> <span class='Operator'>!= </span><span class='String'>'\0'</span><span class='Parentheses'>) 
</span>            <a href="zic.c.html#LN3585"><span class='Ref_To_Local'>mp</span></a> <span class='Operator'>= </span>_<span class='Parentheses'>(</span><span class='String'>"time zone abbreviation differs from POSIX standard"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN3585"><span class='Ref_To_Local'>mp</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>            <a href="zic.c.html#LN492"><span class='Ref_to_Func'>warning</span></a><span class='Parentheses'>(</span><span class='String'>"%s (%s)"</span><span class='Delimiter'>, </span><a href="zic.c.html#LN3585"><span class='Ref_To_Local'>mp</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN3578"><span class='Ref_to_Parameter'>string</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <a href="zic.c.html#LN3580"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span>strlen<span class='Parentheses'>(</span><a href="zic.c.html#LN3578"><span class='Ref_to_Parameter'>string</span></a><span class='Parentheses'>) </span><span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN162"><span class='Ref_to_Global_Var'>charcnt</span></a> <span class='Operator'>+ </span><a href="zic.c.html#LN3580"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&GT; </span><a href="tzfile.h.html#LN97"><span class='Ref_to_Const'>TZ_MAX_CHARS</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../interfaces/ecpg/test/expected/sql-dyntest.c.html#LN145"><span class='Ref_to_Func'>error</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"too many, or too long, time zone abbreviations"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="../test/isolation/specscanner.l.html#LN91"><span class='Ref_to_Proto'>exit</span></a><span class='Parentheses'>(</span><a href="../bin/psql/settings.h.html#LN150"><span class='Ref_to_Const'>EXIT_FAILURE</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <a href="../../contrib/cube/cubeparse.y.html#LN150"><span class='Ref_to_Proto'>strcpy</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="zic.c.html#LN380"><span class='Ref_to_Global_Var'>chars</span></a><span class='Delimiter'>[</span><a href="zic.c.html#LN162"><span class='Ref_to_Global_Var'>charcnt</span></a><span class='Delimiter'>], </span><a href="zic.c.html#LN3578"><span class='Ref_to_Parameter'>string</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="zic.c.html#LN162"><span class='Ref_to_Global_Var'>charcnt</span></a> <span class='Operator'>+= </span><a href="zic.c.html#LN3580"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end newabbr &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* Ensure that the directories of ARGNAME exist, by making any missing 
   ones.  If ANCESTORS, do this only for ARGNAME's ancestors; otherwise, 
   do it for ARGNAME too.  Exit with failure if there is trouble. 
   Do not consider an existing non-directory to be trouble.  */ 
</span><span class='Keyword'>static void 
</span><a name="LN3616"></a><span class='Declare_Function'>mkdirs</span><span class='Parentheses'>(</span><span class='Keyword'>char const </span><span class='Operator'>* </span><span class='Declare_Parameter'>argname</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>ancestors</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3618"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>name</span><span class='Delimiter'>; 
</span><a name="LN3619"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>cp</span><span class='Delimiter'>; 
</span> 
    <a href="zic.c.html#LN3619"><span class='Ref_To_Local'>cp</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN3618"><span class='Ref_To_Local'>name</span></a> <span class='Operator'>= </span><a href="zic.c.html#LN424"><span class='Ref_to_Func'>ecpyalloc</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN3616"><span class='Ref_to_Parameter'>argname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Do not mkdir a root directory, as it must exist.  */ 
</span><span class='Directive'>#ifdef</span> <a href="../include/c.h.html#LN61"><span class='Ref_to_Const'>WIN32</span></a> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN3212"><span class='Ref_to_Func'>is_alpha</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN3618"><span class='Ref_To_Local'>name</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Parentheses'>) </span><span class='Operator'>&& </span><a href="zic.c.html#LN3618"><span class='Ref_To_Local'>name</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='String'>':'</span><span class='Parentheses'>)</span> 
        <a href="zic.c.html#LN3619"><span class='Ref_To_Local'>cp</span></a> <span class='Operator'>+= </span><span class='Number'>2</span><span class='Delimiter'>; 
</span><span class='Directive'>#endif</span> 
    <span class='Control'>while</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="zic.c.html#LN3619"><span class='Ref_To_Local'>cp</span></a> <span class='Operator'>== </span><span class='String'>'/'</span><span class='Parentheses'>) 
</span>        <a href="zic.c.html#LN3619"><span class='Ref_To_Local'>cp</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN3619"><span class='Ref_To_Local'>cp</span></a> <span class='Operator'>&& </span><span class='Parentheses'>((</span><a href="zic.c.html#LN3619"><span class='Ref_To_Local'>cp</span></a> <span class='Operator'>= </span>strchr<span class='Parentheses'>(</span><a href="zic.c.html#LN3619"><span class='Ref_To_Local'>cp</span></a><span class='Delimiter'>, </span><span class='String'>'/'</span><span class='Parentheses'>))</span> <span class='Operator'>|| !</span><a href="zic.c.html#LN3616"><span class='Ref_to_Parameter'>ancestors</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN3619"><span class='Ref_To_Local'>cp</span></a><span class='Parentheses'>) 
</span>            <span class='Operator'>*</span><a href="zic.c.html#LN3619"><span class='Ref_To_Local'>cp</span></a> <span class='Operator'>= </span><span class='String'>'\0'</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Try to create it.  It's OK if creation fails because the directory 
         * already exists, perhaps because some other process just created it. 
         * For simplicity do not check first whether it already exists, as 
         * that is checked anyway if the mkdir fails. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../include/port/win32.h.html#LN56"><span class='Ref_to_Macro'>mkdir</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN3618"><span class='Ref_To_Local'>name</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN33"><span class='Ref_to_Const'>MKDIR_UMASK</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* 
             * For speed, skip itsdir if errno == EEXIST.  Since mkdirs is 
             * called only after open fails with ENOENT on a subfile, EEXIST 
             * implies itsdir here. 
             */ 
</span><a name="LN3649"></a>            <span class='Keyword'>int</span>         <span class='Declare_Local'>err</span> <span class='Operator'>= </span>errno<span class='Delimiter'>; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN3649"><span class='Ref_To_Local'>err</span></a> <span class='Operator'>!= </span>EEXIST <span class='Operator'>&& !</span><a href="zic.c.html#LN1010"><span class='Ref_to_Func'>itsdir</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN3618"><span class='Ref_To_Local'>name</span></a><span class='Parentheses'>))</span> 
            <span class='Delimiter'>{ 
</span>                <a href="../interfaces/ecpg/test/expected/sql-dyntest.c.html#LN145"><span class='Ref_to_Func'>error</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"%s: Cannot create directory %s: %s"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                      <a href="../bin/pg_test_timing/pg_test_timing.c.html#LN11"><span class='Ref_to_Global_Var'>progname</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN3618"><span class='Ref_To_Local'>name</span></a><span class='Delimiter'>, </span><a href="../port/strerror.c.html#LN17"><span class='Ref_to_Func'>strerror</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN3649"><span class='Ref_To_Local'>err</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="../test/isolation/specscanner.l.html#LN91"><span class='Ref_to_Proto'>exit</span></a><span class='Parentheses'>(</span><a href="../bin/psql/settings.h.html#LN150"><span class='Ref_to_Const'>EXIT_FAILURE</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="zic.c.html#LN3619"><span class='Ref_To_Local'>cp</span></a><span class='Parentheses'>) 
</span>            <span class='Operator'>*</span><a href="zic.c.html#LN3619"><span class='Ref_To_Local'>cp</span></a><span class='Operator'>++ = </span><span class='String'>'/'</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end while cp&&((cp=strchr(cp,'/... &raquo; </span> 
    <a href="../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="zic.c.html#LN3618"><span class='Ref_To_Local'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end mkdirs &raquo; </span> 
 
 
<span class='Directive'>#ifdef</span> <a href="../include/c.h.html#LN61"><span class='Ref_to_Const'>WIN32</span></a> 
<span class='Comment_Multi_Line'>/* 
 * To run on win32 
 */ 
</span><span class='Keyword'>int 
</span><a name="LN3670"></a><span class='Declare_Function'>link</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>oldpath</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>newpath</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span>CopyFile<span class='Parentheses'>(</span><a href="zic.c.html#LN3670"><span class='Ref_to_Parameter'>oldpath</span></a><span class='Delimiter'>, </span><a href="zic.c.html#LN3670"><span class='Ref_to_Parameter'>newpath</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../port/win32error.c.html#LN169"><span class='Ref_to_Func'>_dosmaperr</span></a><span class='Parentheses'>(</span>GetLastError<span class='Parentheses'>())</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
} 
</span><span class='Directive'>#endif</span> 
</pre>
<table bgcolor='#c0c0c0' width='100%'><tr><td><a href='../../Contents.html'>Contents</a></td></tr>
</table><hr><p class='blurb' align='center'><a href='http://www.sourceinsight.com'>HTML Created by Source Insight Version 4.00.0084 Built on 2017-02-26</a></p>
</body></html>